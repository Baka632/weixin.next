<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link onerror="wx_loaderror(this)" onerror="wx_loaderror(this)" rel="stylesheet" type="text/css" href="https://res.wx.qq.com/mpres/htmledition/style/page/resource/res_iframe2f613f.css"/> 
</head>
<body class="page_doc">
    <div class="main_hd"><h2>接口分析数据接口</h2></div>
    <div class="main_bd"> 
        <div class="article_box">
            <div class="inner">
                <div class="news_content">
                    <p><span style="font-size: 14px; font-family: 微软雅黑, 'Microsoft YaHei';"></span></p><p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);">微信公众平台于2015年1月6日启动了数据接口的邀请内测。通过数据接口，开发者可以获取与公众平台官网统计模块类似但更灵活的数据，还可根据需要进行高级处理。</p><p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);">在公众号登录授权机制的权限集划分中，接口分析数据接口属于帐号服务权限。</p><p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);">向所有公众号开发者开放数据接口的时间将另行通知。</p><p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);">请注意：</p><pre style="font-stretch: normal; font-size: 14px; font-family: 'MicroSoft YaHei', 'Courier New', 'Andale Mono', monospace; padding: 5px 10px; border: 1px solid rgb(204, 204, 204); color: rgb(51, 51, 51); line-height: 20px; white-space: pre-wrap; word-wrap: break-word; border-radius: 3px; margin-left: 10px;">1、接口侧的公众号数据的数据库中仅存储了2014年12月1日之后的数据，将查询不到在此之前的日期，即使有查到，也是不可信的脏数据；
2、请开发者在调用接口获取数据后，将数据保存在自身数据库中，即加快下次用户的访问速度，也降低了微信侧接口调用的不必要损耗。</pre><p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);">接口分析数据接口指的是用于获得公众平台官网数据统计模块中接口分析数据的接口，具体接口列表如无用户属性数据接口）：</p><table cellspacing="0" cellpadding="4" align="center" width="640px"><tbody><tr class="firstRow thead"><th style="width: 150px;" class="table_cell">接口名称</th><th class="table_cell">最大时间跨度</th><th class="table_cell">接口调用地址（必须使用https）</th></tr><tr><td class="table_cell">获取接口分析数据（getinterfacesummary）</td><td class="table_cell">30</td><td class="table_cell"><a href="https://api.weixin.qq.com/datacube/getinterfacesummary?access_token=ACCESS_TOKEN" class="external free" rel="nofollow" target="_blank" style="color: rgb(54, 103, 153); text-decoration: none;">https://api.weixin.qq.com/datacube/getinterfacesummary?access_token=ACCESS_TOKEN</a></td></tr><tr><td class="table_cell">获取接口分析分时数据（getinterfacesummaryhour）</td><td class="table_cell">1</td><td class="table_cell"><a href="https://api.weixin.qq.com/datacube/getinterfacesummaryhour?access_token=ACCESS_TOKEN" class="external free" rel="nofollow" target="_blank" style="color: rgb(54, 103, 153); text-decoration: none;">https://api.weixin.qq.com/datacube/getinterfacesummaryhour?access_token=ACCESS_TOKEN</a></td></tr></tbody></table><p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);">最大时间跨度是指一次接口调用时最大可获取数据的时间范围，如最大时间跨度为7是指最多一次性获取7天的数据。access_token的实际值请通过“获取access_token”来获取。</p><p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);"><br><strong>接口调用请求说明</strong></p><p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);">接口分析数据接口（包括接口列表中的所有接口）需要向相应接口调用地址POST以下示例数据包：</p><pre style="font-stretch: normal; font-size: 14px; font-family: 'MicroSoft YaHei', 'Courier New', 'Andale Mono', monospace; padding: 5px 10px; border: 1px solid rgb(204, 204, 204); color: rgb(51, 51, 51); line-height: 20px; white-space: pre-wrap; word-wrap: break-word; border-radius: 3px; margin-left: 10px;">{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;"begin_date":&nbsp;"2014-12-07",&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;"end_date":&nbsp;"2014-12-07"
}</pre><p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);"><strong>调用参数说明</strong></p><table cellspacing="0" cellpadding="4" align="center" width="640px"><tbody><tr class="firstRow thead"><th style="width: 150px;" class="table_cell">参数</th><th style="width: 150px;" class="table_cell">是否必须</th><th class="table_cell">说明</th></tr><tr><td class="table_cell">access_token</td><td class="table_cell">是</td><td class="table_cell">调用接口凭证</td></tr><tr><td class="table_cell">begin_date</td><td class="table_cell">是</td><td class="table_cell">获取数据的起始日期，begin_date和end_date的差值需小于“最大时间跨度”（比如最大时间跨度为1时，begin_date和end_date的差值只能为0，才能小于1），否则会报错</td></tr><tr><td class="table_cell">end_date</td><td class="table_cell">是</td><td class="table_cell">获取数据的结束日期，end_date允许设置的最大值为昨日</td></tr></tbody></table><p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);"><strong>返回说明</strong></p><p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);">正常情况下，获取接口分析数据接口的返回JSON数据包如下：</p><pre style="font-stretch: normal; font-size: 14px; font-family: 'MicroSoft YaHei', 'Courier New', 'Andale Mono', monospace; padding: 5px 10px; border: 1px solid rgb(204, 204, 204); color: rgb(51, 51, 51); line-height: 20px; white-space: pre-wrap; word-wrap: break-word; border-radius: 3px; margin-left: 10px;">{&nbsp;
&nbsp;&nbsp;&nbsp;"list":&nbsp;[&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ref_date":&nbsp;"2014-12-07",&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"callback_count":&nbsp;36974,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"fail_count":&nbsp;67,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"total_time_cost":&nbsp;14994291,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"max_time_cost":&nbsp;5044
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
	//后续还有不同ref_date（在begin_date和end_date之间）的数据
&nbsp;&nbsp;&nbsp;]
}</pre><p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);">正常情况下，获取接口分析分时数据接口的返回JSON数据包如下：</p><pre style="font-stretch: normal; font-size: 14px; font-family: 'MicroSoft YaHei', 'Courier New', 'Andale Mono', monospace; padding: 5px 10px; border: 1px solid rgb(204, 204, 204); color: rgb(51, 51, 51); line-height: 20px; white-space: pre-wrap; word-wrap: break-word; border-radius: 3px; margin-left: 10px;">{&nbsp;
&nbsp;&nbsp;&nbsp;"list":&nbsp;[&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ref_date":&nbsp;"2014-12-01",&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ref_hour":&nbsp;0,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"callback_count":&nbsp;331,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"fail_count":&nbsp;18,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"total_time_cost":&nbsp;167870,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"max_time_cost":&nbsp;5042
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
	//后续还有不同ref_hour的数据
&nbsp;&nbsp;&nbsp;]
}</pre><p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);"><strong>返回参数说明</strong></p><table cellspacing="0" cellpadding="4" align="center" width="640px"><tbody><tr class="firstRow thead"><th style="width: 240px;" class="table_cell">参数</th><th class="table_cell">说明</th></tr><tr><td class="table_cell">ref_date</td><td class="table_cell">数据的日期</td></tr><tr><td class="table_cell">ref_hour</td><td class="table_cell">数据的小时</td></tr><tr><td class="table_cell">callback_count</td><td class="table_cell">通过服务器配置地址获得消息后，被动回复用户消息的次数</td></tr><tr><td class="table_cell">fail_count</td><td class="table_cell">上述动作的失败次数</td></tr><tr><td class="table_cell">total_time_cost</td><td class="table_cell">总耗时，除以callback_count即为平均耗时</td></tr><tr><td class="table_cell">max_time_cost</td><td class="table_cell">最大耗时</td></tr></tbody></table><p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);">错误时微信会返回错误码等信息，具体错误码查询，请见：<a href="http://mp.weixin.qq.com/wiki/10/6380dc743053a91c544ffd2b7c959166.html" class="external text" rel="nofollow" style="color: rgb(54, 103, 153); text-decoration: none;">全局返回码说明</a></p><p><span style="font-size: 14px; font-family: 微软雅黑, 'Microsoft YaHei';"></span><br></p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>