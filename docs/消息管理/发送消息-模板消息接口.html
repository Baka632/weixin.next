
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link onerror="wx_loaderror(this)" onerror="wx_loaderror(this)" rel="stylesheet" type="text/css" href="https://res.wx.qq.com/mpres/htmledition/style/page/resource/res_iframe2f613f.css"/></head>
<body class="page_doc">
<div class="main_hd"><h2>模板消息接口</h2>
</div>
<div class="main_bd">
<div class="article_box">
<div class="inner">
<div class="news_content">
<p><span><span></span>模板消息仅用于公众号向用户发送重要的服务通知，只能用于符合其要求的服务场景中，如信用卡刷卡通知，商品购买成功通知等。不支持广告等营销类消息以及其它所有可能对用户造成骚扰的消息。</span></p>
<p>关于使用规则，请注意：</p>
<pre>1、所有服务号都可以在功能-&gt;添加功能插件处看到申请模板消息功能的入口，但只有认证后的服务号才可以申请模板消息的使用权限并获得该权限；
2、需要选择公众账号服务所处的2个行业，每月可更改1次所选行业；
3、在所选择行业的模板库中选用已有的模板进行调用；
4、每个账号可以同时使用25个模板。
5、当前每个账号的模板消息的日调用上限为10万次，单个模板没有特殊限制。【2014年11月18日将接口调用频率从默认的日1万次提升为日10万次，可在MP登录后的开发者中心查看】。当账号粉丝数超过10W/100W/1000W时，模板消息的日调用上限会相应提升，以公众号MP后台开发者中心页面中标明的数字为准。</pre>
<p>关于接口文档，请注意：</p>
<pre>1、模板消息调用时主要需要模板ID和模板中各参数的赋值内容；
2、模板中参数内容必须以".DATA"结尾，否则视为保留字；
3、模板保留符号"{{&nbsp;}}"。</pre>
<p>目录</p>
<p><a href="#1" target="_self">1&nbsp;设置所属行业</a></p>
<p><a href="#2" target="_self">2&nbsp;获取设置的行业信息</a></p>
<p><a href="#3" target="_self">3&nbsp;获得模板ID</a></p>
<p><a href="#4" target="_self">4&nbsp;获取模板列表</a></p>
<p><a href="#5" target="_self">5&nbsp;删除模板</a></p>
<p><a href="#6" target="_self">6&nbsp;发送模板消息</a></p>
<p><a href="#7" target="_self">7&nbsp;事件推送</a></p>
<p>
<br></p>
<h2><span id=".E8.AE.BE.E7.BD.AE.E6.89.80.E5.B1.9E.E8.A1.8C.E4.B8.9A"></span></h2>
<p><a name="1"></a></p>
<h2><span id=".E8.AE.BE.E7.BD.AE.E6.89.80.E5.B1.9E.E8.A1.8C.E4.B8.9A">设置所属行业</span>
<br></h2>
<p><span>设置行业可在MP中完成，每月可修改行业1次，账号仅可使用所属行业中相关的模板，为方便第三方开发者，提供通过接口调用的方式来修改账号所属行业，具体如下：</span></p>
<p><strong>接口调用请求说明</strong></p>
<pre>http请求方式:&nbsp;POST
https://api.weixin.qq.com/cgi-bin/template/api_set_industry?access_token=ACCESS_TOKEN</pre>
<p><strong>POST数据说明</strong></p>
<p>POST数据示例如下：</p>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"industry_id1":"1",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"industry_id2":"4"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</pre>
<p>参数说明</p>
<table cellspacing="0" cellpadding="4" align="center" width="640px">
<tbody>
<tr class="firstRow thead"><th class="table_cell">参数</th><th class="table_cell">是否必须</th><th class="table_cell">说明</th></tr>
<tr><td class="table_cell">access_token</td><td class="table_cell">是</td><td class="table_cell">接口调用凭证</td></tr>
<tr><td class="table_cell"><p>industry_id1
<br></p>
</td><td class="table_cell">是</td><td class="table_cell">公众号模板消息所属行业编号</td></tr>
<tr><td class="table_cell">industry_id2</td><td class="table_cell">是</td><td class="table_cell">公众号模板消息所属行业编号</td></tr>
</tbody>
</table>
<p><strong>行业代码查询</strong></p>
<table cellspacing="0" cellpadding="4" align="center" width="380px">
<tbody>
<tr class="firstRow thead"><th class="table_cell">主行业</th><th class="table_cell">副行业</th><th class="table_cell">代码</th></tr>
<tr><td class="table_cell">IT科技</td><td class="table_cell">互联网/电子商务</td><td class="table_cell">1</td></tr>
<tr><td class="table_cell">IT科技</td><td class="table_cell">IT软件与服务</td><td class="table_cell">2</td></tr>
<tr><td class="table_cell">IT科技</td><td class="table_cell">IT硬件与设备</td><td class="table_cell">3</td></tr>
<tr><td class="table_cell">IT科技</td><td class="table_cell">电子技术</td><td class="table_cell">4</td></tr>
<tr><td class="table_cell">IT科技</td><td class="table_cell">通信与运营商</td><td class="table_cell">5</td></tr>
<tr><td class="table_cell">IT科技</td><td class="table_cell">网络游戏</td><td class="table_cell">6</td></tr>
<tr><td class="table_cell">金融业</td><td class="table_cell">银行</td><td class="table_cell">7</td></tr>
<tr><td class="table_cell">金融业</td><td class="table_cell">基金|理财|信托</td><td class="table_cell">8</td></tr>
<tr><td class="table_cell">金融业</td><td class="table_cell">保险</td><td class="table_cell">9</td></tr>
<tr><td class="table_cell">餐饮</td><td class="table_cell">餐饮</td><td class="table_cell">10</td></tr>
<tr><td class="table_cell">酒店旅游</td><td class="table_cell">酒店</td><td class="table_cell">11</td></tr>
<tr><td class="table_cell">酒店旅游</td><td class="table_cell">旅游</td><td class="table_cell">12</td></tr>
<tr><td class="table_cell">运输与仓储</td><td class="table_cell">快递</td><td class="table_cell">13</td></tr>
<tr><td class="table_cell">运输与仓储</td><td class="table_cell">物流</td><td class="table_cell">14</td></tr>
<tr><td class="table_cell">运输与仓储</td><td class="table_cell">仓储</td><td class="table_cell">15</td></tr>
<tr><td class="table_cell">教育</td><td class="table_cell">培训</td><td class="table_cell">16</td></tr>
<tr><td class="table_cell">教育</td><td class="table_cell">院校</td><td class="table_cell">17</td></tr>
<tr><td class="table_cell">政府与公共事业</td><td class="table_cell">学术科研</td><td class="table_cell">18</td></tr>
<tr><td class="table_cell">政府与公共事业</td><td class="table_cell">交警</td><td class="table_cell">19</td></tr>
<tr><td class="table_cell">政府与公共事业</td><td class="table_cell">博物馆</td><td class="table_cell">20</td></tr>
<tr><td class="table_cell">政府与公共事业</td><td class="table_cell">公共事业|非盈利机构</td><td class="table_cell">21</td></tr>
<tr><td class="table_cell">医药护理</td><td class="table_cell">医药医疗</td><td class="table_cell">22</td></tr>
<tr><td class="table_cell">医药护理</td><td class="table_cell">护理美容</td><td class="table_cell">23</td></tr>
<tr><td class="table_cell">医药护理</td><td class="table_cell">保健与卫生</td><td class="table_cell">24</td></tr>
<tr><td class="table_cell">交通工具</td><td class="table_cell">汽车相关</td><td class="table_cell">25</td></tr>
<tr><td class="table_cell">交通工具</td><td class="table_cell">摩托车相关</td><td class="table_cell">26</td></tr>
<tr><td class="table_cell">交通工具</td><td class="table_cell">火车相关</td><td class="table_cell">27</td></tr>
<tr><td class="table_cell">交通工具</td><td class="table_cell">飞机相关</td><td class="table_cell">28</td></tr>
<tr><td class="table_cell">房地产</td><td class="table_cell">建筑</td><td class="table_cell">29</td></tr>
<tr><td class="table_cell">房地产</td><td class="table_cell">物业</td><td class="table_cell">30</td></tr>
<tr><td class="table_cell">消费品</td><td class="table_cell">消费品</td><td class="table_cell">31</td></tr>
<tr><td class="table_cell">商业服务</td><td class="table_cell">法律</td><td class="table_cell">32</td></tr>
<tr><td class="table_cell">商业服务</td><td class="table_cell">会展</td><td class="table_cell">33</td></tr>
<tr><td class="table_cell">商业服务</td><td class="table_cell">中介服务</td><td class="table_cell">34</td></tr>
<tr><td class="table_cell">商业服务</td><td class="table_cell">认证</td><td class="table_cell">35</td></tr>
<tr><td class="table_cell">商业服务</td><td class="table_cell">审计</td><td class="table_cell">36</td></tr>
<tr><td class="table_cell">文体娱乐</td><td class="table_cell">传媒</td><td class="table_cell">37</td></tr>
<tr><td class="table_cell">文体娱乐</td><td class="table_cell">体育</td><td class="table_cell">38</td></tr>
<tr><td class="table_cell">文体娱乐</td><td class="table_cell">娱乐休闲</td><td class="table_cell">39</td></tr>
<tr><td class="table_cell">印刷</td><td class="table_cell">印刷</td><td class="table_cell">40</td></tr>
<tr><td class="table_cell">其它</td><td class="table_cell">其它</td><td class="table_cell">41</td></tr>
</tbody>
</table>
<h2><span id=".E8.8E.B7.E5.8F.96.E8.AE.BE.E7.BD.AE.E7.9A.84.E8.A1.8C.E4.B8.9A.E4.BF.A1.E6.81.AF"></span></h2>
<p><a name="2"></a></p>
<h2><span id=".E8.8E.B7.E5.8F.96.E8.AE.BE.E7.BD.AE.E7.9A.84.E8.A1.8C.E4.B8.9A.E4.BF.A1.E6.81.AF">获取设置的行业信息</span>
<br></h2>
<p>获取帐号设置的行业信息。可在MP官网中查看行业信息，为方便第三方开发者，提供通过接口调用的方式来获取帐号所设置的行业信息，具体如下:</p>
<p><strong>接口调用请求说明</strong></p>
<pre>http请求方式：GET
https://api.weixin.qq.com/cgi-bin/template/get_industry?access_token=ACCESS_TOKEN</pre>
<p><strong>参数说明</strong></p>
<table cellspacing="0" cellpadding="4" align="center" width="640px">
<tbody>
<tr class="firstRow thead"><th class="table_cell">参数</th><th class="table_cell">是否必须</th><th class="table_cell">说明</th></tr>
<tr><td class="table_cell">access_token</td><td class="table_cell">是</td><td class="table_cell">接口调用凭证</td></tr>
</tbody>
</table>
<p><strong>返回说明</strong></p>
<p>正确调用后的返回示例：</p>
<pre>{
"primary_industry":{"first_class":"运输与仓储","second_class":"快递"},
"secondary_industry":{"first_class":"IT科技","second_class":"互联网|电子商务"}
}</pre>
<p>返回参数说明</p>
<table cellspacing="0" cellpadding="4" align="center" width="640px">
<tbody>
<tr class="firstRow thead"><th class="table_cell">参数</th><th class="table_cell">是否必填</th><th class="table_cell">说明</th></tr>
<tr><td class="table_cell">access_token</td><td class="table_cell">是</td><td class="table_cell">接口调用凭证</td></tr>
<tr><td class="table_cell">primary_industry</td><td class="table_cell">是</td><td class="table_cell">帐号设置的主营行业</td></tr>
<tr><td class="table_cell">secondary_industry</td><td class="table_cell">是</td><td class="table_cell">帐号设置的副营行业</td></tr>
</tbody>
</table>
<h2><span id=".E8.8E.B7.E5.BE.97.E6.A8.A1.E6.9D.BFID"></span></h2>
<p><a name="3"></a></p>
<h2><span id=".E8.8E.B7.E5.BE.97.E6.A8.A1.E6.9D.BFID">获得模板ID</span>
<br></h2>
<p>从行业模板库选择模板到帐号后台，获得模板ID的过程可在MP中完成。为方便第三方开发者，提供通过接口调用的方式来获取模板ID，具体如下：</p>
<p><strong>接口调用请求说明</strong></p>
<pre>http请求方式:&nbsp;POST
https://api.weixin.qq.com/cgi-bin/template/api_add_template?access_token=ACCESS_TOKEN</pre>
<p><strong>POST数据说明</strong></p>
<p>POST数据示例如下：</p>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"template_id_short":"TM00015"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</pre>
<p>参数说明</p>
<table cellspacing="0" cellpadding="4" align="center" width="640px">
<tbody>
<tr class="firstRow thead"><th class="table_cell">参数</th><th class="table_cell">是否必须</th><th class="table_cell">说明</th></tr>
<tr><td class="table_cell">access_token</td><td class="table_cell">是</td><td class="table_cell">接口调用凭证</td></tr>
<tr><td class="table_cell">template_id_short</td><td class="table_cell">是</td><td class="table_cell">模板库中模板的编号，有“TM**”和“OPENTMTM**”等形式</td></tr>
</tbody>
</table>
<p><strong>返回码说明</strong></p>
<p>在调用模板消息接口后，会返回JSON数据包。正常时的返回JSON数据包示例：</p>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"errcode":0,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"errmsg":"ok",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"template_id":"Doclyl5uP7Aciu-qZ7mJNPtWkbkYnWBWVja26EGbNyk"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</pre>
<h2><span id=".E8.8E.B7.E5.8F.96.E6.A8.A1.E6.9D.BF.E5.88.97.E8.A1.A8"></span></h2>
<p><a name="4"></a></p>
<h2><span id=".E8.8E.B7.E5.8F.96.E6.A8.A1.E6.9D.BF.E5.88.97.E8.A1.A8">获取模板列表</span>
<br></h2>
<p>获取已添加至帐号下所有模板列表，可在MP中查看模板列表信息，为方便第三方开发者，提供通过接口调用的方式来获取帐号下所有模板信息，具体如下:</p>
<p><strong>接口调用请求说明</strong></p>
<pre>http请求方式：GET
https://api.weixin.qq.com/cgi-bin/template/get_all_private_template?access_token=ACCESS_TOKEN</pre>
<p><strong>参数说明</strong></p>
<table cellspacing="0" cellpadding="4" align="center" width="640px">
<tbody>
<tr class="firstRow thead"><th class="table_cell">参数</th><th class="table_cell">是否必须</th><th class="table_cell">说明</th></tr>
<tr><td class="table_cell">access_token</td><td class="table_cell">是</td><td class="table_cell">接口调用凭证</td></tr>
</tbody>
</table>
<p><strong>返回说明</strong></p>
<p>正确调用后的返回示例：</p>
<pre>{	
&nbsp;"template_list":&nbsp;[{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"template_id":&nbsp;"iPk5sOIt5X_flOVKn5GrTFpncEYTojx6ddbt8WYoV5s",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"title":&nbsp;"领取奖金提醒",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"primary_industry":&nbsp;"IT科技",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"deputy_industry":&nbsp;"互联网|电子商务",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"content":&nbsp;"{&nbsp;{result.DATA}&nbsp;}\n\n领奖金额:{&nbsp;{withdrawMoney.DATA}&nbsp;}\n领奖&nbsp;&nbsp;时间:{&nbsp;{withdrawTime.DATA}&nbsp;}\n银行信息:{&nbsp;{cardInfo.DATA}&nbsp;}\n到账时间:&nbsp;&nbsp;{&nbsp;{arrivedTime.DATA}&nbsp;}\n{&nbsp;{remark.DATA}&nbsp;}",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"example":&nbsp;"您已提交领奖申请\n\n领奖金额：xxxx元\n领奖时间：2013-10-10&nbsp;12:22:22\n银行信息：xx银行(尾号xxxx)\n到账时间：预计xxxxxxx\n\n预计将于xxxx到达您的银行卡"
&nbsp;&nbsp;&nbsp;}]
}</pre>
<p>返回参数说明</p>
<table cellspacing="0" cellpadding="4" align="center" width="640px">
<tbody>
<tr class="firstRow thead"><th class="table_cell">参数</th><th class="table_cell">是否必填</th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell">access_token</td><td class="table_cell">是</td><td class="table_cell">接口调用凭证</td></tr>
<tr><td class="table_cell">template_id</td><td class="table_cell">是</td><td class="table_cell">模板ID</td></tr>
<tr><td class="table_cell">title</td><td class="table_cell">是</td><td class="table_cell">模板标题</td></tr>
<tr><td class="table_cell">primary_industry</td><td class="table_cell">是</td><td class="table_cell">模板所属行业的一级行业</td></tr>
<tr><td class="table_cell">deputy_industry</td><td class="table_cell">是</td><td class="table_cell">模板所属行业的二级行业</td></tr>
<tr><td class="table_cell">content</td><td class="table_cell">是</td><td class="table_cell">模板内容</td></tr>
<tr><td class="table_cell">example</td><td class="table_cell">是</td><td class="table_cell">模板示例</td></tr>
</tbody>
</table>
<h2><span id=".E5.88.A0.E9.99.A4.E6.A8.A1.E6.9D.BF"></span></h2>
<p><a name="5"></a></p>
<h2><span id=".E5.88.A0.E9.99.A4.E6.A8.A1.E6.9D.BF">删除模板</span>
<br></h2>
<p>删除模板可在MP中完成，为方便第三方开发者，提供通过接口调用的方式来删除某帐号下的模板，具体如下：</p>
<p><strong>接口调用请求说明</strong></p>
<pre>http请求方式：POST
https://api.weixin.qq.com/cgi-bin/template/del_private_template?access_token=ACCESS_TOKEN</pre>
<p>POST数据说明如下：</p>
<pre>&nbsp;{
&nbsp;“template_id”=”Dyvp3-Ff0cnail_CDSzk1fIc6-9lOkxsQE7exTJbwUE”
&nbsp;}</pre>
<p><strong>参数说明</strong></p>
<table cellspacing="0" cellpadding="4" align="center" width="640px">
<tbody>
<tr class="firstRow thead"><th class="table_cell">参数</th><th class="table_cell">是否必须</th><th class="table_cell">说明</th></tr>
<tr><td class="table_cell">access_token</td><td class="table_cell">是</td><td class="table_cell">接口调用凭证</td></tr>
<tr><td class="table_cell">template_id</td><td class="table_cell">是</td><td class="table_cell">公众帐号下模板消息ID</td></tr>
</tbody>
</table>
<p><strong>返回说明</strong></p>
<p>在调用接口后，会返回JSON数据包。正常时的返回JSON数据包示例：</p>
<pre>{
&nbsp;"errcode":0,"errmsg":"ok"
}</pre>
<h2><span id=".E5.8F.91.E9.80.81.E6.A8.A1.E6.9D.BF.E6.B6.88.E6.81.AF"></span></h2>
<p><a name="6"></a></p>
<h2><span id=".E5.8F.91.E9.80.81.E6.A8.A1.E6.9D.BF.E6.B6.88.E6.81.AF">发送模板消息</span>
<br></h2>
<p><strong>接口调用请求说明</strong></p>
<pre>http请求方式:&nbsp;POST
https://api.weixin.qq.com/cgi-bin/message/template/send?access_token=ACCESS_TOKEN</pre>
<p><strong>POST数据说明</strong></p>
<p>POST数据示例如下：</p>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"touser":"OPENID",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"template_id":"ngqIpbwh8bUfcSsECmogfXcV14J0tQlEpBO27izEYtY",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"url":"http://weixin.qq.com/download",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"data":{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"first":&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"value":"恭喜你购买成功！",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"color":"#173177"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"keynote1":{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"value":"巧克力",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"color":"#173177"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"keynote2":&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"value":"39.8元",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"color":"#173177"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"keynote3":&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"value":"2014年9月22日",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"color":"#173177"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"remark":{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"value":"欢迎再次购买！",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"color":"#173177"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</pre>
<p>参数说明</p>
<table cellspacing="0" cellpadding="4" align="center" width="640px">
<tbody>
<tr class="firstRow thead"><th class="table_cell">参数</th><th class="table_cell">是否必填</th><th class="table_cell">说明</th></tr>
<tr><td class="table_cell">touser</td><td class="table_cell">是</td><td class="table_cell">接收者openid</td></tr>
<tr><td class="table_cell">template_id</td><td class="table_cell">是</td><td class="table_cell">模板ID</td></tr>
<tr><td class="table_cell">url</td><td class="table_cell">否</td><td class="table_cell">模板跳转链接</td></tr>
<tr><td class="table_cell">data</td><td class="table_cell">是</td><td class="table_cell">模板数据</td></tr>
</tbody>
</table>
<p>
<br><strong>返回码说明</strong>
<br></p>
<p>在调用模板消息接口后，会返回JSON数据包。正常时的返回JSON数据包示例：</p>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"errcode":0,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"errmsg":"ok",
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"msgid":200228332
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</pre>
<p><strong>使用效果</strong></p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/PiajxSqBRaEIQxibpLbyuSK39dMUJfWKTTHvrUJ6ooVxxf1qCWnNFyhLcMFyKcOXHf2zeRFrIwHXqzB1o0m8RAlQ/0?wx_fmt=jpeg" title="" alt="" width="373" height="709"></p>
<h2><span id=".E4.BA.8B.E4.BB.B6.E6.8E.A8.E9.80.81"></span></h2>
<p><a name="7"></a></p>
<h2><span id=".E4.BA.8B.E4.BB.B6.E6.8E.A8.E9.80.81">事件推送</span>
<br></h2>
<p>在模版消息发送任务完成后，微信服务器会将是否送达成功作为通知，发送到开发者中心中填写的服务器配置地址中。</p>
<p>1、送达成功时，推送的XML如下：</p>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xml&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ToUserName&gt;&lt;![CDATA[gh_7f083739789a]]&gt;&lt;/ToUserName&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FromUserName&gt;&lt;![CDATA[oia2TjuEGTNoeX76QEjQNrcURxG8]]&gt;&lt;/FromUserName&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;CreateTime&gt;1395658920&lt;/CreateTime&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;MsgType&gt;&lt;![CDATA[event]]&gt;&lt;/MsgType&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Event&gt;&lt;![CDATA[TEMPLATESENDJOBFINISH]]&gt;&lt;/Event&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;MsgID&gt;200163836&lt;/MsgID&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Status&gt;&lt;![CDATA[success]]&gt;&lt;/Status&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xml&gt;</pre>
<p>参数说明</p>
<table cellspacing="0" cellpadding="4" align="center" width="640px">
<tbody>
<tr class="firstRow thead"><th class="table_cell">参数</th><th class="table_cell">说明</th></tr>
<tr><td class="table_cell">ToUserName</td><td class="table_cell">公众号微信号</td></tr>
<tr><td class="table_cell">FromUserName</td><td class="table_cell">接收模板消息的用户的openid</td></tr>
<tr><td class="table_cell">CreateTime</td><td class="table_cell">创建时间</td></tr>
<tr><td class="table_cell">MsgType</td><td class="table_cell">消息类型是事件</td></tr>
<tr><td class="table_cell">Event</td><td class="table_cell">事件为模板消息发送结束</td></tr>
<tr><td class="table_cell">MsgID</td><td class="table_cell">消息id</td></tr>
<tr><td class="table_cell">Status</td><td class="table_cell">发送状态为成功</td></tr>
</tbody>
</table>
<p>2、送达由于用户拒收（用户设置拒绝接收公众号消息）而失败时，推送的XML如下：</p>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xml&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ToUserName&gt;&lt;![CDATA[gh_7f083739789a]]&gt;&lt;/ToUserName&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FromUserName&gt;&lt;![CDATA[oia2TjuEGTNoeX76QEjQNrcURxG8]]&gt;&lt;/FromUserName&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;CreateTime&gt;1395658984&lt;/CreateTime&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;MsgType&gt;&lt;![CDATA[event]]&gt;&lt;/MsgType&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Event&gt;&lt;![CDATA[TEMPLATESENDJOBFINISH]]&gt;&lt;/Event&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;MsgID&gt;200163840&lt;/MsgID&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Status&gt;&lt;![CDATA[failed:user&nbsp;block]]&gt;&lt;/Status&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xml&gt;</pre>
<p>参数说明</p>
<table cellspacing="0" cellpadding="4" align="center" width="640px">
<tbody>
<tr class="firstRow thead"><th class="table_cell">参数</th><th class="table_cell">说明</th></tr>
<tr><td class="table_cell">ToUserName</td><td class="table_cell">公众号微信号</td></tr>
<tr><td class="table_cell">FromUserName</td><td class="table_cell">接收模板消息的用户的openid</td></tr>
<tr><td class="table_cell">CreateTime</td><td class="table_cell">创建时间</td></tr>
<tr><td class="table_cell">MsgType</td><td class="table_cell">消息类型是事件</td></tr>
<tr><td class="table_cell">Event</td><td class="table_cell">事件为模板消息发送结束</td></tr>
<tr><td class="table_cell">MsgID</td><td class="table_cell">消息id</td></tr>
<tr><td class="table_cell">Status</td><td class="table_cell">发送状态为用户拒绝接收</td></tr>
</tbody>
</table>
<p>3、送达由于其他原因失败时，推送的XML如下：</p>
<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xml&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ToUserName&gt;&lt;![CDATA[gh_7f083739789a]]&gt;&lt;/ToUserName&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FromUserName&gt;&lt;![CDATA[oia2TjuEGTNoeX76QEjQNrcURxG8]]&gt;&lt;/FromUserName&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;CreateTime&gt;1395658984&lt;/CreateTime&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;MsgType&gt;&lt;![CDATA[event]]&gt;&lt;/MsgType&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Event&gt;&lt;![CDATA[TEMPLATESENDJOBFINISH]]&gt;&lt;/Event&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;MsgID&gt;200163840&lt;/MsgID&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Status&gt;&lt;![CDATA[failed:&nbsp;system&nbsp;failed]]&gt;&lt;/Status&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xml&gt;</pre>
<p>参数说明</p>
<table cellspacing="0" cellpadding="4" align="center" width="640px">
<tbody>
<tr class="firstRow thead"><th class="table_cell">参数</th><th class="table_cell">说明</th></tr>
<tr><td class="table_cell">ToUserName</td><td class="table_cell">公众号微信号</td></tr>
<tr><td class="table_cell">FromUserName</td><td class="table_cell">接收模板消息的用户的openid</td></tr>
<tr><td class="table_cell">CreateTime</td><td class="table_cell">创建时间</td></tr>
<tr><td class="table_cell">MsgType</td><td class="table_cell">消息类型是事件</td></tr>
<tr><td class="table_cell">Event</td><td class="table_cell">事件为模板消息发送结束</td></tr>
<tr><td class="table_cell">MsgID</td><td class="table_cell">消息id</td></tr>
<tr><td class="table_cell">Status</td><td class="table_cell">发送状态为发送失败（非用户拒绝）</td></tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</body>
</html>