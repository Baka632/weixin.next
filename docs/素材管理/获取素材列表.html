
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link onerror="wx_loaderror(this)" onerror="wx_loaderror(this)" rel="stylesheet" type="text/css" href="https://res.wx.qq.com/mpres/htmledition/style/page/resource/res_iframe2f613f.css"/></head>
<body class="page_doc">
<div class="main_hd"><h2>获取素材列表</h2>
</div>
<div class="main_bd">
<div class="article_box">
<div class="inner">
<div class="news_content">
<p><span style="font-size: 14px; font-family: 微软雅黑, 'Microsoft YaHei';"></span>在新增了永久素材后，开发者可以分类型获取永久素材的列表。</p>
<p>请注意：</p>
<p>1、获取永久素材的列表，也包含公众号在公众平台官网素材管理模块中新建的图文消息、语音、视频等素材<br>2、临时素材无法通过本接口获取<br>3、调用该接口需https协议
<br></p>
<p>接口调用请求说明</p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p>http请求方式: POST</p>
<p>https://api.weixin.qq.com/cgi-bin/material/batchget_material?access_token=ACCESS_TOKEN
<br></p>
</div>
<p>调用示例</p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p>{<br> &nbsp; &nbsp;"type":TYPE,<br> &nbsp; &nbsp;"offset":OFFSET,<br> &nbsp; &nbsp;"count":COUNT<br>}
<br></p>
</div>
<p>参数说明</p>
<table class="table" width="951">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="217" valign="top" style="word-break: break-all;">参数</td><td class="table_cell" width="217" valign="top" style="word-break: break-all;">是否必须</td><td class="table_cell" width="217" valign="top" style="word-break: break-all;">说明</td></tr>
<tr><td class="table_cell" width="217" valign="top" style="word-break: break-all;">type</td><td class="table_cell" width="217" valign="top" style="word-break: break-all;">是</td><td class="table_cell" width="217" valign="top" style="word-break: break-all;">素材的类型，图片（image）、视频（video）、语音 （voice）、图文（news）</td></tr>
<tr><td class="table_cell" width="217" valign="top" style="word-break: break-all;">offset</td><td class="table_cell" width="217" valign="top" style="word-break: break-all;">是</td><td class="table_cell" width="217" valign="top" style="word-break: break-all;">从全部素材的该偏移位置开始返回，0表示从第一个素材 返回</td></tr>
<tr><td class="table_cell" width="217" valign="top" style="word-break: break-all;">count</td><td class="table_cell" width="217" valign="top" style="word-break: break-all;">是</td><td class="table_cell" width="217" valign="top" style="word-break: break-all;">返回素材的数量，取值在1到20之间</td></tr>
</tbody>
</table>
<p>返回说明</p>
<p>永久图文消息素材列表的响应如下：</p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);">{<br> &nbsp; "total_count": TOTAL_COUNT,<br> &nbsp; "item_count": ITEM_COUNT,<br> &nbsp; "item": [{<br> &nbsp; &nbsp; &nbsp; "media_id": MEDIA_ID,<br> &nbsp; &nbsp; &nbsp; "content": {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "news_item": [{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "title": TITLE,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "thumb_media_id": THUMB_MEDIA_ID,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "show_cover_pic": SHOW_COVER_PIC(0 / 1),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "author": AUTHOR,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "digest": DIGEST,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "content": CONTENT,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "url": URL,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "content_source_url": CONTETN_SOURCE_URL<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //多图文消息会在此处有多篇文章<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]<br> &nbsp; &nbsp; &nbsp; &nbsp;},<br> &nbsp; &nbsp; &nbsp; &nbsp;"update_time": UPDATE_TIME<br> &nbsp; &nbsp;},<br> &nbsp; &nbsp;//可能有多个图文消息item结构<br> &nbsp;]<br>}</div>
<p>其他类型（图片、语音、视频）的返回如下：
<br></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);">{<br> &nbsp; "total_count": TOTAL_COUNT,<br> &nbsp; "item_count": ITEM_COUNT,<br> &nbsp; "item": [{<br> &nbsp; &nbsp; &nbsp; "media_id": MEDIA_ID,<br> &nbsp; &nbsp; &nbsp; "name": NAME,<br> &nbsp; &nbsp; &nbsp; "update_time": UPDATE_TIME,<br> &nbsp; &nbsp; &nbsp; "url":URL<br> &nbsp; },<br> &nbsp; //可能会有多个素材<br> &nbsp; ]<br>}</div>
<p style="white-space: normal;">返回参数说明</p>
<table class="table" width="951">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="325" valign="top" style="word-break: break-all;">参数</td><td class="table_cell" width="325" valign="top" style="word-break: break-all;">描述</td></tr>
<tr><td class="table_cell" width="325" valign="top" style="word-break: break-all;">total_count</td><td class="table_cell" width="325" valign="top" style="word-break: break-all;">该类型的素材的总数</td></tr>
<tr><td class="table_cell" width="325" valign="top" style="word-break: break-all;">item_count</td><td class="table_cell" width="325" valign="top" style="word-break: break-all;">本次调用获取的素材的数量</td></tr>
<tr><td class="table_cell" width="325" valign="top" style="word-break: break-all;">title</td><td class="table_cell" width="325" valign="top" style="word-break: break-all;">图文消息的标题</td></tr>
<tr><td class="table_cell" width="325" valign="top" style="word-break: break-all;">thumb_media_id</td><td class="table_cell" width="325" valign="top" style="word-break: break-all;">图文消息的封面图片素材id（必须是永久mediaID）</td></tr>
<tr><td class="table_cell" width="325" valign="top" style="word-break: break-all;">show_cover_pic</td><td class="table_cell" width="325" valign="top" style="word-break: break-all;">是否显示封面，0为false，即不显示，1为true，即显示</td></tr>
<tr><td class="table_cell" width="325" valign="top" style="word-break: break-all;">author</td><td class="table_cell" width="325" valign="top" style="word-break: break-all;">作者</td></tr>
<tr><td class="table_cell" width="325" valign="top" style="word-break: break-all;">digest</td><td class="table_cell" width="325" valign="top" style="word-break: break-all;">图文消息的摘要，仅有单图文消息才有摘要，多图文此处为空</td></tr>
<tr><td class="table_cell" width="325" valign="top" style="word-break: break-all;">content</td><td class="table_cell" width="325" valign="top" style="word-break: break-all;">图文消息的具体内容，支持HTML标签，必须少于2万字符，小于1M，且此处会去除JS</td></tr>
<tr><td class="table_cell" valign="top" colspan="1" rowspan="1" style="word-break: break-all;" width="325">url</td><td class="table_cell" valign="top" colspan="1" rowspan="1" style="word-break: break-all;" width="325">图文页的URL，或者，当获取的列表是图片素材列表时，该字段是图片的URL</td></tr>
<tr><td class="table_cell" valign="top" colspan="1" rowspan="1" style="word-break: break-all;" width="325">content_source_url</td><td class="table_cell" valign="top" colspan="1" rowspan="1" style="word-break: break-all;" width="325">图文消息的原文地址，即点击“阅读原文”后的URL</td></tr>
<tr><td class="table_cell" valign="top" colspan="1" rowspan="1" style="word-break: break-all;" width="325">update_time<span class="Apple-tab-span" style="white-space: pre;"></span></td><td class="table_cell" valign="top" colspan="1" rowspan="1" style="word-break: break-all;" width="325">这篇图文消息素材的最后更新时间</td></tr>
<tr><td class="table_cell" width="325" valign="top" style="word-break: break-all;">name</td><td class="table_cell" width="325" valign="top" style="word-break: break-all;">文件名称</td></tr>
</tbody>
</table>
<p>错误情况下的返回JSON数据包示例如下（示例为无效媒体类型错误）：
<br></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);">{"errcode":40007,"errmsg":"invalid media_id"}</div>
<p>
<br></p>
<p>
<br></p>
</div>
</div>
</div>
</div>
</body>
</html>