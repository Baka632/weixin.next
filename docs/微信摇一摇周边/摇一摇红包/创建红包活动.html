
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link onerror="wx_loaderror(this)" onerror="wx_loaderror(this)" rel="stylesheet" type="text/css" href="https://res.wx.qq.com/mpres/htmledition/style/page/resource/res_iframe2f613f.css"/></head>
<body class="page_doc">
<div class="main_hd"><h2>创建红包活动</h2>
</div>
<div class="main_bd">
<div class="article_box">
<div class="inner">
<div class="news_content">
<p><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;"><strong>接口说明</strong>
<br></span></p>
<p style="white-space: normal;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">创建红包活动，设置红包活动有效期，红包活动开关等基本信息，返回活动id</span></p>
<p style="white-space: normal;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;"><strong>接口调用说明</strong></span></p>
<div data-tag="backcolor" style="white-space: normal; margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);">
<p><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">服务器端调用<br>http请求方式: POST<br>URL: https://api.weixin.qq.com/shakearound/lottery/addlotteryinfo?access_token=ACCESSTOKEN&amp;use_template=1&amp;logo_url=LOGO_URL
<br></span></p>
</div>
<p style="white-space: normal;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;"><strong>请求参数说明</strong></span></p>
<table class="table" width="951">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="221" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">参数</span></td><td class="table_cell" width="208" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">类型</span></td><td class="table_cell" width="222" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">说明</span></td></tr>
<tr><td class="table_cell" width="221"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">access_token</span></td><td class="table_cell" width="208"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string</span></td><td class="table_cell" width="222"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">accesstoken,以参数的形式拼装在url后</span></td></tr>
<tr><td class="table_cell" width="221"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">use_template</span></td><td class="table_cell" width="208"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">int</span></td><td class="table_cell" width="222"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">是否使用模板，1：使用，2：不使用,以参数的形式拼装在url后。（模版即交互流程图中的红包加载页，使用模板用户不需要点击可自动打开红包；不使用模版需自行开发HTML5页面，并在页面调用红包jsapi）</span></td></tr>
<tr><td class="table_cell" width="221"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">logo_url</span></td><td class="table_cell" width="208"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string</span></td><td class="table_cell" width="222" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">使用模板页面的logo_url，不使用模板时可不加。展示在摇一摇界面的消息图标。图片尺寸为120x120。 &nbsp;&nbsp;</span></td></tr>
</tbody>
</table>
<p style="white-space: normal;">
<br></p>
<p style="white-space: normal;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">POST BODY：JSON格式的结构体</span></p>
<table class="table" width="951">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="219" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">参数</span></td><td class="table_cell" width="204" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">类型</span></td><td class="table_cell" width="227" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">说明</span></td></tr>
<tr><td class="table_cell" width="219"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">title</span></td><td class="table_cell" width="204"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string</span></td><td class="table_cell" width="227"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">抽奖活动名称（选择使用模板时，也作为摇一摇消息主标题），最长6个汉字，12个英文字母。</span></td></tr>
<tr><td class="table_cell" width="219"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">desc</span></td><td class="table_cell" width="204"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string</span></td><td class="table_cell" width="227"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">抽奖活动描述（选择使用模板时，也作为摇一摇消息副标题），最长7个汉字，14个英文字母。</span></td></tr>
<tr><td class="table_cell" width="219"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">onoff</span></td><td class="table_cell" width="204"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">int</span></td><td class="table_cell" width="227"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">抽奖开关。0关闭，1开启，默认为1</span></td></tr>
<tr><td class="table_cell" width="219"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">begin_time</span></td><td class="table_cell" width="204"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">long</span></td><td class="table_cell" width="227"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">抽奖活动开始时间，unix时间戳，单位秒</span></td></tr>
<tr><td class="table_cell" width="219"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">expire_time</span></td><td class="table_cell" width="204"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">long</span></td><td class="table_cell" width="227"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">抽奖活动结束时间，unix时间戳，单位秒,红包活动有效期最长为91天</span></td></tr>
<tr><td class="table_cell" width="219"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">sponsor_appid</span></td><td class="table_cell" width="204"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string</span></td><td class="table_cell" width="227"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">红包提供商户公众号的appid，需与预下单中的公众账号appid（wxappid）一致</span></td></tr>
<tr><td class="table_cell" width="219"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">total</span></td><td class="table_cell" width="204"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">long</span></td><td class="table_cell" width="227"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">红包总数，红包总数是录入红包ticket总数的上限，因此红包总数应该大于等于预下单时红包ticket总数。</span></td></tr>
<tr><td class="table_cell" width="219"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">jump_url</span></td><td class="table_cell" width="204"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string</span></td><td class="table_cell" width="227"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">红包关注界面后可以跳转到第三方自定义的页面</span></td></tr>
<tr><td class="table_cell" width="219"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">key</span></td><td class="table_cell" width="204"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string</span></td><td class="table_cell" width="227" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">开发者自定义的key，用来生成活动抽奖接口的签名参数，长度32位。使用方式见sign生成规则</span></td></tr>
</tbody>
</table>
<p style="white-space: normal;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;"><strong>请求示例</strong></span></p>
<div data-tag="backcolor" style="white-space: normal; margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);">
<p><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">Content-Type: application/json Post Body:<br>{ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>"title": "title", &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br>"desc": "desc", &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br>"onoff": 1, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>"begin_time": 1428854400, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>"expire_time": 1428940800, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>"sponsor_appid": "wxxxxxxxxxxxxxx",<br>"total": 10,<br>"jump_url": JUMP_URL, &nbsp; &nbsp;&nbsp;<br>"key": "keyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy" &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>}
<br></span></p>
</div>
<p style="white-space: normal;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;"><strong>返回数据说明</strong></span></p>
<table class="table">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">参数</span></td><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">类型</span></td><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">说明</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">errcode</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">int</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">错误码。0为成功，其他为失败。详细请参考错误码表</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">errmsg</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">错误信息</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">lottery_id</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">生成的红包活动id</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">page_id</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">int</span></td><td class="table_cell" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">生成的模板页面ID &nbsp;</span></td></tr>
</tbody>
</table>
<p style="white-space: normal;">
<br></p>
<p style="white-space: normal;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;"><strong>示例</strong></span></p>
<div data-tag="backcolor" style="white-space: normal; margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);">
<p><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">{ &nbsp; &nbsp;&nbsp;<br>"errcode":0, &nbsp; &nbsp;&nbsp;<br>"errmsg":"", &nbsp; &nbsp;&nbsp;<br>"lottery_id":"xxxxxxllllll",&nbsp;<br>"page_id":1,&nbsp;<br>}
<br></span></p>
</div>
<p style="white-space: normal;">
<br></p>
</div>
</div>
</div>
</div>
</body>
</html>