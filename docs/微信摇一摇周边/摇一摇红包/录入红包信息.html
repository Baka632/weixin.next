
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link onerror="wx_loaderror(this)" onerror="wx_loaderror(this)" rel="stylesheet" type="text/css" href="https://res.wx.qq.com/mpres/htmledition/style/page/resource/res_iframe2f613f.css"/></head>
<body class="page_doc">
<div class="main_hd"><h2>录入红包信息</h2>
</div>
<div class="main_bd">
<div class="article_box">
<div class="inner">
<div class="news_content">
<p><strong style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">接口说明</strong>
<br></p>
<p style="white-space: normal;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">在调用"创建红包活动"接口之后，调用此接口录入红包信息。注意，此接口每次调用，都会向某个活动新增一批红包信息，如果红包数少于100个，请通过一次调用添加所有红包信息。如果红包数大于100，可以多次调用接口添加。请注意确保多次录入的红包ticket总的数目不大于创建该红包活动时设置的total值。</span></p>
<p style="white-space: normal;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;"><strong>接口调用说明</strong></span></p>
<div data-tag="backcolor" style="white-space: normal; margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);">
<p><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">服务器端调用<br>http请求方式: POST<br>URL:https://api.weixin.qq.com/shakearound/lottery/setprizebucket?access_token=ACCESSTOKEN
<br></span></p>
</div>
<p style="white-space: normal;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;"><strong>请求参数说明</strong></span></p>
<table class="table">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">参数</span></td><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">类型</span></td><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">说明</span></td></tr>
<tr><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">access_token</span></td><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string&nbsp;</span></td><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">accesstoken,以参数的形式拼装在url后 &nbsp; &nbsp; &nbsp; &nbsp;</span></td></tr>
</tbody>
</table>
<p style="white-space: normal;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">POST BODY：JSON格式的结构体</span></p>
<table class="table">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">参数</span></td><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">类型</span></td><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">说明</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">lottery_id</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">红包抽奖id，来自addlotteryinfo返回的lottery_id</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">mchid</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">红包提供者的商户号，，需与预下单中的商户号mch_id一致</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">sponsor_appid</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">红包提供商户公众号的appid，需与预下单中的公众账号appid（wxappid）一致</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">prize_info_list</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">json数组</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">红包ticket列表，如果红包数较多，可以一次传入多个红包，批量调用该接口设置红包信息。每次请求传入的红包个数上限为100</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">ticket</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string</span></td><td class="table_cell" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">预下单时返回的红包ticket，单个活动红包ticket数量上限为100000个，可添加多次。 &nbsp; &nbsp;</span></td></tr>
</tbody>
</table>
<p style="white-space: normal;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;"><strong>请求示例</strong></span></p>
<div data-tag="backcolor" style="white-space: normal; margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);">
<p><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">Content-Type: application/json Post Body:<br>{ &nbsp; &nbsp;&nbsp;<br>"lottery_id": "xxxxxxllllll", &nbsp; &nbsp;&nbsp;<br>"mchid": "10000098", &nbsp; &nbsp;&nbsp;<br>"sponsor_appid": "wx8888888888888888", &nbsp;&nbsp;<br>"prize_info_list": [ &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br>&nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>&nbsp; "ticket": "v1|ZiPs2l0hpMBp3uwGI1rwp45vOdz/V/zQ/00jP9MeWT+e47/q1FJjwCIP34frSjzOxAEzJ7k2CtAg1pmcShvkChBWqbThxPm6MBuzceoHtj79iHuHaEn0WAO+j4sXnXnbGswFOlDYWg1ngvrRYnCY3g=="<br>&nbsp; &nbsp; },<br>&nbsp; &nbsp; {<br>&nbsp; "ticket": "v1|fOhNUTap1oepSm5ap0hx1gmATM\/QX\/xn3sZWL7K+5Z10sbV5\/mZ4SwxwxbK2SPV32eLRvjd4ww1G3H5a+ypqRrySi+4oo97y63KoEQbRCPjbkyQBY8AYVyvD40V2b9slTQCm2igGY98mPe+VxZiayQ=="<br>&nbsp; &nbsp; }<br>&nbsp; ]<br>}
<br></span></p>
</div>
<p style="white-space: normal;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;"><strong>返回数据说明</strong></span></p>
<table class="table">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">参数</span></td><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">类型</span></td><td class="table_cell" width="451" valign="top" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">说明</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">errcode</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">int</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">错误码。0为成功，其他为失败。详细请参考错误码表</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">errmsg</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">string</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">错误信息</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">repeat_ticket_list</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">array</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">重复使用的ticket列表，如为空，将不返回</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">expire_ticket_list</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">array</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">过期的ticket列表，如为空，将不返回</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">invalid_amount_ticket_list</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">array</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">金额不在大于1元，小于1000元的ticket列表，如为空，将不返回</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">success_num</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">int</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">成功录入的红包数量</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">wrong_authmchid_ticket_list</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">array</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">原因：生成红包的时候，授权商户号auth_mchid和auth_appid没有写摇周边的商户号</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">invalid_ticket_list</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">array</span></td><td class="table_cell" style="word-break: break-all;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">ticket解析失败，可能有错别字符或不完整 &nbsp; &nbsp;</span></td></tr>
</tbody>
</table>
<p style="white-space: normal;">
<br></p>
<p style="white-space: normal;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;"><strong>示例</strong></span></p>
<div data-tag="backcolor" style="white-space: normal; margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);">
<p><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">{	&nbsp; &nbsp;&nbsp;<br>"errcode":0, &nbsp; &nbsp;&nbsp;<br>"errmsg":"", &nbsp; &nbsp;&nbsp;<br>"repeat_ticket_list":[ &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br>&nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>"ticket": "v1|ZiPs2l0hpMBp3uwGI1rwp45vOdz/V/zQ/00jP9MeWT+e47/q1FJjwCIP34frSjzOxAEzJ7k2CtAg1pmcShvkChBWqbThxPm6MBuzceoHtj79iHuHaEn0WAO+j4sXnXnbGswFOlDYWg1ngvrRYnCY3g==" &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br>&nbsp; &nbsp; },<br>&nbsp; &nbsp; {<br>"ticket":"v1|ZiPs2l0zzXCsdfwe45dxCdHiukOdz/V/zQ/89xcnC5XnT+e47/q1FJjwCO4frSjzOxAEzJ7k2CtAg1pmcShvkChBWzc45dDGC32Dcxx4DGxczjDCGsdjowe9iHuaEn0WAO+GswFOlDYWg1ngvrRYnCY3g==" &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp;	<br>&nbsp; &nbsp; }&nbsp;<br>&nbsp;],&nbsp;<br>"success_num":100&nbsp;<br>}</span></p>
<p><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 14px;">
<br></span></p>
</div>
<p><span style="font-size: 14px; font-family: 微软雅黑, 'Microsoft YaHei';"></span>
<br></p>
</div>
</div>
</div>
</div>
</body>
</html>