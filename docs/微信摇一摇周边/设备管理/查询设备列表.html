
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link onerror="wx_loaderror(this)" onerror="wx_loaderror(this)" rel="stylesheet" type="text/css" href="https://res.wx.qq.com/mpres/htmledition/style/page/resource/res_iframe2f613f.css"/></head>
<body class="page_doc">
<div class="main_hd"><h2>查询设备列表</h2>
</div>
<div class="main_bd">
<div class="article_box">
<div class="inner">
<div class="news_content">
<p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-family: 微软雅黑, 'Microsoft YaHei';"><strong><span style="font-size: 14px; font-family: 微软雅黑, 'Microsoft YaHei';"></span>接口说明</strong>&nbsp;</span></p>
<p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">查询已有的设备ID、UUID、Major、Minor、激活状态、备注信息、关联门店、关联页面等信息。可指定设备ID或完整的UUID、Major、Minor查询，也可批量拉取设备信息列表。查询所返回的设备列表按设备ID正序排序。</span></p>
<p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-family: 微软雅黑, 'Microsoft YaHei';"><strong>接口调用说明</strong></span></p>
<pre style="font-stretch: normal; font-size: 14px; font-family: 'MicroSoft YaHei', 'Courier New', 'Andale Mono', monospace; padding: 5px 10px; border: 1px solid rgb(204, 204, 204); color: rgb(51, 51, 51); line-height: 20px; white-space: pre-wrap; word-wrap: break-word; border-radius: 3px; margin-left: 10px;"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">http请求方式:&nbsp;POST（请使用https协议）https://api.weixin.qq.com/shakearound/device/search?access_token=ACCESS_TOKENPOST数据格式：json<br>POST数据例子：<br>查询指定设备时：<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;1,<br>&nbsp;&nbsp;&nbsp;&nbsp;"device_identifiers":[<br>&nbsp;		{<br>			"device_id":10100,	<br>			"uuid":"FDA50693-A4E2-4FB1-AFCF-C6EB07647825",		<br>			"major":10001,<br>			"minor":10002<br>		}<br>	]<br>}
<br><br>需要分页查询或者指定范围内的设备时：<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;2,<br>&nbsp;&nbsp;&nbsp;&nbsp;"last_seen":&nbsp;10097,		<br>&nbsp;&nbsp;&nbsp;&nbsp;"count":&nbsp;3<br>}
<br><br>当需要根据批次ID查询时：<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;3,<br>&nbsp;&nbsp;&nbsp;&nbsp;"apply_id":&nbsp;1231,<br>&nbsp;&nbsp;&nbsp;&nbsp;"last_seen":&nbsp;10097,		<br>&nbsp;&nbsp;&nbsp;&nbsp;"count":&nbsp;3<br>}
<br></span></pre>
<p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-family: 微软雅黑, 'Microsoft YaHei';"><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="4" align="center" width="640px">
<tbody>
<tr class="firstRow thead"><th style="width: 160px;" class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">参数</span></th><th style="width: 80px;" class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">是否必须</span></th><th class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">说明</span></th></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">access_token</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">是</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">type</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">是</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">查询类型。1：查询设备id列表中的设备；2：分页查询所有设备信息；3：分页查询某次申请的所有设备信息</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">device_identifiers</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">是</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">指定的设备 ； 当type为1时，此项为必填</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">device_id</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">是</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">设备编号，若填了UUID、major、minor，则可不填设备编号，若二者都填，则以设备编号为优先；查询指定设备时，单次查询的设备数量不能超过50个</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">UUID、major、minor</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">是</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">UUID、major、minor，三个信息需填写完整，若填了设备编号，则可不填此信息；查询指定设备时，单次查询的设备数量不能超过50个</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">apply_id</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">是</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">批次ID，申请设备ID时所返回的批次ID；当type为3时，此项为必填</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">last_seen</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">是</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">前一次查询列表末尾的设备ID ， 第一次查询last_seen 为0</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">count</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">是</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">待查询的设备数量，不能超过50个</span></td></tr>
</tbody>
</table>
<p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-family: 微软雅黑, 'Microsoft YaHei';"><strong>返回说明</strong>&nbsp;</span></p>
<p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">正常时的返回JSON数据包示例：</span></p>
<pre style="font-stretch: normal; font-size: 14px; font-family: 'MicroSoft YaHei', 'Courier New', 'Andale Mono', monospace; padding: 5px 10px; border: 1px solid rgb(204, 204, 204); color: rgb(51, 51, 51); line-height: 20px; white-space: pre-wrap; word-wrap: break-word; border-radius: 3px; margin-left: 10px;"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">{<br>&nbsp;&nbsp;&nbsp;&nbsp;"data":&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"devices":&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"comment":&nbsp;"",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"device_id":&nbsp;10097,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"major":&nbsp;10001,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"minor":&nbsp;12102,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"status":&nbsp;1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"last_active_time":1437276018,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"poi_id":&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"uuid":&nbsp;"FDA50693-A4E2-4FB1-AFCF-C6EB07647825"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"comment":&nbsp;"",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"device_id":&nbsp;10098,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"major":&nbsp;10001,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"minor":&nbsp;12103,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"status":&nbsp;1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"last_active_time":1437276018,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"poi_appid":"wxe3813f5d8c546fc7"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"poi_id":&nbsp;123,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"uuid":&nbsp;"FDA50693-A4E2-4FB1-AFCF-C6EB07647825"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"total_count":&nbsp;151<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;"errcode":&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;"errmsg":&nbsp;"success."<br>}
<br></span></pre>
<p style="line-height: 1.5; word-wrap: break-word; margin-left: 10px; margin-right: 10px; color: rgb(51, 51, 51); font-family: 'Microsoft Yahei', 宋体, Tahoma, Arial; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-family: 微软雅黑, 'Microsoft YaHei';"><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="4" align="center" width="640px">
<tbody>
<tr class="firstRow thead"><th style="width: 240px;" class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">参数</span></th><th class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">说明</span></th></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">devices</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">指定的设备信息列表</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">device_id</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">设备编号</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">UUID、major、minor</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">UUID、major、minor</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">status</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">激活状态，0：未激活，1：已激活</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">last_active_time</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">设备最近一次被摇到的日期（最早只能获取前一天的数据）；新申请的设备该字段值为0</span></td></tr>
<tr><td class="table_cell" colspan="1" rowspan="1"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">poi_appid</span></td><td class="table_cell" colspan="1" rowspan="1"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">若配置了设备与其他公众账号门店关联关系，则返回配置门店归属的公众账号appid。<a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1459246251" target="_blank" style="text-decoration: underline; font-family: 微软雅黑, 'Microsoft YaHei'; color: rgb(79, 129, 189);"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; color: rgb(79, 129, 189);">查看<span style="color: rgb(84, 141, 212); font-family: 微软雅黑, 'Microsoft YaHei';">配置设备与其他公众账号门店关联关系接口</span></span></a></span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">poi_id</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">设备关联的门店ID，关联门店后，在门店1KM的范围内有优先摇出信息的机会。门店相关信息具体可</span><a href="https://mp.weixin.qq.com/zh_CN/htmledition/comm_htmledition/res/store_manage/store_manage_file.zip" class="external text" rel="nofollow" target="_blank" style="text-decoration: underline; font-family: 微软雅黑, 'Microsoft YaHei'; color: rgb(79, 129, 189);"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; color: rgb(79, 129, 189);">查看门店相关的接口文档</span></a></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">comment</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">设备的备注信息</span></td></tr>
<tr><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">total_count</span></td><td class="table_cell"><span style="font-family: 微软雅黑, 'Microsoft YaHei';">商户名下的设备总量</span></td></tr>
</tbody>
</table>
<p>
<br></p>
</div>
</div>
</div>
</div>
</body>
</html>