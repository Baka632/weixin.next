
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link onerror="wx_loaderror(this)" onerror="wx_loaderror(this)" rel="stylesheet" type="text/css" href="https://res.wx.qq.com/mpres/htmledition/style/page/resource/res_iframe2f613f.css"/></head>
<body class="page_doc">
<div class="main_hd"><h2>获取设备及用户信息</h2>
</div>
<div class="main_bd">
<div class="article_box">
<div class="inner">
<div class="news_content">
<p><span><strong>接口说明</strong></span></p>
<p><span>获取设备信息，包括UUID、major、minor，以及距离、openID等信息。</span></p>
<p><span><strong>接口调用说明</strong></span></p>
<div data-tag="backcolor">
<p><span>http请求方式: POST（请使用https协议）https://api.weixin.qq.com/shakearound/user/getshakeinfo?access_token=ACCESS_TOKENPOST数据格式：json<br>POST数据例子：<br>{<br> &nbsp; &nbsp;"ticket":”6ab3d8465166598a5f4e8c1b44f44645”,<br> &nbsp; &nbsp;"need_poi":1<br>}
<br></span></p>
</div>
<p><span><strong>参数说明</strong></span></p>
<table class="table" width="951">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="217" valign="top"><span>参数</span></td><td class="table_cell" width="217" valign="top"><span>是否必须</span></td><td class="table_cell" width="217" valign="top"><span>说明</span></td></tr>
<tr><td class="table_cell" width="217"><span>access_token</span></td><td class="table_cell" width="217"><span>是</span></td><td class="table_cell" width="217"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell" width="217"><span>ticket</span></td><td class="table_cell" width="217"><span>是</span></td><td class="table_cell" width="217"><span>摇周边业务的ticket，可在摇到的URL中得到，ticket生效时间为30分钟，每一次摇都会重新生成新的ticket</span></td></tr>
<tr><td class="table_cell" width="217"><span>need_poi</span></td><td class="table_cell" width="217"><span>否</span></td><td class="table_cell" width="217"><span>是否需要返回门店poi_id，传1则返回，否则不返回；门店相关信息具体可</span><a href="https://mp.weixin.qq.com/zh_CN/htmledition/comm_htmledition/res/store_manage/store_manage_file.zip" class="external text" rel="nofollow" target="_blank"><span>查看门店相关的接口文档</span></a><span>&nbsp; &nbsp;</span></td></tr>
</tbody>
</table>
<p><span><strong>返回说明</strong>&nbsp;</span></p>
<p><span>正常时的返回JSON数据包示例：</span></p>
<div data-tag="backcolor">
<p><span>{<br> &nbsp; &nbsp;"data": {<br> &nbsp; &nbsp; &nbsp; &nbsp;"page_id ": 14211,<br> &nbsp; &nbsp; &nbsp; &nbsp;"beacon_info": {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"distance": 55.00620700469034,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"major": 10001,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"minor": 19007,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"uuid": "FDA50693-A4E2-4FB1-AFCF-C6EB07647825"<br> &nbsp; &nbsp; &nbsp; &nbsp;},<br> &nbsp; &nbsp; &nbsp; &nbsp;"openid": "oVDmXjp7y8aG2AlBuRpMZTb1-cmA",<br> &nbsp; &nbsp; &nbsp; &nbsp;" poi_id":1234<br> &nbsp; &nbsp;},<br> &nbsp; &nbsp;"errcode": 0,<br> &nbsp; &nbsp;"errmsg": "success."<br>}
<br></span></p>
</div>
<p><span><strong>参数说明</strong></span></p>
<table class="table" width="951">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="325" valign="top"><span>参数</span></td><td class="table_cell" width="325" valign="top"><span>说明</span></td></tr>
<tr><td class="table_cell" width="325"><span>beacon_info</span></td><td class="table_cell" width="325"><span>设备信息，包括UUID、major、minor，以及距离</span></td></tr>
<tr><td class="table_cell" width="325"><span>UUID、major、minor</span></td><td class="table_cell" width="325"><span>UUID、major、minor</span></td></tr>
<tr><td class="table_cell" width="325"><span>distance</span></td><td class="table_cell" width="325"><span>Beacon信号与手机的距离，单位为米</span></td></tr>
<tr><td class="table_cell" width="325"><span>page_id</span></td><td class="table_cell" width="325"><span>摇周边页面唯一ID</span></td></tr>
<tr><td class="table_cell" width="325"><span>openid</span></td><td class="table_cell" width="325"><span>商户AppID下用户的唯一标识</span></td></tr>
<tr><td class="table_cell" width="325"><span>poi_id</span></td><td class="table_cell" width="325"><span>门店ID，有的话则返回，反之不会在JSON格式内</span></td></tr>
</tbody>
</table>
<p>
<br></p>
<p><span>&nbsp; &nbsp;</span></p>
<p><span>
<br></span></p>
</div>
</div>
</div>
</div>
</body>
</html>