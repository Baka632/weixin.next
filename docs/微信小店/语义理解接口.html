
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link onerror="wx_loaderror(this)" onerror="wx_loaderror(this)" rel="stylesheet" type="text/css" href="https://res.wx.qq.com/mpres/htmledition/style/page/resource/res_iframe2f613f.css"/></head>
<body class="page_doc">
<div class="main_hd"><h2>语义理解</h2>
</div>
<div class="main_bd">
<div class="article_box">
<div class="inner">
<div class="news_content">
<p><span style="font-size: 14px; font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;"></span><span style="font-family: arial, helvetica, sans-serif;">微信开放平台语义理解接口调用（http请求）简单方便，用户无需掌握语义理解及相关技术，只需根据自己的产品特点，选择相应的服务即可搭建一套智能语义服务。</span></p>
<p><span style="font-family: arial, helvetica, sans-serif;"><strong><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;; font-size: 16px;">发送语义理解请求</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);">
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">http请求方式: POST（请使用https协议）</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">https://api.weixin.qq.com/semantic/semproxy/search?access_token=YOUR_ACCESS_TOKEN</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">POST数据格式：JSON</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">POST数据例子：</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">{</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&quot;query&quot;:&quot;查一下明天从北京到上海的南航机票&quot;,</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&quot;city&quot;:&quot;北京&quot;,</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&quot;category&quot;: &quot;flight,hotel&quot;,</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&quot;appid&quot;:&quot;wxaaaaaaaaaaaaaaaa&quot;,</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&quot;uid&quot;:&quot;123456&quot;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">}&nbsp;</span></p>
</div>
<p><span style="font-family: arial, helvetica, sans-serif;"><strong><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;; font-size: 16px;">参数说明</span></strong></span></p>
<table class="table" width="951">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;"><strong><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">参数</span><span class="Apple-tab-span" style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;; white-space: pre;"></span></strong></span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;"><strong><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">是否必须</span></strong></span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;"><strong><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">参数类型</span></strong></span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;"><strong><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">说明</span></strong></span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">access_token</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">是</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">String</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">根据appid和appsecret获取到的token</span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">query</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">是</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">String</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">输入文本串</span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">category</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">是</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">String</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">需要使用的服务类型，多个用“，”隔开，不能为空</span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">latitude</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">见接口协议文档</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">Float</span><span class="Apple-tab-span" style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;; white-space: pre;"></span></span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">纬度坐标，与经度同时传入；与城市二选一传入</span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">longitude</span><span class="Apple-tab-span" style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;; white-space: pre;"></span></span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">见接口协议文档</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">Float</span><span class="Apple-tab-span" style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;; white-space: pre;"></span></span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">经度坐标，与纬度同时传入；与城市二选一传入</span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">city</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">见接口协议文档</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">String</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">城市名称，与经纬度二选一传入</span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">region</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">见接口协议文档</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">String</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">区域名称，在城市存在的情况下可省；与经纬度二选一传入</span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">appid</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">是</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">String</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">公众号唯一标识，用于区分公众号开发者</span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">uid</span><span class="Apple-tab-span" style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;; white-space: pre;"></span></span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">否</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">String</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">用户唯一id（非开发者id），用户区分公众号下的不同用户（建议填入用户openid），如果为空，则无法使用上下文理解功能。appid和uid同时存在的情况下，才可以使用上下文理解功能。</span></td></tr>
</tbody>
</table>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">注：单类别意图比较明确，识别的覆盖率比较大，所以如果只要使用特定某个类别，建议将category只设置为该类别。</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">返回说明 正常情况下，微信会返回下述JSON数据包:</span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);">
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">{&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">“errcode”:0,&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">“query”:”查一下明天从北京到上海的南航机票”,&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">“type”:”flight”,&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">“semantic”:{&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; “details”:{</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; “start_loc”:{&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; “type”:”LOC_CITY”,&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; “city”:”北京市”,&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; “city_simple”:”北京”,&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; “loc_ori”:”北京”&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; “end_loc”: {&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; “type”:”LOC_CITY”,&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; “city”:”上海市”,&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; “city_simple”:”上海”,&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; “loc_ori”:”上海”&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; “start_date”: {&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; “type”:”DT_ORI”,&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; “date”:”2014-03-05”,&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; “date_ori”:”明天”&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp;“airline”:”中国南方航空公司”&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; },&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">“intent”:”SEARCH”&nbsp;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">}</span></p>
</div>
<p><span style="font-family: arial, helvetica, sans-serif;"><strong><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;; font-size: 16px;">返回参数说明</span></strong></span></p>
<table class="table" width="951">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;"><strong><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">参数</span><span class="Apple-tab-span" style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;; white-space: pre;"></span></strong></span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;"><strong><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">是否必须</span></strong></span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;"><strong><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">参数类型</span></strong></span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;"><strong><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">说明</span></strong></span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">errcode</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">是</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">Int</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">表示请求后的状态</span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">query</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">是</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">String</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">用户的输入字符串</span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">type</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">是</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">String</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">服务的全局类型id，详见协议文档中垂直服务协议定义</span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">semantic</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">是</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">Object</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">语义理解后的结构化标识，各服务不同</span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">result</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">否</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">Array</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">部分类别的结果</span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">answer</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">否</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">String</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">部分类别的结果html5展示，目前不支持</span></td></tr>
<tr><td class="table_cell" width="163" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">text</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">否</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">String</span></td><td class="table_cell" width="162" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif;">特殊回复说明</span></td></tr>
</tbody>
</table>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">更多详细内容与协议说明，请查看：语义理解接口协议文档</span></p>
<p><span style="font-family: 微软雅黑, &#39;Microsoft YaHei&#39;; font-size: 16px;">
<br/></span></p>
</div>
</div>
</div>
</div>
</body>
</html>