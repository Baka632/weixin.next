<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link onerror="wx_loaderror(this)" onerror="wx_loaderror(this)" rel="stylesheet" type="text/css" href="https://res.wx.qq.com/mpres/htmledition/style/page/resource/res_iframe2f613f.css"/> 
</head>
<body class="page_doc">
    <div class="main_hd"><h2>微信JS-SDK说明文档</h2>
</div>
    <div class="main_bd"> 
        <div class="article_box">
            <div class="inner">
                <div class="news_content">
                    <p><span style="font-size: 16px;"><strong><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;">目录</span></strong></span></p>
<p style="text-align: left;"><a href="#gaishu" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">1 概述</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#jssdkshiyongbuzhou" target="_self">1.1 JSSDK使用步骤</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; <a href="#buzhou1" target="_self">1.1.1 步骤一：绑定域名</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; </span><a href="#buzhou2" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">1.1.2 步骤二：引入JS文件</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; <a href="#buzhou3" target="_self">1.1.3 步骤三：通过config接口注入权限验证配置</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; <a href="#buzhou4" target="_self">1.1.4 步骤四：通过ready接口处理成功验证</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; <a href="#buzhou5" target="_self">1.1.5 步骤五：通过error接口处理失败验证</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#jkdysm" target="_self">1.2 接口调用说明</a></span></p>
<p style="text-align: left;"><a href="#jcjk" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">2 基础接口</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#jcjk1" target="_self">2.1 判断当前客户端版本是否支持指定JS接口</a></span></p>
<p style="text-align: left;"><a href="#fxjk" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">3 分享接口</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#fxjk1" target="_self">3.1 获取“分享到朋友圈”按钮点击状态及自定义分享内容接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#fxjk2" target="_self">3.2 获取“分享给朋友”按钮点击状态及自定义分享内容接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#fxjk3" target="_self">3.3 获取“分享到QQ”按钮点击状态及自定义分享内容接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#fxjk4" target="_self">3.4 获取“分享到腾讯微博”按钮点击状态及自定义分享内容接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#fxjk5" target="_self">3.5 获取“分享到QQ空间”按钮点击状态及自定义分享内容接口</a></span></p>
<p style="text-align: left;"><a href="#txjk" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">4 图像接口</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#txjk1" target="_self">4.1 拍照或从手机相册中选图接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#txjk2" target="_self">4.2 预览图片接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#txjk3" target="_self">4.3 上传图片接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#txjk4" target="_self">4.4 下载图片接口</a></span></p>
<p style="text-align: left;"><a href="#ypjk" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">5 音频接口</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#ypjk1" target="_self">5.1 开始录音接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#ypjk2" target="_self">5.2 停止录音接口</a></span></p>
<p style="text-align: left;"><a href="#ypjk3" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;5.3 监听录音自动停止接口</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#ypjk4" target="_self">5.4 播放语音接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#ypjk5" target="_self">5.5 暂停播放接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#ypjk6" target="_self">5.6 停止播放接口</a></span></p>
<p style="text-align: left;"><a href="#ypjk7" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;5.7 监听语音播放完毕接口</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#ypjk8" target="_self">5.8 上传语音接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#ypjk9" target="_self">5.9 下载语音接口</a></span></p>
<p style="text-align: left;"><a href="#znjk" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">6 智能接口</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#znjk1" target="_self">6.1 识别音频并返回识别结果接口</a></span></p>
<p style="text-align: left;"><a href="#sbxx" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">7 设备信息</span></a></p>
<p style="text-align: left;"><a href="#sbxx1" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;7.1 获取网络状态接口</span></a></p>
<p style="text-align: left;"><a href="#dlwz" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">8 地理位置</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#dlwz1" target="_self">8.1 使用微信内置地图查看位置接口</a></span></p>
<p style="text-align: left;"><a href="#dlwz2" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;8.2 获取地理位置接口</span></a></p>
<p style="text-align: left;"><a href="#yyyzb" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">9 摇一摇周边</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#yyyzb1" target="_self">9.1 开启查找周边ibeacon设备接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#yyyzb2" target="_self">9.2 关闭查找周边ibeacon设备接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#yyyzb3" target="_self">9.3 监听周边ibeacon设备接口</a></span></p>
<p style="text-align: left;"><a href="#jmcz" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">10 界面操作</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#jmcz1" target="_self">10.1 隐藏右上角菜单接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#jmcz2" target="_self">10.2 显示右上角菜单接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#jmcz3" target="_self">10.3 关闭当前网页窗口接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#jmcz4" target="_self">10.4 批量隐藏功能按钮接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#jmcz5" target="_self">10.5 批量显示功能按钮接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#jmcz6" target="_self">10.6 隐藏所有非基础按钮接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#jmcz7" target="_self">10.7 显示所有功能按钮接口</a></span></p>
<p style="text-align: left;"><a href="#wxsys" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">11 微信扫一扫</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#wxsys1" target="_self">11.1 调起微信扫一扫接口</a></span></p>
<p style="text-align: left;"><a href="#wxxd" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">12 微信小店</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#wxxd1" target="_self">12.1 跳转微信商品页接口</a></span></p>
<p style="text-align: left;"><a href="#wxkq" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">13 微信卡券</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#wxkq1" target="_self">13.1 获取api_ticket</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#wxkq2" target="_self">13.2 拉取适用卡券列表并获取用户选择信息</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#wxkq3" target="_self">13.3 批量添加卡券接口</a></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#wxkq4" target="_self">13.4 查看微信卡包中的卡券接口</a></span></p>
<p style="text-align: left;"><a href="#wxzf" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">14 微信支付</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;<a href="#wxzf1" target="_self">14.1 发起一个微信支付请求</a></span></p>
<p style="text-align: left;"><a href="#fl1" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">15 附录1-JS-SDK使用权限签名算法</span></a></p>
<p style="text-align: left;"><a href="#fl2" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">16 附录2-所有JS接口列表</span></a></p>
<p style="text-align: left;"><a href="#fl3" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">17 附录3-所有菜单项列表</span></a></p>
<p style="text-align: left;"><a href="#fl4" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">18 附录4-卡券扩展字段及签名生成算法</span></a></p>
<p style="text-align: left;"><a href="#fl5" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">19 附录5-常见错误及解决方法</span></a></p>
<p style="text-align: left;"><a href="#fl6" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">20 附录6-DEMO页面和示例代码</span></a></p>
<p style="text-align: left;"><a href="#fl7" target="_self" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">21 附录7-问题反馈</span></a></p>
<p><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><br style="text-align: left;"></span></strong><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"></span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="gaishu"></a>概述</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">微信JS-SDK是<a href="https://mp.weixin.qq.com/cgi-bin/loginpage?t=wxm2-login&amp;lang=zh_CN" target="_blank">微信公众平台</a>面向网页开发者提供的基于微信内的网页开发工具包。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">通过使用微信JS-SDK，网页开发者可借助微信高效地使用拍照、选图、语音、位置等手机系统的能力，同时可以直接使用微信分享、扫一扫、卡券、支付等微信特有的能力，为微信用户提供更优质的网页体验。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">此文档面向网页开发者介绍微信JS-SDK如何使用及相关注意事项。</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="jssdkshiyongbuzhou"></a>JSSDK使用步骤</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="buzhou1"></a>步骤一：绑定域名</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">先登录微信公众平台进入“公众号设置”的“功能设置”里填写“JS接口安全域名”。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">备注：登录后可在“开发者中心”查看对应的接口权限。</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="buzhou2"></a>步骤二：引入JS文件</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">在需要调用JS接口的页面引入如下JS文件，（支持https）：http://res.wx.qq.com/open/js/jweixin-1.0.0.js</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">如需使用摇一摇周边功能，请引入 http://res.wx.qq.com/open/js/jweixin-1.1.0.js</span><span style="font-size: 14px; font-family: 微软雅黑, 'Microsoft YaHei';"><br style="text-align: left;"></span></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">备注：支持使用 AMD/CMD 标准模块加载方法加载</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="buzhou3"></a>步骤三：通过config接口注入权限验证配置</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px; color: rgb(255, 0, 0);">所有需要使用JS-SDK的页面必须先注入配置信息，否则将无法调用（同一个url仅需调用一次，对于变化url的SPA的web app可在每次url变化时进行调用,目前Android微信客户端不支持pushState的H5新特性，所以使用pushState来实现web app的页面会导致签名失败，此问题会在Android6.2中修复）。</span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; text-align: left; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.config({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; appId: '', // 必填，公众号的唯一标识</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; timestamp: , // 必填，生成签名的时间戳</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; nonceStr: '', // 必填，生成签名的随机串</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; signature: '',// 必填，签名，见附录1</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; jsApiList: [] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="buzhou4"></a>步骤四：通过ready接口处理成功验证</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; text-align: left; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.ready(function(){</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="buzhou5"></a>步骤五：通过error接口处理失败验证</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; text-align: left; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.error(function(res){</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="jkdysm"></a>接口调用说明</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">所有接口通过wx对象(也可使用jWeixin对象)来调用，参数是一个对象，除了每个接口本身需要传的参数之外，还有以下通用参数：</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">1.success：接口调用成功时执行的回调函数。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">2.fail：接口调用失败时执行的回调函数。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">3.complete：接口调用完成时执行的回调函数，无论成功或失败都会执行。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">4.cancel：用户点击取消时的回调函数，仅部分有用户取消操作的api才会用到。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">5.trigger: 监听Menu中的按钮点击时触发的方法，该方法仅支持Menu中的相关接口。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">备注：<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">不要尝试在trigger中使用ajax异步请求修改本次分享的内容，因为客户端分享操作是一个同步操作，这时候使用ajax的回包会还没有返回。</span></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">以上几个函数都带有一个参数，类型为对象，其中除了每个接口本身返回的数据之外，还有一个通用属性errMsg，其值格式如下：</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">调用成功时："xxx:ok" ，其中xxx为调用的接口名</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">用户取消时："xxx:cancel"，其中xxx为调用的接口名</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">调用失败时：其值为具体错误信息</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="jcjk"></a>基础接口</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="jcjk1"></a>判断当前客户端版本是否支持指定JS接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.checkJsApi({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; jsApiList: ['chooseImage'], // 需要检测的JS接口列表，所有JS接口列表见附录2,</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function(res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; // 以键值对的形式返回，可用的api值true，不可用为false</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; // 如：{"checkResult":{"chooseImage":true},"errMsg":"checkJsApi:ok"}</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">备注：checkJsApi接口是客户端6.0.2新引入的一个预留接口，第一期开放的接口均可不使用checkJsApi来检测。</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="fxjk"></a>分享接口</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">请注意不要有诱导分享等违规行为，对于诱导分享行为将永久回收公众号接口权限，详细规则请查看：<a href="http://kf.qq.com/faq/131117ne2MV7141117JzI32q.html" target="_blank">朋友圈管理常见问题</a> 。</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="fxjk1"></a>获取“分享到朋友圈”按钮点击状态及自定义分享内容接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.onMenuShareTimeline({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; title: '', // 分享标题</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; link: '', // 分享链接</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; imgUrl: '', // 分享图标</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function () {&nbsp;</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; // 用户确认分享后执行的回调函数</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; },</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; cancel: function () {&nbsp;</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; // 用户取消分享后执行的回调函数</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="fxjk2"></a>获取“分享给朋友”按钮点击状态及自定义分享内容接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;">wx.onMenuShareAppMessage({<br></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; title: '', // 分享标题</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; desc: '', // 分享描述</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; link: '', // 分享链接</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; imgUrl: '', // 分享图标</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; type: '', // 分享类型,music、video或link，不填默认为link</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function () {&nbsp;</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; // 用户确认分享后执行的回调函数</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; },</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; cancel: function () {&nbsp;</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; // 用户取消分享后执行的回调函数</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="fxjk3"></a>获取“分享到QQ”按钮点击状态及自定义分享内容接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.onMenuShareQQ({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; title: '', // 分享标题</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; desc: '', // 分享描述</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; link: '', // 分享链接</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; imgUrl: '', // 分享图标</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function () {&nbsp;<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; background-color: rgb(253, 234, 218);"></span></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp;// 用户确认分享后执行的回调函数</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; },</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; cancel: function () {&nbsp;</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp;// 用户取消分享后执行的回调函数</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="fxjk4"></a>获取“分享到腾讯微博”按钮点击状态及自定义分享内容接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.onMenuShareWeibo({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; title: '', // 分享标题</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; desc: '', // 分享描述</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; link: '', // 分享链接</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; imgUrl: '', // 分享图标</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function () {&nbsp;</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp;// 用户确认分享后执行的回调函数</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; },</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; cancel: function () {&nbsp;</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; // 用户取消分享后执行的回调函数</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="fxjk5"></a>获取“分享到QQ空间”按钮点击状态及自定义分享内容接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.onMenuShareQZone({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; title: '', // 分享标题</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; desc: '', // 分享描述</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; link: '', // 分享链接</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; imgUrl: '', // 分享图标</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function () {&nbsp;</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp;// 用户确认分享后执行的回调函数</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; },</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; cancel: function () {&nbsp;</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; // 用户取消分享后执行的回调函数</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="txjk"></a>图像接口</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="txjk1"></a>拍照或从手机相册中选图接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.chooseImage({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; count: 1, // 默认9</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; sizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; sourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var localIds = res.localIds; // 返回选定照片的本地ID列表，localId可以作为img标签的src属性显示图片</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="txjk2"></a>预览图片接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.previewImage({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; current: '', // 当前显示图片的http链接</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; urls: [] // 需要预览的图片http链接列表</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="txjk3"></a>上传图片接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.uploadImage({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; localId: '', // 需要上传的图片的本地ID，由chooseImage接口获得</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; isShowProgressTips: 1, // 默认为1，显示进度提示</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var serverId = res.serverId; // 返回图片的服务器端ID</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">备注：上传图片有效期3天，可用微信多媒体接口下载图片到自己的服务器，此处获得的 serverId 即 media_id。</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="txjk4"></a>下载图片接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.downloadImage({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; serverId: '', // 需要下载的图片的服务器端ID，由uploadImage接口获得</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; isShowProgressTips: 1, // 默认为1，显示进度提示</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var localId = res.localId; // 返回图片下载后的本地ID</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="ypjk"></a>音频接口</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; background-color: rgb(255, 255, 255);"><a name="ypjk1"></a>开始录音接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.startRecord();</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="ypjk2"></a>停止录音接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.stopRecord({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var localId = res.localId;</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="ypjk3"></a>监听录音自动停止接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.onVoiceRecordEnd({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; // 录音时间超过一分钟没有停止的时候会执行 complete 回调</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; complete: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var localId = res.localId;&nbsp;</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="ypjk4"></a>播放语音接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.playVoice({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; localId: '' // 需要播放的音频的本地ID，由stopRecord接口获得</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="ypjk5"></a>暂停播放接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.pauseVoice({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; localId: '' // 需要暂停的音频的本地ID，由stopRecord接口获得</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="ypjk6"></a>停止播放接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.stopVoice({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; localId: '' // 需要停止的音频的本地ID，由stopRecord接口获得</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="ypjk7"></a>监听语音播放完毕接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.onVoicePlayEnd({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var localId = res.localId; // 返回音频的本地ID</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="ypjk8"></a>上传语音接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.uploadVoice({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; localId: '', // 需要上传的音频的本地ID，由stopRecord接口获得</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; isShowProgressTips: 1, // 默认为1，显示进度提示</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; success: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var serverId = res.serverId; // 返回音频的服务器端ID</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">备注：上传语音有效期3天，可用微信多媒体接口下载语音到自己的服务器，此处获得的 serverId 即 media_id，参考文档 .目前多媒体文件下载接口的频率限制为10000次/天，如需要调高频率，请登录微信公众平台，在开发 - 接口权限的列表中，申请提高临时上限。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><img src="http://mmbiz.qpic.cn/mmbiz/PiajxSqBRaEIQxibpLbyuSKwKpliceQ7em8icguia8NDibe0IySWMOlL22PJXx1hvDd8HFo9bBhbJG8iaGe7pKFj1e7aA/0?wx_fmt=png" title="" alt="" width="914" height="402" style="width: 914px; height: 402px;"></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="ypjk9"></a>下载语音接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.downloadVoice({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; serverId: '', // 需要下载的音频的服务器端ID，由uploadVoice接口获得</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; isShowProgressTips: 1, // 默认为1，显示进度提示</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var localId = res.localId; // 返回音频的本地ID</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="znjk"></a>智能接口</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="znjk1"></a>识别音频并返回识别结果接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.translateVoice({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp;localId: '', // 需要识别的音频的本地Id，由录音相关接口获得</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; isShowProgressTips: 1, // 默认为1，显示进度提示</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; alert(res.translateResult); // 语音识别的结果</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="sbxx"></a>设备信息</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="sbxx1"></a>获取网络状态接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;">wx.getNetworkType({<br></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var networkType = res.networkType; // 返回网络类型2g，3g，4g，wifi</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="dlwz"></a>地理位置</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="dlwz1"></a>使用微信内置地图查看位置接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.openLocation({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; latitude: 0, // 纬度，浮点数，范围为90 ~ -90</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; longitude: 0, // 经度，浮点数，范围为180 ~ -180。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; name: '', // 位置名</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; address: '', // 地址详情说明</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; scale: 1, // 地图缩放级别,整形值,范围从1~28。默认为最大</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; infoUrl: '' // 在查看位置界面底部显示的超链接,可点击跳转</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="dlwz2"></a>获取地理位置接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.getLocation({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; type: 'wgs84', // 默认为wgs84的gps坐标，如果要返回直接给openLocation用的火星坐标，可传入'gcj02'</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var latitude = res.latitude; // 纬度，浮点数，范围为90 ~ -90</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var longitude = res.longitude; // 经度，浮点数，范围为180 ~ -180。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var speed = res.speed; // 速度，以米/每秒计</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var accuracy = res.accuracy; // 位置精度</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="yyyzb"></a>摇一摇周边</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="yyyzb1"></a>开启查找周边ibeacon设备接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.startSearchBeacons({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; white-space: pre;">	</span>ticket:"", &nbsp;//摇周边的业务ticket, 系统自动添加在摇出来的页面链接后面</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; white-space: pre;">	</span>complete:function(argv){</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; white-space: pre;">		</span>//开启查找完成后的回调函数</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; white-space: pre;">	</span>}</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">备注：如需接入摇一摇周边功能，请参考：申请开通摇一摇周边</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="yyyzb2"></a>关闭查找周边ibeacon设备接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.stopSearchBeacons({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; white-space: pre;">	</span>complete:function(res){</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; white-space: pre;">		</span>//关闭查找完成后的回调函数</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; white-space: pre;">	</span>}</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="yyyzb3"></a>监听周边ibeacon设备接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.onSearchBeacons({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; white-space: pre;">	</span>complete:function(argv){</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; white-space: pre;">		</span>//回调函数，可以数组形式取得该商家注册的在周边的相关设备列表</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; white-space: pre;">	</span>}</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">备注：上述摇一摇周边接口使用注意事项及更多返回结果说明，请参考：摇一摇周边获取设备信息</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="jmcz"></a>界面操作</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="jmcz1"></a>隐藏右上角菜单接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.hideOptionMenu();</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="jmcz2"></a>显示右上角菜单接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.showOptionMenu();</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="jmcz3"></a>关闭当前网页窗口接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;">wx.closeWindow();<br></span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="jmcz4"></a>批量隐藏功能按钮接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.hideMenuItems({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; menuList: [] // 要隐藏的菜单项，只能隐藏“传播类”和“保护类”按钮，所有menu项见附录3</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="jmcz5"></a>批量显示功能按钮接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.showMenuItems({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; menuList: [] // 要显示的菜单项，所有menu项见附录3</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="jmcz6"></a>隐藏所有非基础按钮接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.hideAllNonBaseMenuItem();</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">// “基本类”按钮详见附录3</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="jmcz7"></a>显示所有功能按钮接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;">wx.showAllNonBaseMenuItem();<br></span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="wxsys"></a>微信扫一扫</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="wxsys1"></a>调起微信扫一扫接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.scanQRCode({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; needResult: 0, // 默认为0，扫描结果由微信处理，1则直接返回扫描结果，</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; scanType: ["qrCode","barCode"], // 可以指定扫二维码还是一维码，默认二者都有</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; var result = res.resultStr; // 当needResult 为 1 时，扫码返回的结果</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">}</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="wxxd"></a>微信小店</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="wxxd1"></a>跳转微信商品页接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.openProductSpecificView({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; productId: '', // 商品id</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; viewType: '' // 0.默认值，普通商品详情页1.扫一扫商品详情页2.小店商品详情页</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="wxkq"></a>微信卡券</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">微信卡券接口中使用的签名凭证api_ticket，与步骤三中config使用的签名凭证jsapi_ticket不同，开发者在调用微信卡券JS-SDK的过程中需依次完成两次不同的签名，并确保凭证的缓存。</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="wxkq1"></a>获取api_ticket</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">api_ticket 是用于调用微信卡券JS API的临时票据，有效期为7200 秒，通过access_token 来获取。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">开发者注意事项：</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">1.<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">此用于卡券接口签名的api_ticket与步骤三中</span>通过config接口注入权限验证配置<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">使用的jsapi_ticket不同</span>。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">2.由于获取api_ticket 的api 调用次数非常有限，频繁刷新api_ticket 会导致api调用受限，影响自身业务，开发者需在自己的服务存储与更新api_ticket。</span></p>
<p><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">接口调用请求说明</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">http请求方式: GET</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=ACCESS_TOKEN&amp;type=wx_card</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">参数说明</span></strong></span></p>
<table class="table" width="951"><tbody class="tbody"><tr class="firstRow thead"><td class="table_cell" width="217" valign="top" height="0"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><strong>参数<br></strong></span></td><td class="table_cell" width="217" valign="top" height="0"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><strong>是否必须</strong></span></td><td class="table_cell" width="217" valign="top" height="0"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><strong>说明</strong></span></td></tr>
<tr><td class="table_cell" width="217" valign="top"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">access_token</span></td><td class="table_cell" width="217" valign="top"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">是</span></td><td class="table_cell" width="217" valign="top"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">接口调用凭证</span></td></tr>
</tbody></table>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">返回数据</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">数据示例：</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp;{</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">"errcode":0,</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">"errmsg":"ok",</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">"ticket":"bxLdikRXVbTPdHSM05e5u5sUoXNKdvsdshFKA",</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">"expires_in":7200</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">}</span></p>
</div><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"></span></p>
<table class="table"><tbody class="tbody"><tr class="firstRow thead"><td class="table_cell" width="687" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">参数名</span></strong></span></td><td class="table_cell" width="687" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">描述</span></strong></span></td></tr>
<tr><td class="table_cell" width="687" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">errcode</span></td><td class="table_cell" width="687" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">错误码</span></td></tr>
<tr><td class="table_cell" width="687" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">errmsg</span></td><td class="table_cell" width="687" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">错误信息</span></td></tr>
<tr><td class="table_cell" width="687" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">ticket</span></td><td class="table_cell" width="687" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">api_ticket，卡券接口中签名所需凭证</span></td></tr>
<tr><td class="table_cell" width="687" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">expires_in</span><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; white-space: pre;">	</span></span></td><td class="table_cell" width="687" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">有效时间</span></td></tr>
</tbody></table>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="wxkq2"></a>拉取适用卡券列表并获取用户选择信息</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.chooseCard({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; shopId: '', // 门店Id</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; cardType: '', // 卡券类型</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; cardId: '', // 卡券Id</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; timestamp: 0, // 卡券签名时间戳</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; nonceStr: '', // 卡券签名随机串</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; signType: '', // 签名方式，默认'SHA1'</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; cardSign: '', // 卡券签名</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var cardList= res.cardList; // 用户选中的卡券列表信息</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"></span></p>
<table class="table"><tbody class="tbody"><tr class="firstRow thead"><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">参数名</span></strong></span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">必填</span><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; white-space: pre;">	</span></strong></span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">类型</span><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; white-space: pre;">	</span></strong></span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">示例值</span></strong></span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">描述</span></strong></span></td></tr>
<tr><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">shopId</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">否</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">string(24)</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">1234</span><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; white-space: pre;">	</span></span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">门店ID。shopID用于筛选出拉起带有指定location_list(shopID)的卡券列表，非必填。</span></td></tr>
<tr><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">cardType</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">否</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">string(24)</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">GROUPON</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">卡券类型，用于拉起指定卡券类型的卡券列表。当cardType为空时，默认拉起所有卡券的列表，非必填。</span></td></tr>
<tr><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">cardId</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">否</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">string(32)</span><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; white-space: pre;">	</span></span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">p1Pj9jr90_SQRaVqYI239Ka1erk</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">卡券ID，用于拉起指定cardId的卡券列表，当cardId为空时，默认拉起所有卡券的列表，非必填。</span></td></tr>
<tr><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">timestamp</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">是</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">string(32)</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">14300000000</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">时间戳。</span></td></tr>
<tr><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">nonceStr</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">是</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">string(32)</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">sduhi123</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">随机字符串。</span></td></tr>
<tr><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">signType</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">是</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">string(32)</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">SHA1</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">签名方式，目前仅支持SHA1</span></td></tr>
<tr><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">cardSign</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">是</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">string(64)</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">abcsdijcous123</span></td><td class="table_cell" width="262" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">签名。</span><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; white-space: pre;">				</span></span></td></tr>
</tbody></table>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">cardSign详见<a href="#fl4" target="_self">附录4</a>。开发者特别注意：签名错误会导致拉取卡券列表异常为空，请仔细检查参与签名的参数有效性。</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">特别提醒</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">拉取列表仅与用户本地卡券有关，拉起列表异常为空的情况通常有三种：签名错误、时间戳无效、筛选机制有误。请开发者依次排查定位原因。</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="wxkq3"></a>批量添加卡券接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.addCard({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; cardList: [{</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; cardId: '',</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; cardExt: ''</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }], // 需要添加的卡券列表</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; var cardList = res.cardList; // 添加的卡券列表信息</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">cardExt详见<a href="#fl4" target="_self">附录4</a>，值得注意的是，这里的card_ext参数必须与参与签名的参数一致，格式为字符串而不是Object，否则会报签名错误。</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="wxkq4"></a>查看微信卡包中的卡券接口</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.openCard({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; cardList: [{</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; cardId: '',</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; code: ''</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }]// 需要打开的卡券列表</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="wxzf"></a>微信支付</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="wxzf1"></a>发起一个微信支付请求</span></strong></span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">wx.chooseWXPay({</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; timestamp: 0, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; nonceStr: '', // 支付签名随机串，不长于 32 位</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; package: '', // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=***）</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; signType: '', // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; paySign: '', // 支付签名</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; success: function (res) {</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; &nbsp; &nbsp; // 支付成功后的回调函数</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp; }</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">});</span></p>
</div><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">备注：prepay_id 通过微信支付统一下单接口拿到，paySign 采用统一的微信支付 Sign 签名生成方法，注意这里 appId 也要参与签名，appId 与 config 中传入的 appId 一致，即最后参与签名的参数有appId, timeStamp, nonceStr, package, signType。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">微信支付开发文档：</span><a href="https://pay.weixin.qq.com/wiki/doc/api/index.html" target="_blank" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">https://pay.weixin.qq.com/wiki/doc/api/index.html</span></a></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="fl1"></a>附录1-JS-SDK使用权限签名算法</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">jsapi_ticket</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">生成签名之前必须先了解一下jsapi_ticket，jsapi_ticket是公众号用于调用微信JS接口的临时票据。正常情况下，<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">jsapi_ticket的有效期为7200秒</span>，通过access_token来获取。由于获取jsapi_ticket的api调用次数非常有限，频繁刷新jsapi_ticket会导致api调用受限，影响自身业务，<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">开发者必须在自己的服务全局缓存jsapi_ticket 。</span></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">1.参考以下文档获取access_token（<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">有效期7200秒，开发者必须在自己的服务全局缓存access_token</span>）：../15/54ce45d8d30b6bf6758f68d2e95bc627.html</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">2.用第一步拿到的access_token 采用http GET方式请求获得jsapi_ticket（<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">有效期7200秒，开发者必须在自己的服务全局缓存jsapi_ticket</span>）：https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=ACCESS_TOKEN&amp;type=jsapi</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">成功返回如下JSON：</span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">{</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">"errcode":0,</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">"errmsg":"ok",</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">"ticket":"bxLdikRXVbTPdHSM05e5u5sUoXNKd8-41ZO3MhKoyN5OfkWITDGgnr2fwJ0m9E8NYzWKVZvdVtaUgWvsdshFKA",</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">"expires_in":7200</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">}</span></p>
</div><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">获得jsapi_ticket之后，就可以生成JS-SDK权限验证的签名了。</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">签名算法</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">签名生成规则如下：参与签名的字段包括noncestr（随机字符串）, 有效的jsapi_ticket, timestamp（时间戳）, url（当前网页的URL，<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">不包含#及其后面部分</span>） 。对所有待签名参数按照字段名的ASCII 码从小到大排序（字典序）后，使用URL键值对的格式（即key1=value1&amp;key2=value2…）拼接成字符串string1。这里需要注意的是所有参数名均为小写字符。对string1作sha1加密，字段名和字段值都采用原始值，不进行URL 转义。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">即signature=sha1(string1)。 示例：</span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">noncestr=Wm3WZYTPz0wzccnW</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">jsapi_ticket=sM4AOVdWfPE4DxkXGEs8VMCPGGVi4C3VM0P37wVUCFvkVAy_90u5h9nbSlYy3-Sl-HhTdfl2fzFy1AOcHKP7qg</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">timestamp=1414587457</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">url=http://mp.weixin.qq.com?params=value</span></p>
</div><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">步骤1. 对所有待签名参数按照字段名的ASCII 码从小到大排序（字典序）后，使用URL键值对的格式（即key1=value1&amp;key2=value2…）拼接成字符串string1：</span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">jsapi_ticket=sM4AOVdWfPE4DxkXGEs8VMCPGGVi4C3VM0P37wVUCFvkVAy_90u5h9nbSlYy3-Sl-HhTdfl2fzFy1AOcHKP7qg&amp;noncestr=Wm3WZYTPz0wzccnW&amp;timestamp=1414587457&amp;url=http://mp.weixin.qq.com?params=value</span></p>
</div><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">步骤2. 对string1进行sha1签名，得到signature：</span></p>
<div data-tag="backcolor" style="margin-bottom: 14px; padding: 10px 16px; background-color: rgb(253, 234, 218);"><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">0f9de62fce790f9a083d5c99e95740ceb90c27ed</span></p>
</div><p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">注意事项</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">1.签名用的noncestr和timestamp必须与wx.config中的nonceStr和timestamp相同。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">2.签名用的url必须是调用JS接口页面的完整URL。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">3.<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">出于安全考虑，开发者必须在服务器端实现签名的逻辑。</span></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">如出现invalid signature 等错误详见附录5常见错误及解决办法。</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="fl2"></a>附录2-所有JS接口列表</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">版本1.0.0接口</span></strong></span></p>
<p><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;">onMenuShareTimeline<br></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">onMenuShareAppMessage</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">onMenuShareQQ</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">onMenuShareWeibo</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">onMenuShareQZone</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">startRecord</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">stopRecord</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">onVoiceRecordEnd</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">playVoice</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">pauseVoice</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">stopVoice</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">onVoicePlayEnd</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">uploadVoice</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">downloadVoice</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">chooseImage</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">previewImage</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">uploadImage</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">downloadImage</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">translateVoice</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">getNetworkType</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">openLocation</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">getLocation</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">hideOptionMenu</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">showOptionMenu</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">hideMenuItems</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">showMenuItems</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">hideAllNonBaseMenuItem</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">showAllNonBaseMenuItem</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">closeWindow</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">scanQRCode</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">chooseWXPay</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">openProductSpecificView</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">addCard</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">chooseCard</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">openCard</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="fl3"></a>附录3-所有菜单项列表</span></strong></span></p>
<p><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">基本类</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">举报: "menuItem:exposeArticle"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">调整字体: "menuItem:setFont"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">日间模式: "menuItem:dayMode"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">夜间模式: "menuItem:nightMode"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">刷新: "menuItem:refresh"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">查看公众号（已添加）: "menuItem:profile"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">查看公众号（未添加）: "menuItem:addContact"</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">传播类</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">发送给朋友: "menuItem:share:appMessage"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">分享到朋友圈: "menuItem:share:timeline"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">分享到QQ: "menuItem:share:qq"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">分享到Weibo: "menuItem:share:weiboApp"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">收藏: "menuItem:favorite"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">分享到FB: "menuItem:share:facebook"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">分享到 QQ 空间/menuItem:share:QZone</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">保护类</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">编辑标签: "menuItem:editTag"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">删除: "menuItem:delete"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">复制链接: "menuItem:copyUrl"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">原网页: "menuItem:originPage"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">阅读模式: "menuItem:readMode"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">在QQ浏览器中打开: "menuItem:openWithQQBrowser"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">在Safari中打开: "menuItem:openWithSafari"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">邮件: "menuItem:share:email"</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">一些特殊公众号: "menuItem:share:brand"</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="fl4"></a>附录4-卡券扩展字段及签名生成算法</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">JSSDK使用者请读这里，JSAPI用户可以跳过</span></strong></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; color: rgb(255, 0, 0);">卡券签名和JSSDK的签名完全独立，两者的算法和意义完全不同，请不要混淆。</span><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">JSSDK的签名是使用所有JS接口都需要走的一层鉴权，用以标识调用者的身份，和卡券本身并无关系。其次，卡券的签名考虑到协议的扩展性和简单的防数据擅改，设计了一套独立的签名协议。另外由于历史原因，卡券的JS接口先于JSSDK出现，当时的JSAPI并没有鉴权体系，所以在卡券的签名里也加上了appsecret/api_ticket这些身份信息，希望开发者理解。</span></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">卡券 api_ticket</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">卡券 api_ticket 是用于调用卡券相关接口的临时票据，有效期为 7200 秒，通过 access_token 来获取。这里要注意与 jsapi_ticket 区分开来。由于获取卡券 api_ticket 的 api 调用次数非常有限，频繁刷新卡券 api_ticket 会导致 api 调用受限，影响自身业务，<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">开发者必须在自己的服务全局缓存卡券 api_ticket </span>。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">1.参考以下文档获取access_token（<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">有效期7200秒，开发者必须在自己的服务全局缓存access_token</span>）：../15/54ce45d8d30b6bf6758f68d2e95bc627.html</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">2.用第一步拿到的access_token 采用http GET方式请求获得卡券 api_ticket（<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">有效期7200秒，开发者必须在自己的服务全局缓存卡券 api_ticket</span>）：<a href="https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=ACCESS_TOKEN&amp;type=wx_card" _src="https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=ACCESS_TOKEN&amp;type=wx_card">https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=ACCESS_TOKEN&amp;type=wx_card</a> </span></p>
<p style="text-align: left;"><br></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">卡券扩展字段cardExt说明</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">cardExt本身是一个JSON字符串，是商户为该张卡券分配的唯一性信息，包含以下字段：</span></p>
<table class="table"><tbody class="tbody"><tr class="firstRow thead"><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">字段</span></strong></span></td><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">是否必填</span><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; white-space: pre;">	</span></strong></span></td><td class="table_cell" valign="top" colspan="1" rowspan="1" width="225" style="word-break: break-all;">是否参与签名</td><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">说明</span></strong></span></td></tr>
<tr><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">code</span><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; white-space: pre;">	</span></span></td><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">否</span></td><td class="table_cell" valign="top" colspan="1" rowspan="1" width="225" style="word-break: break-all;">是</td><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">指定的卡券code码，只能被领一次。自定义code模式的卡券必须填写，非自定义code和预存code模式的卡券不必填写。详情见：<a href="http://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1451025056&amp;token=&amp;lang=zh_CN&amp;anchor=2.2.2" target="_parent">是否自定义code码</a></span></td></tr>
<tr><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">openid</span></td><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">否</span></td><td class="table_cell" valign="top" colspan="1" rowspan="1" width="225" style="word-break: break-all;">是</td><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">指定领取者的openid，只有该用户能领取。bind_openid字段为true的卡券必须填写，bind_openid字段为false不必填写。</span></td></tr>
<tr><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">timestamp</span></td><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">是</span></td><td class="table_cell" valign="top" colspan="1" rowspan="1" width="225" style="word-break: break-all;">是</td><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">时间戳，商户生成从1970年1月1日00:00:00至今的秒数,即当前的时间,且最终需要转换为字符串形式;由商户生成后传入,不同添加请求的时间戳须动态生成，若重复将会导致领取失败！。</span></td></tr>
<tr><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">nonce_str</span></td><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-family:arial, helvetica, sans-serif">否</span></td><td class="table_cell" valign="top" colspan="1" rowspan="1" width="225" style="word-break: break-all;">是</td><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">随机字符串，由开发者设置传入，<strong>加强安全性（若不填写可能被重放请求）</strong>。随机字符串，不长于32位。推荐使用大小写字母和数字，不同添加请求的nonce须动态生成，若重复将会导致领取失败。</span></td></tr>
<tr><td class="table_cell" valign="top" colspan="1" rowspan="1" style="word-break: break-all;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">outer_str</span></td><td class="table_cell" valign="top" colspan="1" rowspan="1" style="word-break: break-all;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">否</span></td><td class="table_cell" valign="top" colspan="1" rowspan="1" style="word-break: break-all;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">否</span></td><td class="table_cell" valign="top" colspan="1" rowspan="1" style="word-break: break-all;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">领取渠道参数，用于标识本次领取的渠道值。</span></td></tr>
<tr><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">signature</span></td><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">是</span></td><td class="table_cell" valign="top" colspan="1" rowspan="1" width="225" style="word-break: break-all;">-</td><td class="table_cell" width="225" valign="top" style="word-break: break-all;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">签名，商户将接口列表中的参数按照指定方式进行签名,签名方式使用SHA1,具体签名方案参见下文;由商户按照规范签名后传入。</span><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei'; white-space: pre;">		</span></span></td></tr>
</tbody></table>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">签名说明</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">1.将 api_ticket（特别说明：api_ticket 相较 appsecret 安全性更高，同时兼容老版本文档中使用的 appsecret 作为签名凭证。）、timestamp、card_id、code、openid、nonce_str的value值进行字符串的字典序排序。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">2.将所有参数字符串拼接成一个字符串进行sha1加密，得到signature。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">3.signature中的timestamp，nonce字段和card_ext中的timestamp，nonce_str字段必须保持一致。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">4.code=jonyqin_1434008071，timestamp=1404896688，card_id=pjZ8Yt1XGILfi-FUsewpnnolGgZk， api_ticket=ojZ8YtyVyr30HheH3CM73y7h4jJE ，nonce_str=jonyqin 则signature=sha1(1404896688jonyqinjonyqin_1434008071ojZ8YtyVyr30HheH3CM73y7h4jJE pjZ8Yt1XGILfi-FUsewpnnolGgZk)=6b81fbf6af16e856334153b39737556063c82689。</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">强烈建议开发者使用卡券资料包中的签名工具SDK进行签名或使用debug工具进行校验：</span></strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a href="http://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=cardsign" target="_blank">http://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=cardsign</a></span></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><br></span></p>
<p><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">卡券签名cardSign说明</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">1.将 api_ticket（特别说明：api_ticket 相较 appsecret 安全性更高，同时兼容老版本文档中使用的 appsecret 作为签名凭证。）、app_id、location_id、times_tamp、nonce_str、card_id、card_type的value值进行字符串的字典序排序。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">2.将所有参数字符串拼接成一个字符串进行sha1加密，得到cardSign。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"><br></span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="fl5"></a>附录5-常见错误及解决方法</span></strong></span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">调用config 接口的时候传入参数 debug: true 可以开启debug模式，页面会alert出错误信息。以下为常见错误及解决方法：</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">1.invalid url domain当前页面所在域名与使用的appid没有绑定，请确认正确填写绑定的域名，仅支持80（http）和443（https）两个端口，因此不需要填写端口号（一个appid可以绑定三个有效域名，见 <a href="#buzhou1" target="_self">目录1.1.1</a>）。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">2.invalid signature签名错误。建议按如下顺序检查：</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp;1.确认签名算法正确，可用 <a href="http://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=jsapisign" target="_blank">http://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=jsapisign</a> 页面工具进行校验。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp;2.确认config中nonceStr（js中驼峰标准大写S）, timestamp与用以签名中的对应noncestr, timestamp一致。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp;3.确认url是页面完整的url(请在当前页面alert(location.href.split('#')[0])确认)，包括'http(s)://'部分，以及'？'后面的GET参数部分,但不包括'#'hash后面的部分。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp;4.确认 config 中的 appid 与用来获取 jsapi_ticket 的 appid 一致。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp;5.确保一定缓存access_token和jsapi_ticket。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp;6.<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">确保你获取用来签名的url是动态获取的，动态页面可参见实例代码中php的实现方式。如果是html的静态页面在前端通过ajax将url传到后台签名，前端需要用js获取当前页面除去'#'hash部分的链接（可用location.href.split('#')[0]获取,而且需要encodeURIComponent），因为页面一旦分享，微信客户端会在你的链接末尾加入其它参数，如果不是动态获取当前链接，将导致分享后的页面签名失败。</span></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">3.the permission value is offline verifying这个错误是因为config没有正确执行，或者是调用的JSAPI没有传入config的jsApiList参数中。建议按如下顺序检查：</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp;1.确认config正确通过。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp;2.如果是在页面加载好时就调用了JSAPI，则必须写在wx.ready的回调中。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">&nbsp; &nbsp;3.确认config的jsApiList参数包含了这个JSAPI。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">4.permission denied该公众号没有权限使用这个JSAPI，或者是调用的JSAPI没有传入config的jsApiList参数中（部分接口需要认证之后才能使用）。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">5.function not exist当前客户端版本不支持该接口，请升级到新版体验。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">6.为什么6.0.1版本config:ok，但是6.0.2版本之后不ok（因为6.0.2版本之前没有做权限验证，所以config都是ok，但这并不意味着你config中的签名是OK的，请在6.0.2检验是否生成正确的签名以保证config在高版本中也ok。）</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">7.在iOS和Android都无法分享（请确认公众号已经认证，只有认证的公众号才具有分享相关接口权限，如果确实已经认证，则要检查监听接口是否在wx.ready回调函数中触发）</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">8.服务上线之后无法获取jsapi_ticket，自己测试时没问题。（因为access_token和jsapi_ticket必须要在自己的服务器缓存，否则上线后会触发频率限制。请确保一定对token和ticket做缓存以减少2次服务器请求，不仅可以避免触发频率限制，还加快你们自己的服务速度。目前为了方便测试提供了1w的获取量，超过阀值后，服务将不再可用，<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">请确保在服务上线前一定全局缓存access_token和jsapi_ticket，两者有效期均为7200秒，否则一旦上线触发频率限制，服务将不再可用</span>）。</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">9.uploadImage怎么传多图（目前只支持一次上传一张，多张图片需等前一张图片上传之后再调用该接口）</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">10.没法对本地选择的图片进行预览（chooseImage接口本身就支持预览，不需要额外支持）</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">11.通过a链接(例如先通过微信授权登录)跳转到b链接，invalid signature签名失败（后台生成签名的链接为使用jssdk的当前链接，也就是跳转后的b链接，请不要用微信登录的授权链接进行签名计算，后台签名的url一定是使用jssdk的当前页面的完整url除去'#'部分）</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">12.出现config:fail错误（这是由于传入的config参数不全导致，请确保传入正确的appId、timestamp、nonceStr、signature和需要使用的jsApiList）</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">13.如何把jsapi上传到微信的多媒体资源下载到自己的服务器（请参见文档中uploadVoice和uploadImage接口的备注说明）</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">14.Android通过jssdk上传到微信服务器，第三方再从微信下载到自己的服务器，会出现杂音（微信团队已经修复此问题，目前后台已优化上线）</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">15.绑定父级域名，是否其子域名也是可用的（是的，合法的子域名在绑定父域名之后是完全支持的）</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">16.在iOS微信6.1版本中，分享的图片外链不显示，只能显示公众号页面内链的图片或者微信服务器的图片，已在6.2中修复</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">17.是否需要对低版本自己做兼容（jssdk都是兼容低版本的，不需要第三方自己额外做更多工作，但有的接口是6.0.2新引入的，只有新版才可调用）</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">18.该公众号支付签名无效，无法发起该笔交易（请确保你使用的jweixin.js是官方线上版本，不仅可以减少用户流量，还有可能对某些bug进行修复，拷贝到第三方服务器中使用，官方将不对其出现的任何问题提供保障，具体支付签名算法可参考 <a href="#wxzf" target="_self">JSSDK微信支付一栏</a>）</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">19.目前Android微信客户端不支持pushState的H5新特性，所以使用pushState来实现web app的页面会导致签名失败，此问题已在Android6.2中修复</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">20.uploadImage在chooseImage的回调中有时候Android会不执行，Android6.2会解决此问题，若需支持低版本可以把调用uploadImage放在setTimeout中延迟100ms解决</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">21.require subscribe错误说明你没有订阅该测试号，该错误仅测试号会出现</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">22.getLocation返回的坐标在openLocation有偏差，因为getLocation返回的是gps坐标，openLocation打开的腾讯地图为火星坐标，需要第三方自己做转换，6.2版本开始已经支持直接获取火星坐标</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">23.查看公众号（未添加）: "menuItem:addContact"不显示，目前仅有从公众号传播出去的链接才能显示，来源必须是公众号</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">24.ICP备案数据同步有一天延迟，所以请在第二日绑定</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="fl6"></a>附录6-DEMO页面和示例代码</span></strong></span></p>
<p><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">DEMO页面：</span></strong></span></p>
<p style="text-align: left;"><a href="http://203.195.235.76/jssdk/" target="_blank" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">http://demo.open.weixin.qq.com/jssdk</span></a></p>
<p style="text-align: left;"><img src="http://mmbiz.qpic.cn/mmbiz/PiajxSqBRaEIQxibpLbyuSK39dMUJfWKTT3w5O5mich0nbKnpPnpl0QzuWuncBtibiaZQlmH1MGf3HoicWNIeaV4dXUg/0?wx_fmt=png" title="" alt=""></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';">示例代码：</span></strong></span></p>
<p style="text-align: left;"><a href="http://demo.open.weixin.qq.com/jssdk/sample.zip" target="_blank" style="font-family: arial, helvetica, sans-serif; font-size: 16px; text-decoration: underline;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">http://demo.open.weixin.qq.com/jssdk/sample.zip</span></a></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">备注：链接中包含<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">php、java、nodejs以及python</span>的示例代码供第三方参考，第三方<span style="font-family: 微软雅黑, 'Microsoft YaHei'; font-size: 16px; color: rgb(255, 0, 0);">切记要对获取的accesstoken以及jsapi_ticket进行缓存</span>以确保不会触发频率限制。</span></p>
<p style="text-align: left;"><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"><strong><span style="font-size: 16px; font-family: 微软雅黑, 'Microsoft YaHei';"><a name="fl7"></a>附录7-问题反馈</span></strong></span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">邮箱地址：weixin-open@qq.com</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">邮件主题：【微信JS-SDK反馈】</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">邮件内容说明：</span></p>
<p style="text-align: left;"><span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">用简明的语言描述问题所在，并交代清楚遇到该问题的场景，可附上截屏图片，微信团队会尽快处理你的反馈。</span></p>
<p><span style="font-size: 14px; font-family: 微软雅黑, 'Microsoft YaHei';"></span></p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>