
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link onerror="wx_loaderror(this)" onerror="wx_loaderror(this)" rel="stylesheet" type="text/css" href="https://res.wx.qq.com/mpres/htmledition/style/page/resource/res_iframe2f613f.css"/></head>
<body class="page_doc">
<div class="main_hd"><h2>创建红包活动</h2>
</div>
<div class="main_bd">
<div class="article_box">
<div class="inner">
<div class="news_content">
<p><span><strong>接口说明</strong>
<br></span></p>
<p><span>创建红包活动，设置红包活动有效期，红包活动开关等基本信息，返回活动id</span></p>
<p><span><strong>接口调用说明</strong></span></p>
<div data-tag="backcolor">
<p><span>服务器端调用<br>http请求方式: POST<br>URL: https://api.weixin.qq.com/shakearound/lottery/addlotteryinfo?access_token=ACCESSTOKEN&amp;use_template=1&amp;logo_url=LOGO_URL
<br></span></p>
</div>
<p><span><strong>请求参数说明</strong></span></p>
<table class="table" width="951">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="221" valign="top"><span>参数</span></td><td class="table_cell" width="208" valign="top"><span>类型</span></td><td class="table_cell" width="222" valign="top"><span>说明</span></td></tr>
<tr><td class="table_cell" width="221"><span>access_token</span></td><td class="table_cell" width="208"><span>string</span></td><td class="table_cell" width="222"><span>accesstoken,以参数的形式拼装在url后</span></td></tr>
<tr><td class="table_cell" width="221"><span>use_template</span></td><td class="table_cell" width="208"><span>int</span></td><td class="table_cell" width="222"><span>是否使用模板，1：使用，2：不使用,以参数的形式拼装在url后。（模版即交互流程图中的红包加载页，使用模板用户不需要点击可自动打开红包；不使用模版需自行开发HTML5页面，并在页面调用红包jsapi）</span></td></tr>
<tr><td class="table_cell" width="221"><span>logo_url</span></td><td class="table_cell" width="208"><span>string</span></td><td class="table_cell" width="222"><span>使用模板页面的logo_url，不使用模板时可不加。展示在摇一摇界面的消息图标。图片尺寸为120x120。 &nbsp;&nbsp;</span></td></tr>
</tbody>
</table>
<p>
<br></p>
<p><span>POST BODY：JSON格式的结构体</span></p>
<table class="table" width="951">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="219" valign="top"><span>参数</span></td><td class="table_cell" width="204" valign="top"><span>类型</span></td><td class="table_cell" width="227" valign="top"><span>说明</span></td></tr>
<tr><td class="table_cell" width="219"><span>title</span></td><td class="table_cell" width="204"><span>string</span></td><td class="table_cell" width="227"><span>抽奖活动名称（选择使用模板时，也作为摇一摇消息主标题），最长6个汉字，12个英文字母。</span></td></tr>
<tr><td class="table_cell" width="219"><span>desc</span></td><td class="table_cell" width="204"><span>string</span></td><td class="table_cell" width="227"><span>抽奖活动描述（选择使用模板时，也作为摇一摇消息副标题），最长7个汉字，14个英文字母。</span></td></tr>
<tr><td class="table_cell" width="219"><span>onoff</span></td><td class="table_cell" width="204"><span>int</span></td><td class="table_cell" width="227"><span>抽奖开关。0关闭，1开启，默认为1</span></td></tr>
<tr><td class="table_cell" width="219"><span>begin_time</span></td><td class="table_cell" width="204"><span>long</span></td><td class="table_cell" width="227"><span>抽奖活动开始时间，unix时间戳，单位秒</span></td></tr>
<tr><td class="table_cell" width="219"><span>expire_time</span></td><td class="table_cell" width="204"><span>long</span></td><td class="table_cell" width="227"><span>抽奖活动结束时间，unix时间戳，单位秒,红包活动有效期最长为91天</span></td></tr>
<tr><td class="table_cell" width="219"><span>sponsor_appid</span></td><td class="table_cell" width="204"><span>string</span></td><td class="table_cell" width="227"><span>红包提供商户公众号的appid，需与预下单中的公众账号appid（wxappid）一致</span></td></tr>
<tr><td class="table_cell" width="219"><span>total</span></td><td class="table_cell" width="204"><span>long</span></td><td class="table_cell" width="227"><span>红包总数，红包总数是录入红包ticket总数的上限，因此红包总数应该大于等于预下单时红包ticket总数。</span></td></tr>
<tr><td class="table_cell" width="219"><span>jump_url</span></td><td class="table_cell" width="204"><span>string</span></td><td class="table_cell" width="227"><span>红包关注界面后可以跳转到第三方自定义的页面</span></td></tr>
<tr><td class="table_cell" width="219"><span>key</span></td><td class="table_cell" width="204"><span>string</span></td><td class="table_cell" width="227"><span>开发者自定义的key，用来生成活动抽奖接口的签名参数，长度32位。使用方式见sign生成规则</span></td></tr>
</tbody>
</table>
<p><span><strong>请求示例</strong></span></p>
<div data-tag="backcolor">
<p><span>Content-Type: application/json Post Body:<br>{ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>"title": "title", &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br>"desc": "desc", &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br>"onoff": 1, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>"begin_time": 1428854400, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>"expire_time": 1428940800, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>"sponsor_appid": "wxxxxxxxxxxxxxx",<br>"total": 10,<br>"jump_url": JUMP_URL, &nbsp; &nbsp;&nbsp;<br>"key": "keyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy" &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>}
<br></span></p>
</div>
<p><span><strong>返回数据说明</strong></span></p>
<table class="table">
<tbody class="tbody">
<tr class="firstRow thead"><td class="table_cell" width="451" valign="top"><span>参数</span></td><td class="table_cell" width="451" valign="top"><span>类型</span></td><td class="table_cell" width="451" valign="top"><span>说明</span></td></tr>
<tr><td class="table_cell"><span>errcode</span></td><td class="table_cell"><span>int</span></td><td class="table_cell"><span>错误码。0为成功，其他为失败。详细请参考错误码表</span></td></tr>
<tr><td class="table_cell"><span>errmsg</span></td><td class="table_cell"><span>string</span></td><td class="table_cell"><span>错误信息</span></td></tr>
<tr><td class="table_cell"><span>lottery_id</span></td><td class="table_cell"><span>string</span></td><td class="table_cell"><span>生成的红包活动id</span></td></tr>
<tr><td class="table_cell"><span>page_id</span></td><td class="table_cell"><span>int</span></td><td class="table_cell"><span>生成的模板页面ID &nbsp;</span></td></tr>
</tbody>
</table>
<p>
<br></p>
<p><span><strong>示例</strong></span></p>
<div data-tag="backcolor">
<p><span>{ &nbsp; &nbsp;&nbsp;<br>"errcode":0, &nbsp; &nbsp;&nbsp;<br>"errmsg":"", &nbsp; &nbsp;&nbsp;<br>"lottery_id":"xxxxxxllllll",&nbsp;<br>"page_id":1,&nbsp;<br>}
<br></span></p>
</div>
<p>
<br></p>
</div>
</div>
</div>
</div>
</body>
</html>