
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link onerror="wx_loaderror(this)" onerror="wx_loaderror(this)" rel="stylesheet" type="text/css" href="https://res.wx.qq.com/mpres/htmledition/style/page/resource/res_iframe2f613f.css"/></head>
<body class="page_doc">
<div class="main_hd"><h2>第三方开发者模式</h2>
</div>
<div class="main_bd">
<div class="article_box">
<div class="inner">
<div class="news_content">
<p>
<br></p>
<p><span></span></p>
<p><span><strong><span>更新通知</span></strong></span></p>
<table cellspacing="0" cellpadding="4" align="left" width="967">
<tbody>
<tr class="firstRow thead"><th class="table_cell" align="left" valign="top"><span>版本号</span></th><th class="table_cell"><span>更新内容</span></th><th class="table_cell"><span>更新时间</span></th></tr>
<tr><td class="table_cell" width="111"><span>V1.0</span></td><td class="table_cell" width="463">
<p><span><span>第三方代制模式，支持第三方为子商户代创建会员卡</span></span></p>
</td><td class="table_cell" width="98"><span>2016-3-20</span></td></tr>
<tr><td class="table_cell" colspan="1" rowspan="1" width="111"><span>&nbsp; &nbsp; &nbsp;V1.1</span></td><td class="table_cell" colspan="1" rowspan="1" width="463">
<p><span>&nbsp; 第三方代制模式，支持开发者创建有app_id的子商户，创建有app_id</span><span>的子商户卡券时，</span><span>领卡页面及卡券详情页支持关联配置子商户公众号，但卡券数据仍归属第三方账号</span></p>
</td><td class="table_cell" colspan="1" rowspan="1" width="98"><span>&nbsp; &nbsp; &nbsp;2016-4-28</span></td></tr>
<tr><td class="table_cell" colspan="1" rowspan="1" width="111">
<p><span>&nbsp; &nbsp; &nbsp;V1.2</span></p>
</td><td class="table_cell" colspan="1" rowspan="1" width="463">
<p><span>第三方开发者代制（有公众号模式）名称逐步规范为“第三方强授权模式”；</span></p>
<p><span>第三方开发者代制（无公众号模式）名称逐步规范为“第三方代制模式”；</span></p>
<p><span>第三方普通授权模式、强授权模式、代制模式，统称第三方开发者模式。</span></p>
</td><td class="table_cell" colspan="1" rowspan="1" width="98"><span>&nbsp; &nbsp; &nbsp; 2016-5-17</span></td></tr>
</tbody>
</table>
<p>
<br></p>
<p>
<br></p>
<p>
<br></p>
<p><span>
<br></span></p>
<p>
<br></p>
<p>
<br></p>
<p>
<br></p>
<p>
<br></p>
<p>
<br></p>
<p><span><strong>
<br></strong></span></p>
<p><span><strong>第三方开发者模式</strong></span></p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/PiajxSqBRaEIQxibpLbyuSK3Gu8V6AFNUz6icIicQCWa4cm5C6QXNdkxeG3A3oIKQESxXLvnCoycCv4lpeIylDlRfw/0?wx_fmt=png" title="" alt="" width="742" height="564"></p>
<p><span>1、具备认证公众号的商家，可用商家自己公众号申请卡券功能后，通过微信开放平台“公众号登陆授权”授权给开发者，代为开发和应用卡券功能，卡券数据及会员归属在商家自己公众号下。该模式简称为“普通授权”，无额外开发接口，参考卡券整套基础接口即可。</span></p>
<p><span>2、针对没有公众号或未认证的公众号，或者有认证公众号但不想自己运营公众号的商家，为了降低商户接入成本，可由第三方背书接入。子商户将卡券制作权限授权给开发者所在企业，由开发者所在企业为子商户作为信用背书，并可以帮助 没有能力制作卡券的商户制作卡券。</span></p>
<p><span>目前，这种降低商户门槛，由第三方背书接入的开发者模式分为：第三方代制模式（<a href="https://mp.weixin.qq.com/cgi-bin/announce?action=getannouncement&amp;key=1459357007&amp;version=1&amp;lang=zh_CN&amp;platform=2" target="_blank">查看介绍及指引文档</a>）和第三方强授权模式（<a href="https://open.weixin.qq.com/cgi-bin/frame?t=cardticket/card_assist_faq_tmpl&amp;lang=zh_CN" target="_blank">查看介绍及指引文档</a>）。</span><span>这两种模式需额外接口。参考如下接口文档。</span></p>
<p>
<br></p>
<table id="toc">
<tbody>
<tr class="firstRow thead"><td class="table_cell">
<h2><span>目录</span></h2>
<p><span>
<br></span></p>
<ul class=" list-paddingleft-2">
<li>
<p><span><a href="#1" target="_self" textvalue="1&nbsp;第三方开发者代制（无公众号模式）"><span>1</span>&nbsp;第三方代制模式</a></span></p>
</li>
<li>
<p><span><a href="#1" target="_self" textvalue="1&nbsp;第三方开发者代制（无公众号模式）"></a>&nbsp; &nbsp;</span><a href="#1.1" target="_self" textvalue="1.1&nbsp;创建子商户接口"><span>1.1</span>&nbsp;创建子商户接口</a></p>
</li>
<li>
<p><span>&nbsp; &nbsp;</span><a href="#1.2" target="_self" textvalue="1.2&nbsp;子商户审核事件推送"><span>1.2</span>&nbsp;子商户审核事件推送</a></p>
</li>
<li>
<p><span>&nbsp; &nbsp;</span><a href="#1.3" target="_self" textvalue="1.3&nbsp;卡券开放类目查询接口"><span>1.3</span>&nbsp;卡券开放类目查询接口</a></p>
</li>
<li>
<p><span>&nbsp; &nbsp;</span><a href="#1.4" target="_self" textvalue="1.4&nbsp;更新子商户接口"><span>1.4</span>&nbsp;更新子商户接口</a></p>
</li>
<li>
<p><span>&nbsp; &nbsp;<a href="#1.5" target="_self" textvalue="1.5&nbsp;拉取单个子商户信息接口"><span>1.5</span>&nbsp;拉取单个子商户信息接口</a></span></p>
<p><span>&nbsp; &nbsp;<a href="#1.6" target="_self" textvalue="1.6&nbsp;批量拉取子商户信息接口"><span>1.6</span>&nbsp;批量拉取子商户信息接口</a></span></p>
<p><span>&nbsp; &nbsp;<a href="#1.7" target="_parent"><span>1.7</span>&nbsp;创建子商户卡券接口</a></span></p>
</li>
<li>
<p><span>&nbsp; &nbsp;</span><a href="#1.8" target="_self"><span>1.8</span>&nbsp;错误码说明</a></p>
</li>
<li>
<p><span>&nbsp; &nbsp;</span><a href="#1.9" target="_self"><span>1.9</span>&nbsp;联系我们</a></p>
</li>
<li>
<p><span><a href="#2" target="_self"><span>2</span>&nbsp;第三方强授权模式</a></span></p>
</li>
<li>
<p><span>&nbsp; &nbsp;<a href="#2.1" target="_self"><span>2.1</span>&nbsp;母商户资质申请接口</a></span></p>
<p><span>&nbsp; &nbsp;<a href="#2.2" target="_self"><span>2.2</span>&nbsp;母商户资质审核查询接口</a></span></p>
<p><span>&nbsp; &nbsp;<a href="#2.3" target="_self"><span>2.3</span>&nbsp;子商户资质申请接口</a></span></p>
<p><span>&nbsp; &nbsp;<a href="#2.4" target="_self"><span>2.4</span>&nbsp;授权子商户审核事件推送</a></span></p>
<p><span>&nbsp; &nbsp;<a href="#2.5" target="_self"><span>2.5</span>&nbsp;子商户资质审核查询接口</a></span></p>
<p><span>&nbsp; &nbsp;<a href="#2.6" target="_self"><span>2.6</span>&nbsp;图片上传media接口</a></span></p>
<p><span>&nbsp; &nbsp;<a href="#2.7" target="_self"><span>2.7</span>&nbsp;卡券开放类目查询接口</a></span></p>
<p><span>&nbsp; &nbsp;<a href="#2.8" target="_self"><span>2.8</span>&nbsp;拉取单个子商户信息接口</a></span></p>
<p><span>&nbsp; &nbsp;<a href="#2.9" target="_self"><span>2.9</span>&nbsp;拉取子商户列表接口</a></span></p>
<p><span>&nbsp; &nbsp;<a href="#2.10" target="_self"><span>2.10</span>&nbsp;新增第三方强授权相关接口</a></span></p>
<p><span>&nbsp; &nbsp;<a href="#2.11" target="_self" textvalue="2.11&nbsp;错误码说明"><span>2.11</span>&nbsp;错误码说明</a></span></p>
</li>
</ul>
</td></tr>
</tbody>
</table>
<h2><span><strong><a name="1"></a>1 第三方代制模式</strong></span></h2>
<p><span><strong>模式概述</strong></span></p>
<p><span>为了降低商户接入卡券的难度，微信公众平台向所有已具备卡券功能的公众号开放“第三方代制”功能。申请并开通此功能后，具备开发能力的开发者，可通过API接口协助无公众号的商户快速接入并使用卡券。协助制券的开发者称为“母商户”，被协助制券的商户称为“子商户”。</span></p>
<p><span>母商户需将旗下子商户资料提前上传报备，通过审核方可生效。在制券过程中允许母商户从报备的子商户列表中，选择一个子商户协助制券。</span></p>
<p><span><strong>
<br></strong></span></p>
<p><span><strong>开通步骤</strong></span></p>
<p><span>第一步，申请路径：微信公众平台-卡券功能-右上角-商户信息-第三方代制模式。</span></p>
<p><span>第二步，商户通过微信公众平台或API接口，提交子商户资料、资质，审核通过后可使用该子商户信息制券。</span></p>
<p><span>第三步，调用API接口创建卡券时，需传入该模式的特有字段，具体字段参考创建子商户接口的返回字段说明。该模式下，仅创建卡券接口有变动，其余接口和卡券整体接口的使用保持不变。详情参考</span><a href="http://mp.weixin.qq.com/wiki" target="_blank" textvalue="微信卡券接口文档"><span>微信卡券接口文档</span></a></p>
<p>
<br></p>
<h3><span><strong><a name="1.1"></a>1.1 创建子商户接口</strong></span></h3>
<p><span><strong>接口说明</strong></span></p>
<p><span>支持母商户调用该接口传入子商户的相关资料，并获取子商户ID，用于子商户的卡券功能管理。 子商户的资质包括：商户名称、商户logo（图片）、卡券类目、授权函（扫描件或彩照）、授权函有效期截止时间。</span></p>
<p><span><strong>
<br></strong></span></p>
<p><span><strong>接口详情</strong></span></p>
<pre><span>HTTP请求方式:&nbsp;POST&nbsp;<br>URL:https://api.weixin.qq.com/card/submerchant/submit?access_token=TOKEN
<br></span></pre>
<p><span><strong>
<br></strong></span></p>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>POST数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>
<br></strong></span></p>
<p><span><strong>POST数据示例</strong></span></p>
<pre><span>{<br> "info": {<br> "brand_name": "aaaaaa",<br> "app_id"："xxxxxxxxxxx",<br> "logo_url": "http://mmbiz.xxxx",<br> "protocol": "xxxxxxxxxx",<br> "agreement_media_id":"xxxxxxxxxx",<br> "operator_media_id":"xxxxxxxx",<br> "end_time": 1438990559,<br> "primary_category_id": 1,<br> "secondary_category_id": 101<br> }<br>}
<br></span></pre>
<p>
<br><span><strong>字段说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>必填</span></th><th class="table_cell"><span>类型</span></th><th class="table_cell"><span>示例</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>info</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>json结构</span></td><td class="table_cell">
<br></td><td class="table_cell">
<br></td></tr>
<tr><td class="table_cell"><span>app_id</span><span></span></td><td class="table_cell">否</td><td class="table_cell"><span>String(36)</span></td><td class="table_cell"><span>wxxxxxxxxxxx</span></td><td class="table_cell"><span>子商户的公众号app_id，配置后子商户卡券券面上的app_id为该app_id。注意：该app_id须经过认证</span></td></tr>
<tr><td class="table_cell"><span>brand_name</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>String(36)</span></td><td class="table_cell"><span>兰州拉面</span></td><td class="table_cell"><span>子商户名称（12个汉字内），该名称将在制券时填入并显示在卡券页面上</span></td></tr>
<tr><td class="table_cell"><span>logo_url</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>string(128)</span></td><td class="table_cell"><a href="http://mmbiz.xxxx/" class="external free" rel="nofollow" target="_blank"><span>http://mmbiz.xxxx</span></a></td><td class="table_cell"><span>子商户logo，可通过</span><a href="http://mp.weixin.qq.com/wiki/13/650e7e480dceeaaa0348d92f92f5e55d.html" class="external text" rel="nofollow"><span>上传logo接口</span></a><span>获取。该logo将在制券时填入并显示在卡券页面上</span></td></tr>
<tr><td class="table_cell"><span>protocol</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>String(36)</span></td><td class="table_cell"><span>mdasdfkl ：</span></td><td class="table_cell"><span>授权函ID，即通过</span><a href="http://mp.weixin.qq.com/wiki/0/6ebbf79d99f7a435ed60cfb094867174.html" class="external text" rel="nofollow"><span>上传临时素材接口</span></a><span>上传授权函后获得的meida_id</span></td></tr>
<tr><td class="table_cell"><span>end_time</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>unsigned int</span></td><td class="table_cell"><span>15300000</span></td><td class="table_cell"><span>授权函有效期截止时间（东八区时间，单位为秒），需要与提交的扫描件一致</span></td></tr>
<tr><td class="table_cell"><span>primary_category_id</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>int</span></td><td class="table_cell"><span>2</span></td><td class="table_cell"><span>一级类目id,可以通过本文档中接口查询</span></td></tr>
<tr><td class="table_cell"><span>secondary_category_id</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>int</span></td><td class="table_cell"><span>2</span></td><td class="table_cell"><span>二级类目id，可以通过本文档中接口查询</span></td></tr>
<tr><td class="table_cell"><span>agreement_media_id</span></td><td class="table_cell"><span>否</span></td><td class="table_cell"><span>string(36)</span></td><td class="table_cell"><span>2343343424</span></td><td class="table_cell"><span>营业执照或个体工商户营业执照彩照或扫描件</span></td></tr>
<tr><td class="table_cell"><span>operator_media_id</span></td><td class="table_cell"><span>否</span></td><td class="table_cell"><span>string(36)</span></td><td class="table_cell"><span>2343343424</span></td><td class="table_cell"><span>营业执照内登记的经营者身份证彩照或扫描件</span></td></tr>
</tbody>
</table>
<p><span>
<br></span></p>
<p><em><span>备注：授权函请在</span></em><a href="https://mp.weixin.qq.com/cgi-bin/announce?action=getannouncement&amp;key=1459357007&amp;version=1&amp;lang=zh_CN&amp;platform=2" target="_blank" textvalue="《第三方代制模式指引文档》"><em><span>《第三方代制模式指引文档》</span></em></a><em><span>内下载，手填并加盖鲜章后，上传彩色扫描件或彩照。</span></em></p>
<p><em><span>1、授权函必须加盖企业公章，或个体户店铺章、发票专用章、财务章、合同章等具备法律效力的盖章，不可使用个人私章；</span></em></p>
<p><em><span>2、若子商户是个体工商户，且无上述公章，授权函可用个体工商户经营者手印代替公章，且须同时额外上传《个体工商户营业执照》及该执照内登记的经营者的身份证彩照。（本方案仅适用于子商户是个体工商户，且无公章的场景。其他场景必须在授权函加盖公章）</span></em></p>
<p><span><strong>
<br></strong></span></p>
<p><span><strong>返回数据</strong></span></p>
<p><strong><span></span></strong></p>
<pre>{
"info":&nbsp;{
&nbsp;"merchant_id":&nbsp;12,
&nbsp;"app_id":"xxxxxxxxxxxxx",
&nbsp;"create_time":&nbsp;1438790559,
&nbsp;"update_time":&nbsp;1438790559,
&nbsp;"brand_name":&nbsp;"aaaaaa",
&nbsp;"logo_url":&nbsp;"http://mmbiz.xxxx",
&nbsp;"status":&nbsp;"CHECKING",
&nbsp;"begin_time":&nbsp;1438790559,
&nbsp;"end_time":&nbsp;1438990559,
&nbsp;"primary_category_id":&nbsp;1,
&nbsp;"secondary_category_id":&nbsp;101
}
}</pre>
<p><strong><span>特别注意：</span></strong></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>merchant_id</span></td><td class="table_cell"><span>子商户id，对于一个母商户公众号下唯一</span></td></tr>
<tr><td class="table_cell"><span>create_time</span></td><td class="table_cell"><span>子商户信息创建时间</span></td></tr>
<tr><td class="table_cell"><span>update_time</span></td><td class="table_cell"><span>子商户信息更新时间</span></td></tr>
<tr><td class="table_cell"><span>brand_name</span></td><td class="table_cell"><span>子商户名称（12个汉字内），该名称将在制券时填入并显示在卡券页面上。</span></td></tr>
<tr><td class="table_cell"><span>logo_url</span></td><td class="table_cell"><span>子商户logo，可通过上传logo接口获取。该logo将在制券时填入并显示在卡券页面上</span></td></tr>
<tr><td class="table_cell"><span>status</span></td><td class="table_cell"><span>子商户状态，"CHECKING" 审核中, "APPROVED" , 已通过；"REJECTED"被驳回, "EXPIRED"协议已过期</span></td></tr>
<tr><td class="table_cell"><span>bengin_time</span></td><td class="table_cell"><span>创建时间（非协议开始时间）</span></td></tr>
<tr><td class="table_cell"><span>end_time</span></td><td class="table_cell"><span>授权函有效期截止时间（东八区时间，单位为秒）</span></td></tr>
<tr><td class="table_cell"><span>primary_category_id</span></td><td class="table_cell"><span>子商户一级类目</span></td></tr>
<tr><td class="table_cell"><span>secondary_category_id</span></td><td class="table_cell"><span>子商户二级类目</span></td></tr>
</tbody>
</table>
<p><em><span>若子商户资料通过微信公众平台提交，可在微信公众平台卡券功能-子商户管理-子商户详情里查看子商户ID，或通过子商户创建接口返回子商户ID，或通过子商户信息拉取接口获取子商户ID。</span></em></p>
<h3><span><strong>
<br></strong></span></h3>
<h3><span><strong><a name="1.2"></a>1.2 子商户审核事件推送</strong></span></h3>
<p><span>开发者所代理的子商户审核通过后，会收到微信服务器发送的事件推送。</span></p>
<pre><span>&lt;xml&gt;<br>&lt;ToUserName&gt;&lt;![CDATA[toUser]]&gt;&lt;/ToUserName&gt; <br>&lt;FromUserName&gt;&lt;![CDATA[FromUser]]&gt;&lt;/FromUserName&gt; <br>&lt;CreateTime&gt;123456789&lt;/CreateTime&gt; <br>&lt;MsgType&gt;&lt;![CDATA[event]]&gt;&lt;/MsgType&gt; <br>&lt;Event&gt;&lt;![CDATA[card_merchant_check_result]]&gt;&lt;/Event&gt; <br>&lt;MerchantId&gt;0&lt;/MerchantId&gt;<br>&lt;IsPass&gt;1&lt;/IsPass&gt;<br>&lt;Reason&gt;&lt;![CDATA[reason]]&gt;&lt;/Reason&gt;<br>&lt;/xml&gt;
<br></span></pre>
<p><span><strong>
<br></strong></span></p>
<p><span><strong>字段说明</strong></span></p>
<table cellspacing="0" cellpadding="4" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>ToUserName</span></td><td class="table_cell"><span>开发者微信号。</span></td></tr>
<tr><td class="table_cell"><span>FromUserName</span></td><td class="table_cell"><span>发送方帐号（一个OpenID）。</span></td></tr>
<tr><td class="table_cell"><span>CreateTime</span></td><td class="table_cell"><span>消息创建时间 （整型）。</span></td></tr>
<tr><td class="table_cell"><span>MsgType</span></td><td class="table_cell"><span>消息类型，event。</span></td></tr>
<tr><td class="table_cell"><span>Event</span></td><td class="table_cell"><span>事件类型，card_merchant_check_result(子商户审核事件)</span></td></tr>
<tr><td class="table_cell"><span>MerchantId</span></td><td class="table_cell"><span>子商户ID。</span></td></tr>
<tr><td class="table_cell"><span>IsPass</span></td><td class="table_cell"><span>是否通过，为1时审核通过。</span></td></tr>
<tr><td class="table_cell"><span>Reason</span></td><td class="table_cell"><span>驳回的原因</span></td></tr>
</tbody>
</table>
<h3><span><strong><a name="1.3"></a>1.3卡券开放类目查询接口</strong></span></h3>
<p><span><strong>接口说明</strong></span></p>
<p><span>通过调用该接口查询卡券开放的类目ID，类目会随业务发展变更，请每次用接口去查询获取实时卡券类目。</span></p>
<p><span>注意：</span></p>
<p><span>1.本接口查询的返回值还有卡券资质ID,此处的卡券资质为：已微信认证的公众号通过微信公众平台申请卡券功能时，所需的资质。</span></p>
<p><span>2.对于第三方开发者代制（无公众号）模式，子商户无论选择什么类目，均暂不需按照此返回提供资质，返回值仅参考类目ID 即可。</span></p>
<p>
<br><span><strong>接口详情</strong></span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>HTTP请求方式:&nbsp;GET&nbsp;<br>URL:https://api.weixin.qq.com/card/getapplyprotocol?access_token=TOKEN
<br></span></pre>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>GET数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>返回数据</strong></span></p>
<pre><span>{<br> &nbsp; "category": [<br> &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "primary_category_id": 1,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "category_name": "美食",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "secondary_category": [<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "secondary_category_id": 101,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "category_name": "粤菜",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "need_qualification_stuffs": [<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "food_service_license_id",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "food_service_license_bizmedia_id"<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ],<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "can_choose_prepaid_card": 1,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "can_choose_payment_card": 1<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; }<br> &nbsp; ],<br> &nbsp; "errcode": 0,<br> &nbsp; "errmsg": "ok"<br>}
<br></span></pre>
<p>
<br></p>
<p>
<br></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>errcode</span></td><td class="table_cell"><span>错误码，0为正常。</span></td></tr>
<tr><td class="table_cell"><span>errmsg</span></td><td class="table_cell"><span>错误信息。</span></td></tr>
<tr><td class="table_cell"><span>primary_category_id</span></td><td class="table_cell"><span>一级目录id</span></td></tr>
<tr><td class="table_cell"><span>secondary_category_id</span></td><td class="table_cell"><span>二级目录id</span></td></tr>
</tbody>
</table>
<p>
<br></p>
<p>
<br></p>
<h3><span><strong><a name="1.4"></a>1.4&nbsp;更新子商户接口</strong></span></h3>
<p><span><strong>接口说明</strong></span></p>
<p><span>支持调用该接口更新子商户信息。&nbsp;</span></p>
<p><span><strong>接口详情</strong></span></p>
<p><span>‘<strong>接口调用请求说明</strong></span></p>
<pre><span>http请求方式:&nbsp;POST&nbsp;https://api.weixin.qq.com/card/submerchant/update?access_token=TOKEN
<br></span></pre>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>POST数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>POST数据示例</strong></span></p>
<pre><span>{<br> &nbsp;"info": {<br> &nbsp;"merchant_id": 12,<br> &nbsp;"app_id":"xxxxxxxxxxxxx",<br> &nbsp;"brand_name": "aaaaaa",<br> &nbsp;"logo_url": "http://mmbiz.xxxx",<br> &nbsp;"protocol": "media_id",<br> &nbsp;"agreement_media_id":"xxxxxxxxxx",<br> &nbsp;"operator_media_id":"xxxxxxxx",<br> &nbsp;"end_time": 1438990559,<br> &nbsp;"primary_category_id": 1,<br> &nbsp;"secondary_category_id": 101<br> }<br>}
<br></span></pre>
<p>
<br></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>必填</span></th><th class="table_cell"><span>类型</span></th><th class="table_cell"><span>示例</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>info</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>json结构</span></td><td class="table_cell">
<br></td><td class="table_cell">
<br></td></tr>
<tr><td class="table_cell"><span>merchant_id</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>int</span></td><td class="table_cell"><span>12</span></td><td class="table_cell"><span>子商户id，一个母商户公众号下唯一。</span></td></tr>
<tr><td class="table_cell" colspan="1" rowspan="1"><span>app_id</span></td><td class="table_cell" colspan="1" rowspan="1">否</td><td class="table_cell" colspan="1" rowspan="1"><span>String(36)</span></td><td class="table_cell" colspan="1" rowspan="1"><span>wxxxxxxxxxxx</span></td><td class="table_cell" colspan="1" rowspan="1"><span>子商户的公众号app_id，配置后子商户卡券券面上的app_id为该app_id。注意：该app_id须经过认证</span></td></tr>
<tr><td class="table_cell"><span>brand_name</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>String(36)</span></td><td class="table_cell"><span>兰州拉面</span></td><td class="table_cell"><span>子商户名称（12个汉字内），该名称将在制券时填入并显示在卡券页面上</span></td></tr>
<tr><td class="table_cell"><span>logo_url</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>string(128)</span></td><td class="table_cell"><a href="http://mmbiz.xxxx/" class="external free" rel="nofollow" target="_blank"><span>http://mmbiz.xxxx</span></a></td><td class="table_cell"><span>子商户logo，可通过</span><a href="http://mp.weixin.qq.com/wiki/13/650e7e480dceeaaa0348d92f92f5e55d.html" class="external text" rel="nofollow"><span>上传logo接口</span></a><span>获取。该logo将在制券时填入并显示在卡券页面上</span></td></tr>
<tr><td class="table_cell"><span>protocol</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>String(36)</span></td><td class="table_cell"><span>mdasdfkl ：</span></td><td class="table_cell"><span>授权函ID ，即通过</span><a href="http://mp.weixin.qq.com/wiki/0/6ebbf79d99f7a435ed60cfb094867174.html" class="external text" rel="nofollow"><span>上传临时素材接口</span></a><span>上传授权函后获得的meida_id</span></td></tr>
<tr><td class="table_cell"><span>end_time</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>unsigned int</span></td><td class="table_cell"><span>15300000</span></td><td class="table_cell"><span>授权函有效期截止时间（东八区时间，单位为秒），需要与提交的扫描件一致</span></td></tr>
<tr><td class="table_cell"><span>agreement_media_id</span></td><td class="table_cell"><span>否</span></td><td class="table_cell"><span>string(36)</span></td><td class="table_cell"><span>dhskdjklfjk</span></td><td class="table_cell"><span>营业执照或个体工商户营业执照彩照或扫描件</span></td></tr>
<tr><td class="table_cell"><span>operator_media_id</span></td><td class="table_cell"><span>否</span></td><td class="table_cell"><span>string(36)</span></td><td class="table_cell"><span>dhskdjklfjk</span></td><td class="table_cell"><span>营业执照内登记的经营者身份证彩照或扫描件</span></td></tr>
<tr><td class="table_cell"><span>primary_category_id</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>int</span></td><td class="table_cell"><span>2</span></td><td class="table_cell"><span>一级类目id,可以通过本文档中接口查询</span></td></tr>
<tr><td class="table_cell"><span>secondary_category_id</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>int</span></td><td class="table_cell"><span>2</span></td><td class="table_cell"><span>二级类目id，可以通过本文档中接口查询</span></td></tr>
</tbody>
</table>
<p><span><strong>返回数据</strong></span></p>
<pre><span>{<br>"info": {<br> "merchant_id": 12,<br> "create_time": 1438790559,<br> "update_time": 1438790559,<br> "brand_name": "aaaaaa",<br> "logo_url": "http://mmbiz.xxxx",<br> "status": "CHECKING",<br> "begin_time": 1438790559,<br> "end_time": 1438990559,<br> "primary_category_id": 1,<br> "secondary_category_id": 101<br> }<br>}
<br></span></pre>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>merchant_id</span></td><td class="table_cell"><span>子商户id，对于一个母商户公众号下唯一。创建卡券时需填入该id号，字段结构如下：</span>
<p><span>base_info：｛sub_merchant_info:｛merchant_id：｝｝，详情见</span><a href="http://mp.weixin.qq.com/wiki/13/0bdfcbc15653762842de7e51aac317e9.html" class="external text" rel="nofollow"><span>创建卡券接口</span></a></p>
</td></tr>
<tr><td class="table_cell"><span>create_time</span></td><td class="table_cell"><span>子商户信息创建时间</span></td></tr>
<tr><td class="table_cell"><span>update_time</span></td><td class="table_cell"><span>子商户信息更新时间</span></td></tr>
<tr><td class="table_cell"><span>brand_name</span></td><td class="table_cell"><span>子商户名称（12个汉字内），该名称将在制券时填入并显示在卡券页面上。</span></td></tr>
<tr><td class="table_cell"><span>logo_url</span></td><td class="table_cell"><span>子商户logo，可通过上传logo接口获取。该logo将在制券时填入并显示在卡券页面上</span></td></tr>
<tr><td class="table_cell"><span>status</span></td><td class="table_cell"><span>子商户状态，"CHECKING" 审核中, "APPROVED" , 已通过；"REJECTED"被驳回, "EXPIRED"协议已过期</span></td></tr>
<tr><td class="table_cell"><span>bengin_time</span></td><td class="table_cell"><span>创建时间（非协议开始时间）</span></td></tr>
<tr><td class="table_cell"><span>end_time</span></td><td class="table_cell"><span>授权函有效期截止时间（东八区时间，单位为秒）</span></td></tr>
<tr><td class="table_cell"><span>primary_category_id</span></td><td class="table_cell"><span>子商户一级类目</span></td></tr>
<tr><td class="table_cell"><span>secondary_category_id</span></td><td class="table_cell"><span>子商户二级类目</span></td></tr>
</tbody>
</table>
<p><span>特别注意：</span></p>
<p><span>若子商户资料通过微信公众平台提交，可在微信公众平台卡券功能-子商户管理-子商户详情里查看子商户ID，或通过子商户创建接口返回子商户ID，或通过子商户信息拉取接口获取子商户ID。</span></p>
<h3><span><strong><a name="1.5"></a>1.5 拉取单个子商户信息接口</strong></span></h3>
<p><span><strong>接口说明</strong></span></p>
<p><span>通过指定的子商户appid，拉取该子商户的基础信息。 注意，用母商户去调用接口，但接口内传入的是子商户的appid。</span></p>
<p><span><strong>接口详情</strong></span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>HTTP请求方式:&nbsp;POST&nbsp;<br>URL:https://api.weixin.qq.com/card/submerchant/get?access_token=TOKEN
<br></span></pre>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>POST数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>POST数据示例</strong></span></p>
<pre><span>{&nbsp;&nbsp;<br>"merchant_id":&nbsp;12<br>&nbsp;}
<br></span></pre>
<p><span><strong>返回数据</strong></span></p>
<pre><span>{<br> "info": {<br> "merchant_id": 12,<br> "create_time": 1438790559,<br> "update_time": 1438790559,<br> "brand_name": "aaaaaa",<br> "logo_url": "http://mmbiz.xxxx",<br> "status": "CHECKING",<br> "begin_time": 1438790559,<br> "end_time": 1438990559,<br> "primary_category_id": 1,<br> "secondary_category_id": 101<br> }<br>}
<br></span></pre>
<p><strong><span>查询失败返回示例（errcode不为0，errmsg为相应错误信息）：</span></strong></p>
<pre><span>{&nbsp;&nbsp;"errcode":xxxx,&nbsp;&nbsp;"errmsg":"xxxx"&nbsp;}
<br></span></pre>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>merchant_id</span></td><td class="table_cell"><span>子商户id，一个母商户公众号下唯一。</span></td></tr>
<tr><td class="table_cell"><span>create_time</span></td><td class="table_cell"><span>子商户信息创建时间</span></td></tr>
<tr><td class="table_cell"><span>update_time</span></td><td class="table_cell"><span>子商户信息更新时间</span></td></tr>
<tr><td class="table_cell" colspan="1" rowspan="1"><span>app_id</span></td><td class="table_cell" colspan="1" rowspan="1"><span>子商户的公众号app_id</span></td></tr>
<tr><td class="table_cell"><span>brand_name</span></td><td class="table_cell"><span>子商户名称（12个汉字内），该名称将在制券时填入并显示在卡券页面上</span></td></tr>
<tr><td class="table_cell"><span>logo_url</span></td><td class="table_cell"><span>子商户logo，可通过上传logo接口获取。该logo将在制券时填入并显示在卡券页面上</span></td></tr>
<tr><td class="table_cell"><span>status</span></td><td class="table_cell"><span>"CHECKING" 审核中, "APPROVED" , 已通过；"REJECTED"被驳回, "EXPIRED"协议已过期</span></td></tr>
<tr><td class="table_cell"><span>begin_time</span></td><td class="table_cell"><span>创建时间（非协议开始时间），和create_time 重复，待后续去掉该字段</span></td></tr>
<tr><td class="table_cell"><span>end_time</span></td><td class="table_cell"><span>协议截止时间</span></td></tr>
<tr><td class="table_cell"><span>primary_category_id</span></td><td class="table_cell"><span>子商户一级类目</span></td></tr>
<tr><td class="table_cell"><span>secondary_category_id</span></td><td class="table_cell"><span>子商户二级类目</span></td></tr>
</tbody>
</table>
<h3><span><strong><a name="1.6"></a>1.6 批量拉取子商户信息接口</strong></span></h3>
<p><span><strong>接口说明</strong></span></p>
<p><span>母商户可以通过该接口批量拉取子商户的相关信息，一次调用最多拉取100个子商户的信息，可以通过多次拉去满足不同的查询需求</span></p>
<p><span><strong>
<br></strong></span></p>
<p><span><strong>接口详情</strong></span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>HTTP请求方式:&nbsp;POST&nbsp;<br>URL:https://api.weixin.qq.com/card/submerchant/batchget?access_token=TOKEN
<br></span></pre>
<p>
<br><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>POST数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>POST数据示例</strong></span></p>
<pre><span>{&nbsp;&nbsp;"begin_id":&nbsp;0,&nbsp;&nbsp;"limit":&nbsp;50,&nbsp;&nbsp;"status":&nbsp;"CHECKING"&nbsp;}
<br></span></pre>
<p><span><strong>字段说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>begin_id</span></td><td class="table_cell"><span>起始的子商户id，一个母商户公众号下唯一</span></td></tr>
<tr><td class="table_cell"><span>limit</span></td><td class="table_cell"><span>拉取的子商户的个数，最大值为100</span></td></tr>
<tr><td class="table_cell"><span>status</span></td><td class="table_cell"><span>子商户审核状态，填入后，只会拉出当前状态的子商户</span></td></tr>
</tbody>
</table>
<p><span><strong>返回数据</strong></span></p>
<pre><span>{<br> "info_list": [<br> {<br> &nbsp;"merchant_id": 12,<br> &nbsp;"create_time": 1438790559,<br> &nbsp;"update_time": 1438790559,<br> &nbsp;"brand_name": "aaaaaa",<br> &nbsp;"logo_url": "http://mmbiz.xxxx",<br> &nbsp;"status": "CHECKING",<br> &nbsp;"begin_time": 1438790559,<br> &nbsp;"end_time": 1438990559,<br> &nbsp;"primary_category_id": 1,<br> &nbsp;"secondary_category_id": 101<br> },<br> {<br> &nbsp;"merchant_id": 13,<br> &nbsp;"create_time": 1438790559,<br> &nbsp;"update_time": 1438790559,<br> &nbsp;"brand_name": "bbbbbb",<br> &nbsp;"logo_url": "http://mmbiz.xxxx",<br> &nbsp;"status": "APPROVED",<br> &nbsp;"begin_time": 1438790559,<br> &nbsp;"end_time": 1438990559,<br> &nbsp;"primary_category_id": 1,<br> &nbsp;"secondary_category_id": 101<br> }<br> ]<br> "next_begin_id": 13<br>}
<br></span></pre>
<p>
<br></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>merchant_id</span></td><td class="table_cell"><span>子商户id，一个母商户公众号下唯一。</span></td></tr>
<tr><td class="table_cell"><span>create_time</span></td><td class="table_cell"><span>子商户信息创建时间</span></td></tr>
<tr><td class="table_cell"><span>update_time</span></td><td class="table_cell"><span>子商户信息更新时间</span></td></tr>
<tr><td class="table_cell"><span>brand_name</span></td><td class="table_cell"><span>子商户名称（12个汉字内），该名称将在制券时填入并显示在卡券页面上</span></td></tr>
<tr><td class="table_cell"><span>logo_url</span></td><td class="table_cell"><span>子商户logo，可通过上传logo接口获取。该logo将在制券时填入并显示在卡券页面上</span></td></tr>
<tr><td class="table_cell"><span>status</span></td><td class="table_cell"><span>"CHECKING" 审核中, "APPROVED" , 已通过；"REJECTED"被驳回, "EXPIRED"协议已过期</span></td></tr>
<tr><td class="table_cell"><span>begin_time</span></td><td class="table_cell"><span>创建时间（非协议开始时间），和create_time 重复，待后续去掉该字段</span></td></tr>
<tr><td class="table_cell"><span>end_time</span></td><td class="table_cell"><span>协议截止时间</span></td></tr>
<tr><td class="table_cell"><span>primary_category_id</span></td><td class="table_cell"><span>子商户一级类目</span></td></tr>
<tr><td class="table_cell"><span>secondary_category_id</span></td><td class="table_cell"><span>子商户二级类目</span></td></tr>
<tr><td class="table_cell"><span>next_begin_id</span></td><td class="table_cell"><span>拉渠道列表中最后一个子商户的id</span></td></tr>
</tbody>
</table>
<p><strong><em><span>开发者注意：</span></em></strong></p>
<p><em><span>当母商户的子商户数量超过100时，可通过填写begin_id的值，从而多次拉取列表的的方式来满足查询需求。具体的方式是，将上一次调用得到的返回中的next_begin_id的值作为下一次调用中的begin_id的值。</span></em></p>
<h3><span><strong>
<br></strong></span></h3>
<h3><span><strong><a name="1.7"></a>1.7 创建子商户卡券接口</strong></span></h3>
<p><span>若母商户需创建自己的卡券，参考原有卡券创建接口</span></p>
<p><span>
<br></span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>HTTP请求方式:&nbsp;POST&nbsp;<br>URL:https://api.weixin.qq.com/card/create?access_token=ACCESS_TOKEN
<br></span></pre>
<p>
<br><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>POST数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>POST数据示例</strong></span></p>
<pre><span>{ <br> "card": {<br> &nbsp;"card_type": "GROUPON",<br> &nbsp;"groupon": {<br> &nbsp; &nbsp; &nbsp;"base_info": {<br> &nbsp; &nbsp;<span label="明显强调"> &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; "sub_merchant_info":{<br> &nbsp; &nbsp; &nbsp; "merchant_id":xxx<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },</span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"logo_url": <br> &nbsp;"http://mmbiz.qpic.cn/mmbiz/iaL1LJM1mF9aRKPZJkmG8xXhiaHqkKSVMMWeN3hLut7X7hicFNjakmxibMLGWpXrEXB33367o7zHN0CwngnQY7zb7g/0",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"brand_name":"海底捞",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"code_type":"CODE_TYPE_TEXT",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"title": "132元双人火锅套餐",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"sub_title": "周末狂欢必备",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"color": "Color010",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"notice": "使用时向服务员出示此券",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"service_phone": "020-88888888",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"description": "不可与其他优惠同享\n如需团购券发票，请在消费时向商户提出\n店内均可使用，仅限堂食",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"date_info": {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"type": "DATE_TYPE_FIX_TIME_RANGE",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"begin_timestamp": 1397577600 ,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"end_timestamp": 1422724261<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;},<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"sku": {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"quantity": 500000<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;},<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"get_limit": 3,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"use_custom_code": false,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"bind_openid": false,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"can_share": true,<br> &nbsp; &nbsp; &nbsp; &nbsp;"can_give_friend": true,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"location_id_list" : [123, 12321, 345345],<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"custom_url_name": "立即使用",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"custom_url": "http://www.qq.com",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"custom_url_sub_title": "6个汉字tips",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"promotion_url_name": "更多优惠",<br> &nbsp; &nbsp; &nbsp; &nbsp;"promotion_url": "http://www.qq.com",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"source": "大众点评"<br> &nbsp; },<br> &nbsp; &nbsp; &nbsp;"deal_detail": "以下锅底2选1（有菌王锅、麻辣锅、大骨锅、番茄锅、清补凉锅、酸菜鱼锅可选）：\n大锅1份 12元\n小锅2份 16元 "}<br> }<br>}
<br></span></pre>
<p><span>优惠券字段详情详见&nbsp;</span><a href="http://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1451025056&amp;token=&amp;lang=zh_CN&amp;anchor=2" target="_blank" textvalue="创建卡券接口">创建卡券接口</a></p>
<p>会员卡字段详情见 <a href="http://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1451025283&amp;token=&amp;lang=zh_CN&amp;anchor=4.1" target="_blank" textvalue="创建会员卡接口">创建会员卡接口</a></p>
<p>
<br></p>
<h3><strong><a name="1.8"></a>1.8 错误码说明</strong>
<br></h3>
<p>
<br></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>错误码</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>－1</span></td><td class="table_cell"><span>系统错误。</span></td></tr>
<tr><td class="table_cell"><span>40070</span></td><td class="table_cell"><span>基本信息base info中填写的库存信息SKU不合法，参考CreateCard创建卡券接口</span></td></tr>
<tr><td class="table_cell"><span>40104</span></td><td class="table_cell"><span>创建子商户时填的类目id不对</span></td></tr>
<tr><td class="table_cell"><span>40140</span></td><td class="table_cell"><span>子商户状态不对，创建卡券时要求已审核，更新子商户信息时要求已驳回</span></td></tr>
<tr><td class="table_cell"><span>40139</span></td><td class="table_cell"><span>子商户id不正确</span></td></tr>
<tr><td class="table_cell"><span>40079</span></td><td class="table_cell"><span>时间填写得不对</span></td></tr>
<tr><td class="table_cell"><span>45021</span></td><td class="table_cell"><span>参数超长</span></td></tr>
<tr><td class="table_cell"><span>43014</span></td><td class="table_cell"><span>未经过平台授权，不能创建子商户。。</span></td></tr>
</tbody>
</table>
<p>
<br></p>
<p>
<br></p>
<h3><strong><a name="1.9"></a>1.9&nbsp;联系我们</strong>
<br></h3>
<p><span>第三方代制模式的开发问题，可通过邮箱weixin_card@foxmail.com联系我们。</span></p>
<p>
<br></p>
<p>
<br></p>
<p>
<br></p>
<h2><strong>2 第三方强授权模式</strong>
<br></h2>
<p><span><strong>模式概述</strong></span></p>
<p><span>“第三方强授权模式”是腾讯为降低卡券接入门槛，商户可快速接入，由具备开发能力的开发者代商户制卡券的功能。为商户提供开发能力的开发者简称“母商户”，商户简称“子商户”。</span></p>
<p><span>该模式下，子商户公众号无需微信认证，子商户也不需单独申请卡券功能，只需将资料提供给母商户代为提交。 该模式下，卡券的商户名和logo均为子商户的商户名和logo，且卡券创建、投放、核销等流程均只能由母商户通过调用API接口完成，子商户本身不具备直接调用卡券接口或在卡券商户后台手工操作的能力。</span></p>
<p><span>“第三方强授权”功能，面向微信开放平台所有已全网发布的第三方平台开放，第三方平台需达到一定注册资本金额，提供相关资质，经审核通过后才可获得协助制券能力。 “子商户”面向未认证的微信公众号开放，可选择已开放的卡券类目接入，子商户资质需由母商户代为提交，审核通过后可由母商户协助使用卡券功能。</span></p>
<p><span>母商户每月可为每个子商户代制券10个cardid，且每个cardid累计sku不超过5万。具体的数量限制会随运营规则调整。</span></p>
<p><span><strong>开通步骤</strong></span></p>
<p><span>第一步：开发者所在企业申请第三方开发者代制能力，提交资料并审核；</span></p>
<p><span>第二步：母商户为子商户提交资质认证资料审核；</span></p>
<p><span>第三步：子商户发起授权，母商户确认授权；</span></p>
<p><span>第四步：母商户代子商户调用卡券接口，进行卡券制作、投放、核销等动作；</span></p>
<p><span>第五步：母商户可以调用数据接口代子商户获取数据；</span></p>
<p>
<br></p>
<h3><span><strong><a name="2.1"></a>2.1 母商户资质申请接口</strong></span></h3>
<p><span><strong>接口说明</strong></span></p>
<p><span>母商户资质申请接口是第三方平台用以申请第三方强授权能力，并提交自身资质资料的上传接口，只有上传相关资质，并审核通过后才可代名下子商户提交资质。</span></p>
<p><span>母商户提交资质包括：注册资本、营业执照（扫描件）、税务登记证（扫描件）、上季度缴税清单（扫描件）；</span></p>
<p><span>母商户必须先上传相应扫描件获取media_id后，传入media_id。详见上传图片media接口</span></p>
<p><span>同一个appid的申请，仅当驳回时可以再次提交，审核中和审核通过时不可重复提交</span></p>
<p><span><strong>接口详情</strong></span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>http请求方式:&nbsp;POST&nbsp;http://&nbsp;api.weixin.qq.com&nbsp;/cgi-bin/component/upload_card_agent_qualification?access_token=TOKEN
<br></span></pre>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>POST数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>POST数据示例</strong></span></p>
<pre><span>{ <br> &nbsp;"register_capital": 100000,<br> &nbsp;"business_license_media_id": "Y0vGhBIycyhEFTyq6km0pGpCPzdqoxMnr1wjs574LqeWzsPtido2VM5grKk5gzn3",<br> &nbsp;"tax_registration_certificate_media_id": "Y0vGhBIycyhEFTyq6km0pGpCPzdqoxMnr1wjs574LqeWzsPtido2VM5grKk5gzn3",<br> &nbsp;"last_quarter_tax_listing_media_id": "Y0vGhBIycyhEFTyq6km0pGpCPzdqoxMnr1wjs574LqeWzsPtido2VM5grKk5gzn3"<br>}
<br></span></pre>
<p><span><strong>字段说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>必填</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>register_capital</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>注册资本，数字，单位：分</span></td></tr>
<tr><td class="table_cell"><span>business_license_media_id</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>营业执照扫描件的media_id</span></td></tr>
<tr><td class="table_cell"><span>tax_registration_certificate_media_id</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>税务登记证扫描件的media_id</span></td></tr>
<tr><td class="table_cell"><span>last_quarter_tax_listing_media_id</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>上个季度纳税清单扫描件media_id</span></td></tr>
</tbody>
</table>
<p><span><strong>返回数据</strong></span></p>
<p><span>上传成功示例：</span></p>
<pre><span>{&nbsp;"errcode":0,&nbsp;"errmsg":"ok"&nbsp;}
<br></span></pre>
<p><span>上传失败示例（errcode不为0，errmsg为相应错误信息）：</span></p>
<pre><span>{&nbsp;"errcode":61011,&nbsp;"errmsg":"invalid&nbsp;component"&nbsp;}
<br></span></pre>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>errcode</span></td><td class="table_cell"><span>错误码，0为正常。</span></td></tr>
<tr><td class="table_cell"><span>errmsg</span></td><td class="table_cell"><span>错误信息。</span></td></tr>
</tbody>
</table>
<h3><span><strong><a name="2.2"></a>2.2 母商户资质审核查询接口</strong></span></h3>
<p><span><strong>接口说明</strong></span></p>
<p><span>该接口用于查询母商户资质审核的结果，审核通过后才能用接口继续提交子商户资质。</span></p>
<p><span><strong>接口详情</strong></span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>http请求方式:&nbsp;GET&nbsp;http://&nbsp;api.weixin.qq.com&nbsp;/&nbsp;cgi-bin/component/check_card_agent_qualification?access_token=TOKEN
<br></span></pre>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>GET数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>返回数据’’’</strong></span></p>
<p><span>查询成功返回示例：</span></p>
<pre><span>{<br> &nbsp;"result":"RESULT_PASS"，<br>}<br>{<br> &nbsp;"result":" RESULT_NOT_PASS ", &nbsp; <br>}<br>{<br> &nbsp;"result":"RESULT_CHECKING", &nbsp; <br>}<br>{<br>"result":"RESULT_NOTHING_TO_CHECK", &nbsp; <br>}
<br></span></pre>
<p><span>查询失败返回示例：（errcode不为0，errmsg为相应错误信息）：</span></p>
<pre><span>{&nbsp;"errcode":xxxx,&nbsp;"errmsg":"xxxx"&nbsp;}
<br></span></pre>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>errcode</span></td><td class="table_cell"><span>错误码，0为正常。</span></td></tr>
<tr><td class="table_cell"><span>errmsg</span></td><td class="table_cell"><span>错误信息。</span></td></tr>
<tr><td class="table_cell"><span>result</span></td><td class="table_cell"><span>查询结果</span>
<p><span>1.RESULT_PASS：审核通过 2.RESULT_NOT_PASS：审核驳回 3.RESULT_CHECKING：待审核 4.RESULT_NOTHING_TO_CHECK：无提审记录</span></p>
</td></tr>
</tbody>
</table>
<p>
<br></p>
<h3><span><strong><a name="2.3"></a>2.3 子商户资质申请接口</strong></span></h3>
<p><span><strong>接口说明</strong></span></p>
<p><span>母商户（第三方平台）申请获得第三方强授权能力后，才可提交名下子商户的资质。</span></p>
<p><span>子商户资质审核通过后，才可进行后续的授权流程。</span></p>
<p><span>子商户的资质包括：商户名称、商户logo（图片）、卡券类目、AppID、营业执照或个体户经营执照（扫描件）、授权协议（扫描件）。</span></p>
<p><span>注意： 1、请用母商户（第三方平台）的账号提交子商户资料。</span></p>
<p><span>2、母商户必须先上传子商户的相应扫描件获取media_id后，传入media_id。</span></p>
<p><span>3、母商户必须先通过卡券类目查询接口获取卡券实时对外开放的一级、二级类目ID，传入类目ID。</span></p>
<p><span>4、商户名称在12个汉字长度内。</span></p>
<p><span>5、同一个appid的申请，仅当驳回时可再次提交，审核中和审核通过时不可重复提交。</span></p>
<p><span><strong>接口详情</strong></span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>http请求方式:&nbsp;POST&nbsp;http://&nbsp;api.weixin.qq.com&nbsp;/cgi-bin/component/upload_card_merchant_qualification?access_token=TOKEN
<br></span></pre>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>POST数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>POST数据示例</strong></span></p>
<pre><span>{<br> "appid": "wxf8b4f85e442a4e77",<br> "name": "灰太狼烧烤店",<br> "logo_media_id": "Y0vGhBIycyhEFTyq6km0pGpCPzdqoxMnr1wjs574LqeWzsPtido2VM5grKk5gzn3",<br> "business_license_media_id": "Y0vGhBIycyhEFTyq6km0pGpCPzdqoxMnr1wjs574LqeWzsPtido2VM5grKk5gzn3",<br> "operator_id_card_media_id":"xxxxxxxxx"<br> "agreement_file_media_id": "Y0vGhBIycyhEFTyq6km0pGpCPzdqoxMnr1wjs574LqeWzsPtido2VM5grKk5gzn3",<br> "primary_category_id": "1",<br> "secondary_category_id": "101"<br>}
<br></span></pre>
<p><span><strong>字段说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>必填</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>appid</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>子商户公众号的appid</span></td></tr>
<tr><td class="table_cell"><span>name</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>子商户商户名，用于显示在卡券券面</span></td></tr>
<tr><td class="table_cell"><span>logo_meida_id</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>子商户logo，用于显示在子商户卡券的券面</span></td></tr>
<tr><td class="table_cell"><span>business_license_media_id</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>营业执照或个体工商户执照扫描件的media_id</span></td></tr>
<tr><td class="table_cell"><span>operator_id_card_media_id</span></td><td class="table_cell"><span>否</span></td><td class="table_cell"><span>当子商户为个体工商户且无公章时，授权函须签名，并额外提交该个体工商户经营者身份证扫描件的media_id</span></td></tr>
<tr><td class="table_cell"><span>agreement_file_media_id</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>子商户与第三方签署的代理授权函的media_id</span></td></tr>
<tr><td class="table_cell"><span>primary_category_id</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>一级类目id</span></td></tr>
<tr><td class="table_cell"><span>secondary_category_id</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>二级类目id</span></td></tr>
</tbody>
</table>
<p><span><strong>返回数据</strong></span></p>
<p><span>上传成功示例：</span></p>
<pre><span>{&nbsp;&nbsp;"errcode":0,&nbsp;&nbsp;"errmsg":"ok"&nbsp;}
<br></span></pre>
<p><span>上传失败示例（errcode不为0，errmsg为相应错误信息）：</span></p>
<pre><span>{&nbsp;&nbsp;"errcode":40013,&nbsp;&nbsp;"errmsg":"invalid&nbsp;appid"&nbsp;}
<br></span></pre>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>errcode</span></td><td class="table_cell"><span>错误码，0为正常。</span></td></tr>
<tr><td class="table_cell"><span>errmsg</span></td><td class="table_cell"><span>错误信息。</span></td></tr>
</tbody>
</table>
<h3><span><strong><a name="2.4"></a>2.4 授权子商户审核事件推送</strong></span></h3>
<p><span>当子商户资质审核通过时，开发者将收到微信服务器推送的事件。</span></p>
<pre><span>&lt;xml&gt;<br>&lt;AppId&gt;&lt;![CDATA[AppId]]&gt;&lt;/AppId&gt;<br>&lt;CreateTime&gt;1449471727&lt;/CreateTime&gt;<br>&lt;InfoType&gt;&lt;![CDATA[card_merchant_auth_check_result]]&gt;&lt;/InfoType&gt;<br>&lt;SubMerchantAppId&gt;&lt;![CDATA[AppId]]&gt;&lt;/SubMerchantAppId&gt;<br>&lt;IsPass&gt;0&lt;/IsPass&gt;<br>&lt;Reason&gt;&lt;![CDATA[Reason]]&gt;&lt;/Reason&gt;<br>&lt;/xml&gt;
<br></span></pre>
<p><span><strong>字段说明</strong></span></p>
<table cellspacing="0" cellpadding="4" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>AppId</span></td><td class="table_cell"><span>“公众号第三方平台”账号（即母商户）的AppID。</span></td></tr>
<tr><td class="table_cell"><span>CreateTime</span></td><td class="table_cell"><span>消息创建时间 （整型）。</span></td></tr>
<tr><td class="table_cell"><span>InfoType</span></td><td class="table_cell"><span>消息类型，card_merchant_auth_check_result(第三方开发者代制有公众号模式，子商户资料审核事件）</span></td></tr>
<tr><td class="table_cell"><span>SubMerchantAppId</span></td><td class="table_cell"><span>子商户账号的AppID。</span></td></tr>
<tr><td class="table_cell"><span>IsPass</span></td><td class="table_cell"><span>是否通过，为1时审核通过，为0时审核驳回。</span></td></tr>
<tr><td class="table_cell"><span>Reason</span></td><td class="table_cell"><span>驳回的原因</span></td></tr>
<tr><td class="table_cell"><span>IsPass</span></td><td class="table_cell"><span>是否通过，为1时审核通过。</span></td></tr>
</tbody>
</table>
<h3><span><strong><a name="2.5"></a>2.5 子商户资质审核查询接口</strong></span></h3>
<p><span><strong>接口说明</strong></span></p>
<p><span>该接口用于查询子商户资质审核的结果，审核通过后才能进行后续授权流程。 注意，用母商户去调用接口，但接口内传入的是子商户的appid。</span></p>
<p><span><strong>接口详情</strong></span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>http请求方式:&nbsp;POST&nbsp;http://&nbsp;api.weixin.qq.com&nbsp;/&nbsp;cgi-bin/component/check_card_merchant_qualification?access_token=TOKEN
<br></span></pre>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>POST数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>POST数据示例</strong></span></p>
<pre><span>{&nbsp;&nbsp;“appid”:”wx********”&nbsp;}
<br></span></pre>
<p><span><strong>返回数据’’’</strong></span></p>
<p><span>查询成功返回示例：</span></p>
<pre><span>{<br> &nbsp;"result":"RESULT_PASS"，<br>}<br>{<br> &nbsp;"result":" RESULT_NOT_PASS ", &nbsp; <br>}<br>{<br> &nbsp;"result":"RESULT_CHECKING", &nbsp; <br>}<br>{<br>"result":"RESULT_NOTHING_TO_CHECK", &nbsp; <br>}
<br></span></pre>
<p><span>查询失败返回示例：（errcode不为0，errmsg为相应错误信息）：</span></p>
<pre><span>{&nbsp;"errcode":xxxx,&nbsp;"errmsg":"xxxx"&nbsp;}
<br></span></pre>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>errcode</span></td><td class="table_cell"><span>错误码，0为正常。</span></td></tr>
<tr><td class="table_cell"><span>errmsg</span></td><td class="table_cell"><span>错误信息。</span></td></tr>
<tr><td class="table_cell"><span>result</span></td><td class="table_cell"><span>查询结果</span>
<p><span>1.RESULT_PASS：审核通过 2.RESULT_NOT_PASS：审核驳回 3.RESULT_CHECKING：待审核 4.RESULT_NOTHING_TO_CHECK：无提审记录</span></p>
</td></tr>
</tbody>
</table>
<p>
<br></p>
<h3><span><strong><a name="2.6"></a>2.6 图片上传media接口</strong></span></h3>
<p><span>开发者经常需要用到一些临时性的多媒体素材的场景，例如在使用接口（特别是发送消息时），对多媒体文件、多媒体消息的获取和调用等操作，都需通过media_id来进行。</span></p>
<p><span>为了卡券第三方代理模式相关接口调用顺畅，现已为所有对外的第三方平台账号配置“图片上传media接口”的权限。</span></p>
<p><span>图片上传media接口可参考微信公众平台开发者文档：</span><a href="http://mp.weixin.qq.com/wiki/0/6ebbf79d99f7a435ed60cfb094867174.html" class="external free" rel="nofollow"><span>../0/6ebbf79d99f7a435ed60cfb094867174.html</span></a></p>
<p><strong><em><span>注意：</span></em></strong></p>
<p><em><span>1.对于临时素材，每个素材（media_id）会在开发者上传或粉丝发送到微信服务器3天后自动删除（所以用户发送给开发者的素材，若开发者需要，应尽快下载到本地），以节省服务器资源。</span></em></p>
<p><em><span>2.media_id是可复用的。</span></em></p>
<p><em><span>3.素材的格式大小等要求与公众平台官网一致。具体是，图片大小不超过2M，支持bmp/png/jpeg/jpg/gif格式</span></em></p>
<p><em><span>4.需使用https调用本接口。</span></em></p>
<p><em><span>5.请使用第三方平台账号的ACCESS_TOKEN调用（已开权限）</span></em></p>
<p><span><strong>接口详情</strong></span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>https请求方式:&nbsp;POST&nbsp;https://api.weixin.qq.com/cgi-bin/media/upload?access_token=ACCESS_TOKEN&amp;type=TYPE
<br></span></pre>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>type</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>媒体文件类型，此处为图片类型（image）</span></td></tr>
<tr><td class="table_cell"><span>POST数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>用FORM表单方式上传一个多媒体文件，form-data中媒体文件标识，有filename、filelength、content-type等信息</span></td></tr>
</tbody>
</table>
<p><span><strong>调用示例</strong></span></p>
<pre><span>curl&nbsp;-F&nbsp;&nbsp;media=@test.jpg&nbsp;"https://api.weixin.qq.com/cgi-bin/media/upload?access_token=ACCESS_TOKEN&amp;type=TYPE"
<br></span></pre>
<p><span><strong>返回数据</strong></span></p>
<p>
<br><span>上传成功示例：</span></p>
<pre><span>{&nbsp;&nbsp;"type":"TYPE",&nbsp;&nbsp;"media_id":"MEDIA_ID",&nbsp;&nbsp;"created_at":123456789&nbsp;}
<br></span></pre>
<p><span>上传失败示例（errcode不为0，errmsg为相应错误信息）：</span></p>
<pre><span>{&nbsp;&nbsp;"errcode":40004,&nbsp;&nbsp;"errmsg":"invalid&nbsp;media&nbsp;type"&nbsp;}
<br></span></pre>
<p>
<br></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>errcode</span></td><td class="table_cell"><span>错误码，0为正常。</span></td></tr>
<tr><td class="table_cell"><span>errmsg</span></td><td class="table_cell"><span>错误信息。</span></td></tr>
</tbody>
</table>
<p>
<br></p>
<h3><span><strong><a name="2.7"></a>2.7 卡券开放类目查询接口</strong></span></h3>
<p><span><strong>接口说明</strong></span></p>
<p><span>通过调用该接口查询卡券开放的类目ID，类目会随业务发展变更，请每次用接口去查询获取实时卡券类目。</span></p>
<p><span>注意：</span></p>
<p><span>1.本接口查询的返回值还有卡券资质ID,此处的卡券资质为：已微信认证的公众号通过微信公众平台申请卡券功能时，所需的资质。</span></p>
<p><span>2.对于第三方强授权模式，子商户无论选择什么类目，均提交营业执照即可，所以不用考虑此处返回的资质字段，返回值仅参考类目ID即可。</span></p>
<p>
<br><span><strong>接口详情</strong></span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>https请求方式:&nbsp;GET&nbsp;https://api.weixin.qq.com/card/getapplyprotocol?access_token=TOKEN
<br></span></pre>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>GET数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>返回数据</strong></span></p>
<pre><span>{<br> &nbsp; "category": [<br> &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "primary_category_id": 1,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "category_name": "美食",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "secondary_category": [<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "secondary_category_id": 101,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "category_name": "粤菜",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "need_qualification_stuffs": [<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "food_service_license_id",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "food_service_license_bizmedia_id"<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ],<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "can_choose_prepaid_card": 1,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "can_choose_payment_card": 1<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; }<br> &nbsp; ],<br> &nbsp; "errcode": 0,<br> &nbsp; "errmsg": "ok"<br>}
<br></span></pre>
<p>
<br></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>errcode</span></td><td class="table_cell"><span>错误码，0为正常。</span></td></tr>
<tr><td class="table_cell"><span>errmsg</span></td><td class="table_cell"><span>错误信息。</span></td></tr>
<tr><td class="table_cell"><span>primary_category_id</span></td><td class="table_cell"><span>一级目录id</span></td></tr>
<tr><td class="table_cell"><span>secondary_category_id</span></td><td class="table_cell"><span>二级目录id</span></td></tr>
</tbody>
</table>
<h3><span><strong><a name="2.8"></a>2.8 拉取单个子商户信息接口</strong></span></h3>
<p><span><strong>接口说明</strong></span></p>
<p><span>通过指定的子商户appid，拉取该子商户的基础信息。 注意，用母商户去调用接口，但接口内传入的是子商户的appid。</span></p>
<p><span><strong>接口详情</strong></span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>http请求方式:&nbsp;POST&nbsp;http://&nbsp;api.weixin.qq.com&nbsp;/&nbsp;cgi-bin/component/get_card_merchant?access_token=TOKEN
<br></span></pre>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>POST数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>POST数据示例</strong></span></p>
<pre><span>{&nbsp;&nbsp;“appid”:”wx********”&nbsp;}
<br></span></pre>
<p><span><strong>返回数据</strong></span></p>
<pre><span>{<br> "appid":"wxd395ea50d8b6867a",<br> "name":"灰太狼烧烤店",<br> "primary_category_id":1,<br> "secondary_category_id":101,<br> "submit_time":1440580664,<br> "result":"RESULT_PASS"<br>}
<br></span></pre>
<p><span>查询失败返回示例（errcode不为0，errmsg为相应错误信息）：</span></p>
<pre><span>{&nbsp;&nbsp;"errcode":xxxx,&nbsp;&nbsp;"errmsg":"xxxx"&nbsp;}
<br></span></pre>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>errcode</span></td><td class="table_cell"><span>错误码，0为正常。</span></td></tr>
<tr><td class="table_cell"><span>errmsg</span></td><td class="table_cell"><span>错误信息。</span></td></tr>
</tbody>
</table>
<h3><span><strong><a name="2.9"></a>2.9 拉取子商户列表接口</strong></span></h3>
<p><span><strong>接口说明</strong></span></p>
<p><span>通过指定的子商户appid，拉取该子商户的基础信息。 注意，用母商户去调用接口，但接口内传入的是子商户的appid。</span></p>
<p><span><strong>接口详情</strong></span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>http请求方式:&nbsp;POST&nbsp;http://&nbsp;api.weixin.qq.com&nbsp;/&nbsp;cgi-bin/component/batchget_card_merchant?access_token=TOKEN
<br></span></pre>
<p><span><strong>
<br></strong></span></p>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>POST数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>
<br></strong></span></p>
<p><span><strong>POST数据示例</strong></span></p>
<pre><span>{&nbsp;&nbsp;"next_get":&nbsp;""&nbsp;&nbsp;}
<br></span></pre>
<p><span><strong>
<br></strong></span></p>
<p><span><strong>字段说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>next_get</span></td><td class="table_cell"><span>获取子商户列表，注意最开始时为空。每次拉取20个子商户，下次拉取时填入返回数据中该字段的值，该值无实际意义。</span></td></tr>
</tbody>
</table>
<p><strong>返回数据</strong>
<br></p>
<p><span>查询成功返回示例：</span></p>
<pre><span>{<br> "list":[<br> {<br> "appid":"wxd395ea50d8b6867a",<br> "name":"灰太狼烧烤店",<br> "primary_category_id":1,<br> "secondary_category_id":101,<br> "submit_time":1440580664,<br> "result":"RESULT_PASS"<br> },<br> {"appid":"wx6384a98262a87262",<br> "name":"灰太狼烧烤店",<br> "primary_category_id":1,<br> "secondary_category_id":101,<br> "submit_time":1440580515,<br> "result":"RESULT_PASS"<br> },<br> {"appid":"wx42cf28f28b77d653",<br> "name":"灰太狼烧烤店",<br> "primary_category_id":1,<br> "secondary_category_id":101,<br> "submit_time":1440386151,<br> "result":"RESULT_CHECKING"<br> },<br> {"appid":"wx5aecba35a7d70c14",<br> "name":"灰太狼烧烤店",<br> "primary_category_id":1,<br> "secondary_category_id":101,<br> "submit_time":1440385851,<br> "result":"RESULT_PASS"<br> }<br> ],<br> "next_get":"13"<br>}
<br></span></pre>
<p><span>查询失败返回示例（errcode不为0，errmsg为相应错误信息）：</span></p>
<pre><span>{&nbsp;&nbsp;"errcode":xxxx,&nbsp;&nbsp;"errmsg":"xxxx"&nbsp;}
<br></span></pre>
<p>
<br></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>errcode</span></td><td class="table_cell"><span>错误码，0为正常。</span></td></tr>
<tr><td class="table_cell"><span>errmsg</span></td><td class="table_cell"><span>错误信息。</span></td></tr>
</tbody>
</table>
<p><strong><em><span>开发者注意：</span></em></strong><em><span>&nbsp;</span></em></p>
<p><em><span>当母商户的子商户数量超过20时，可通过填写next_get的值，从而多次拉取列表的的方式来满足查询需求。具体的方式是，将上一次调用得到的返回中的next_get的值作为下一次调用中的next_get的值。</span></em></p>
<h3><span><strong>
<br></strong></span></h3>
<h3><span><strong><a name="2.10"></a>2.10 第三方强授权相关接口</strong></span></h3>
<p><span><strong>接口说明</strong></span></p>
<p><span>
<br></span></p>
<p><span>1.普通授权，即公众号本身已有某接口或业务的权限，通过第三方授权，第三方代公众号代公众号调用该接口或实现该业务。</span></p>
<p><span>2.普通授权的相关接口请参考微信开放平台相关文档：</span><a href="https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&amp;t=resource/res_list&amp;verify=1&amp;id=open1419318587&amp;lang=zh_CN" class="external free" rel="nofollow" target="_blank"><span>https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&amp;t=resource/res_list&amp;verify=1&amp;id=open1419318587&amp;lang=zh_CN</span></a></p>
<p><span>3.强授权，即公众号本身无某接口或业务的权限，但第三方获取了该接口或业务的权限后，通过强授权过程，公众号也额外获得该权限。</span></p>
<p><span>4.强授权过程变更2个API，并增加了1个第三方平台确认授权的API。api_query_auth, 增加返回字段：need_confirm, already_confirm, 分别表示是否需要确认，是否已经确认。api_getauthorizer_info，增加返回字段：need_confirm, already_confirm, 分别表示是否需要确认，是否已经确认。api_confirm_authorization, 第三方平台确认授权API。</span></p>
<p><span>注意： 若子商户公众号本身有卡券功能，不用调用强授权确认接口，直接可调用卡券接口。 建议在进行强授权接口确认前，通过普通授权接口内的“5、获取授权方的账户信息“接口查询该公众号是否具备“卡券功能”。</span></p>
<p><span>【强授权权限集，必须调接口进行授权确认，才能真正获得强授权特性】</span></p>
<h4><span><strong>
<br></strong></span></h4>
<h4><span><strong><a name="2.10.1"></a>2.10.1 使用授权码换取公众号的授权信息</strong></span></h4>
<p><span><strong>接口说明</strong></span></p>
<p><span>该API用于使用授权码换取授权公众号的授权信息，并换取authorizer_access_token和authorizer_refresh_token。 授权码的获取，需要在用户在第三方平台授权页中完成授权流程后，在回调URI中通过URL参数提供给第三方平台方。</span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>http请求方式:&nbsp;POST&nbsp;https://api.weixin.qq.com/cgi-bin/component/api_query_auth?component_access_token=TOKEN
<br></span></pre>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>POST数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>POST数据示例</strong></span></p>
<pre><span>{&nbsp;&nbsp;"component_appid":"appid_value",&nbsp;&nbsp;"authorization_code":&nbsp;"auth_code_value"&nbsp;}
<br></span></pre>
<p><span><strong>字段说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>component_appid</span></td><td class="table_cell"><span>第三方平台appid</span></td></tr>
<tr><td class="table_cell"><span>authorization_code</span></td><td class="table_cell"><span>授权code,会在授权成功时返回给第三方平台，详见第三方平台授权流程说明。</span></td></tr>
</tbody>
</table>
<p><span><strong>返回数据</strong></span></p>
<p><span>返回结果示例</span></p>
<pre><span>{<br> "authorization_info": {<br> "authorizer_appid": "wxf8b4f85f3a794e77", <br> "authorizer_access_token": "QXjUqNqfYVH0yBE1iI_7vuN_9gQbpjfK7hYwJ3P7xOa88a89- &nbsp;Aga5x1NMYJyB8G2yKt1KCl0nPC3W9GJzw0Zzq_dBxc8pxIGUNi_bFes0qM", <br> "expires_in": 7200, <br> "authorizer_refresh_token": "dTo-YCXPL4llX-u1W1pPpnp8Hgm4wpJtlR6iV0doKdY", <br> "func_info": [<br> {"funcscope_category": {"id": 1}，confirm_info”:{"need_confirm": &nbsp; &nbsp; &nbsp;1,"already_confirm":0}}, <br> {"funcscope_category": {"id": 2}，confirm_info”:{"need_confirm": 1,"already_confirm":0}}, <br> {"funcscope_category": {"id": 50}，confirm_info”:{"need_confirm": 1,"already_confirm":1}}<br>]<br>}
<br></span></pre>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>authorization_info</span></td><td class="table_cell"><span>授权信息</span></td></tr>
<tr><td class="table_cell"><span>authorization_appid</span></td><td class="table_cell"><span>授权方appid</span></td></tr>
<tr><td class="table_cell"><span>authorizer_access_token</span></td><td class="table_cell"><span>授权方令牌（在授权的公众号具备API权限时，才有此返回值）。</span></td></tr>
<tr><td class="table_cell"><span>expires_in</span></td><td class="table_cell"><span>有效期（在授权的公众号具备API权限时，才有此返回值）</span></td></tr>
<tr><td class="table_cell"><span>authorizer_refresh_token</span></td><td class="table_cell"><span>刷新令牌（在授权的公众号具备API权限时，才有此返回值），刷新令牌主要用于公众号第三方平台获取和刷新已授权用户的access_token，只会在授权时刻提供，请妥善保存。 一旦丢失，只能让用户重新授权，才能再次拿到新的刷新令牌</span></td></tr>
<tr><td class="table_cell"><span>func_info</span></td><td class="table_cell"><span>公众号授权给开发者的权限集列表（请注意，当出现用户已经将消息与菜单权限集授权给了某个第三方，再授权给另一个第三方时，由于该权限集是互斥的，后一个第三方的授权将去除此权限集，开发者可以在返回的func_info信息中验证这一点，避免信息遗漏）， id位对应的权限集编号。 confirm_info是强授权相关字段。 其中need_confirm：是否需要第三方平台确认（0，不需确认，1，需要认）， already_confirm：是否已经确认。（0，未确认，1，已经确认）。</span></td></tr>
</tbody>
</table>
<p>
<br></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>funcscope_category_id</span></th><th class="table_cell"><span>权限集说明</span></th></tr>
<tr><td class="table_cell"><span>1</span></td><td class="table_cell"><span>消息与菜单权限集</span></td></tr>
<tr><td class="table_cell"><span>2</span></td><td class="table_cell"><span>用户管理权限集</span></td></tr>
<tr><td class="table_cell"><span>3</span></td><td class="table_cell"><span>账号管理权限集</span></td></tr>
<tr><td class="table_cell"><span>4</span></td><td class="table_cell"><span>网页授权权限集</span></td></tr>
<tr><td class="table_cell"><span>5</span></td><td class="table_cell"><span>微信小店权限集</span></td></tr>
<tr><td class="table_cell"><span>6</span></td><td class="table_cell"><span>多客服权限集</span></td></tr>
<tr><td class="table_cell"><span>7</span></td><td class="table_cell"><span>业务通知权限集</span></td></tr>
<tr><td class="table_cell"><span>8</span></td><td class="table_cell"><span>微信卡券权限集</span></td></tr>
<tr><td class="table_cell"><span>9</span></td><td class="table_cell"><span>扫一扫权限集</span></td></tr>
<tr><td class="table_cell"><span>10</span></td><td class="table_cell"><span>Wi-Fi权限集</span></td></tr>
<tr><td class="table_cell"><span>11</span></td><td class="table_cell"><span>素材管理权限集</span></td></tr>
<tr><td class="table_cell"><span>12</span></td><td class="table_cell"><span>摇周边权限集</span></td></tr>
<tr><td class="table_cell"><span>13</span></td><td class="table_cell"><span>离线数据权限集</span></td></tr>
</tbody>
</table>
<h4><span><strong><a name="2.10.2"></a>2.10.2&nbsp;确认授权</strong></span></h4>
<p><span><strong>接口说明</strong></span></p>
<p><span>该API用于使用授权码换取授权公众号的授权信息，并换取authorizer_access_token和authorizer_refresh_token。 授权码的获取，需要在用户在第三方平台授权页中完成授权流程后，在回调URI中通过URL参数提供给第三方平台方。</span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>http请求方式:&nbsp;POST&nbsp;https://api.weixin.qq.com/&nbsp;cgi-bin/component/api_confirm_authorization?component_access_token&nbsp;=TOKEN
<br></span></pre>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>POST数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>POST数据示例</strong></span></p>
<pre><span>{&nbsp;&nbsp;"component_appid":"appid_value",&nbsp;&nbsp;"authorizer_appid":&nbsp;"authorizer_appid_value",&nbsp;&nbsp;"funcscope_category_id":8，&nbsp;&nbsp;"confirm_value":&nbsp;1&nbsp;}
<br></span></pre>
<p><span><strong>字段说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th><th class="table_cell"><span>必填</span></th></tr>
<tr><td class="table_cell"><span>component_appid</span></td><td class="table_cell"><span>第三方平台appid</span></td><td class="table_cell"><span>是</span></td></tr>
<tr><td class="table_cell"><span>authorizer_appid</span></td><td class="table_cell"><span>授权方appid</span></td><td class="table_cell"><span>是</span></td></tr>
<tr><td class="table_cell"><span>funscope_category_id</span></td><td class="table_cell"><span>授权集id</span></td><td class="table_cell"><span>是</span></td></tr>
<tr><td class="table_cell"><span>confirm_value</span></td><td class="table_cell"><span>是否确认，1为确认，2为取消</span></td><td class="table_cell"><span>是</span></td></tr>
</tbody>
</table>
<p><span><strong>返回数据</strong></span></p>
<pre><span>{&nbsp;&nbsp;"errcode":xxxx,&nbsp;&nbsp;"errmsg":"xxxx"&nbsp;}
<br></span></pre>
<p>
<br></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>errcode</span></td><td class="table_cell"><span>错误码，0为正常。</span></td></tr>
<tr><td class="table_cell"><span>errmsg</span></td><td class="table_cell"><span>错误信息。</span></td></tr>
</tbody>
</table>
<h4><span><strong><a name="2.10.3"></a>2.10.3 获取授权方的账户信息</strong></span></h4>
<p><span><strong>接口说明</strong></span></p>
<p><span>该API用于获取授权方的公众号基本信息，包括头像、昵称、帐号类型、认证类型、微信号、原始ID和二维码图片URL。 需要特别记录授权方的帐号类型，在消息及事件推送时，对于不具备客服接口的公众号，需要在5秒内立即响应；而若有客服接口，则可以选择暂时不响应，而选择后续通过客服接口来发送消息触达粉丝。</span></p>
<p><span><strong>接口调用请求说明</strong></span></p>
<pre><span>http请求方式:&nbsp;POST&nbsp;https://api.weixin.qq.com/&nbsp;cgi-bin/component/api_get_authorizer_info?component_access_token=TOKEN
<br></span></pre>
<p><span><strong>参数说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数</span></th><th class="table_cell"><span>是否必须</span></th><th class="table_cell"><span>说明</span></th></tr>
<tr><td class="table_cell"><span>access_token</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>调用接口凭证</span></td></tr>
<tr><td class="table_cell"><span>POST数据</span></td><td class="table_cell"><span>是</span></td><td class="table_cell"><span>Json数据</span></td></tr>
</tbody>
</table>
<p><span><strong>POST数据示例</strong></span></p>
<pre><span>{&nbsp;&nbsp;”component_appid":"appid_value"&nbsp;,&nbsp;&nbsp;"authorizer_appid":&nbsp;"auth_appid_value"&nbsp;&nbsp;}
<br></span></pre>
<p><span><strong>字段说明</strong></span></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th><th class="table_cell"><span>必填</span></th></tr>
<tr><td class="table_cell"><span>component_appid</span></td><td class="table_cell"><span>第三方平台appid</span></td><td class="table_cell"><span>是</span></td></tr>
<tr><td class="table_cell"><span>authorizer_appid</span></td><td class="table_cell"><span>授权方appid</span></td><td class="table_cell"><span>是</span></td></tr>
</tbody>
</table>
<p><span><strong>返回数据</strong></span></p>
<p><span>返回结果示例</span></p>
<pre><span>{<br> &nbsp;"authorizer_info": {<br> &nbsp;"nick_name": "微信SDK Demo Special", <br> &nbsp;"head_img": "http://wx.qlogo.cn/mmopen/GPyw0pGicibl5Eda4GmSSbTguhjg9LZjumHmVjybjiaQXnE9XrXEts6ny9Uv4Fk6hOScWRDibq1fI0WOkSaAjaecNTict3n6EjJaC/0", <br> &nbsp;"service_type_info": { "id": 2 }, <br> &nbsp;"verify_type_info": { "id": 0 },<br> &nbsp;"user_name":"gh_eb5e3a772040",<br> &nbsp;"alias":"paytest01"<br>}, <br> &nbsp;"qrcode_url":"URL", &nbsp; &nbsp;<br> &nbsp;"authorization_info": {<br> &nbsp;"appid": "wxf8b4f85f3a794e77", <br> &nbsp;"func_info": [<br> &nbsp;{"funcscope_category": {"id": 1}，confirm_info”:{"need_confirm": 1,"already_confirm":0}}, <br> &nbsp;{"funcscope_category": {"id": 2}，confirm_info”:{"need_confirm": 1,"already_confirm":0}}, <br> &nbsp;{"funcscope_category": {"id":,8}，confirm_info”:{"need_confirm": 1,"already_confirm":1}}<br>]<br>}<br>}
<br></span></pre>
<p>
<br></p>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>参数名</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>errcode</span></td><td class="table_cell"><span>错误码，0为正常。</span></td></tr>
<tr><td class="table_cell"><span>errmsg</span></td><td class="table_cell"><span>错误信息。</span></td></tr>
<tr><td class="table_cell"><span>authorizer_info</span></td><td class="table_cell"><span>授权方昵称。</span></td></tr>
<tr><td class="table_cell"><span>head_img</span></td><td class="table_cell"><span>授权方头像</span></td></tr>
<tr><td class="table_cell"><span>service_type_info</span></td><td class="table_cell"><span>授权方公众号类型，0代表订阅号，1代表由历史老帐号升级后的订阅号，2代表服务号</span></td></tr>
<tr><td class="table_cell"><span>verify_type_info</span></td><td class="table_cell"><span>授权方认证类型，-1代表未认证，0代表微信认证，1代表新浪微博认证，2代表腾讯微博认证，3代表已资质认证通过但还未通过名称认证，4代表已资质认证通过、还未通过名称认证，但通过了新浪微博认证，5代表已资质认证通过、还未通过名称认证，但通过了腾讯微博认证</span></td></tr>
<tr><td class="table_cell"><span>user_name</span></td><td class="table_cell"><span>授权方公众号原始id</span></td></tr>
<tr><td class="table_cell"><span>alias</span></td><td class="table_cell"><span>授权方公众号设置的微信号，可能为空。</span></td></tr>
<tr><td class="table_cell"><span>qrcode_url</span></td><td class="table_cell"><span>二维码图片链接，开发者最好保存</span></td></tr>
<tr><td class="table_cell"><span>authorization_info</span></td><td class="table_cell"><span>授权信息</span></td></tr>
<tr><td class="table_cell"><span>appid</span></td><td class="table_cell"><span>授权方appid</span></td></tr>
<tr><td class="table_cell"><span>func_info</span></td><td class="table_cell"><span>参见api_query_auth的返回结果func_info说明</span></td></tr>
</tbody>
</table>
<h3><span><strong><a name="2.11"></a>2.11 错误码说明</strong></span></h3>
<table cellspacing="0" cellpadding="2" width="700px">
<tbody>
<tr class="firstRow thead"><th class="table_cell"><span>错误码</span></th><th class="table_cell"><span>描述</span></th></tr>
<tr><td class="table_cell"><span>－1</span></td><td class="table_cell"><span>系统错误。</span></td></tr>
<tr><td class="table_cell"><span>－1000</span></td><td class="table_cell"><span>系统错误</span></td></tr>
<tr><td class="table_cell"><span>61017</span></td><td class="table_cell"><span>子商户未发起授权，不能进行授权确认</span></td></tr>
<tr><td class="table_cell"><span>61020</span></td><td class="table_cell"><span>提交的参数错误，即不包含在接口字段范围内</span></td></tr>
<tr><td class="table_cell"><span>61022</span></td><td class="table_cell"><span>审核中和审核通过的商户资料均不能重提。仅审核驳回可重提</span></td></tr>
<tr><td class="table_cell"><span>43014</span></td><td class="table_cell"><span>母商户资料未提交、未审核或审核未通过（母商户资料提交并审核通过后，才能提交子商户资料）</span></td></tr>
<tr><td class="table_cell"><span>41004</span></td><td class="table_cell"><span>appid为空</span></td></tr>
<tr><td class="table_cell"><span>40013</span></td><td class="table_cell"><span>无效的appid，请检查提交的子商户账号是否正确。</span></td></tr>
<tr><td class="table_cell"><span>40007</span></td><td class="table_cell"><span>无效的media_id</span></td></tr>
<tr><td class="table_cell"><span>61019</span></td><td class="table_cell"><span>非强授权，不能用confirm确认</span></td></tr>
<tr><td class="table_cell"><span>61018</span></td><td class="table_cell"><span>已经confirm确认，无需重复确认</span></td></tr>
<tr><td class="table_cell"><span>61021</span></td><td class="table_cell"><span>尚未进行资料提交，不可confirm</span></td></tr>
<tr><td class="table_cell"><span>43016</span></td><td class="table_cell"><span>第三方平台账号需要完成认证</span></td></tr>
<tr><td class="table_cell"><span>40035</span></td><td class="table_cell"><span>不符合的图片大小</span></td></tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</body>
</html>