<!-- 主区域 [[ -->
            <div class="content">
                <!-- 内容 [[ -->
		            <div class="content-hd">
    <h2 class="with-border">关闭订单</h2>
</div> 
<div class="content-bd">
    <div class="data-box with-padding">
        <div class="data-hd">      
			<h3>应用场景 </h3>
        </div>
        <div class="data-bd">
			<p>以下情况需要调用关单接口：商户订单支付失败需要生成新单号重新发起支付，要对原订单号调用关单，避免重复支付；系统下单后，用户支付超时，系统退出不再受理，避免用户继续，请调用关单接口。 </p>
			<b>注意：订单生成后不能马上调用关单接口，最短调用时间间隔为5分钟。</b>
        </div>
    </div>
    <div class="data-box with-padding">
        <div class="data-hd">
			<h3 >接口地址 </h3>
        </div>
        <div class="data-bd">
        	<p >接口链接：https://api.mch.weixin.qq.com/pay/closeorder </p>
        </div>
    </div>
    <div class="data-box with-padding">
        <div class="data-hd">
			<h3 >是否需要证书 </h3>
        </div>
        <div class="data-bd">
			<p >不需要。 </p>
        </div>
    </div>
    <div class="data-box with-padding">
        <div class="data-hd">
			<h3 >请求参数 </h3>
        </div>
        <div class="data-bd">
			<div class="table-wrp with-border">
              <table  class="table">
			  <tr>
			    <th class="name">字段名</th>
                <th class="var">变量名</th>
                <th class="require">必填</th>
                <th class="type">类型</th>
                <th class="example">示例值</th>
                <th class="description">描述</th>
		      </tr>
			  <tr>
			    <td>公众账号ID</td>
			    <td>appid</td>
			    <td>是</td>
			    <td>String(32)</td>
			    <td>wx8888888888888888</td>
			    <td>微信分配的公众账号ID（企业号corpid即为此appId）</td>
		      </tr>
			  <tr>
			    <td>商户号</td>
			    <td>mch_id</td>
			    <td>是</td>
			    <td>String(32)</td>
			    <td>1900000109</td>
			    <td>微信支付分配的商户号</td>
		      </tr>
			  <tr>
			    <td>商户订单号</td>
			    <td>out_trade_no</td>
			    <td>是</td>
			    <td>String(32)</td>
			    <td>1217752501201407033233368018</td>
			    <td>商户系统内部的订单号</td>
		      </tr>
			  <tr>
			    <td>随机字符串</td>
			    <td>nonce_str</td>
			    <td>是</td>
			    <td>String(32)</td>
			    <td>5K8264ILTKCH16CQ2502SI8ZNMTM67VS</td>
			    <td>商户系统内部的订单号,32个字符内、可包含字母,&nbsp;其他说明见<a  target="_blank"  href="?chapter=4_3" >安全规范</a></td>
		      </tr>
			  <tr>
			    <td>签名</td>
			    <td>sign</td>
			    <td>是</td>
			    <td>String(32)</td>
			    <td>C380BEC2BFD727A4B6845133519F3AD6</td>
			    <td>签名，<a  target="_blank"  href="?chapter=4_3" >详见签名生成算法</a></td>
		      </tr>
			  <tr>
                 <td>签名类型</td>
                 <td>sign_type</td>
                 <td>否</td>
                 <td>String(32)</td>
                 <td>HMAC-SHA256</td>
                 <td>签名类型，目前支持HMAC-SHA256和MD5，默认为MD5</td>
              </tr>
		    </table>
			</div>
			<p >示例代码</p>
            <div class="guide-msg mb10">
			<p >&lt;xml&gt;<br />
			  &#160;&nbsp;&#160;&lt;appid&gt;wx2421b1c4370ec43b&lt;/appid&gt;<br />
			  &#160;&nbsp;&#160;&lt;mch_id&gt;10000100&lt;/mch_id&gt;<br />
			  &#160;&nbsp;&#160;&lt;nonce_str&gt;4ca93f17ddf3443ceabf72f26d64fe0e&lt;/nonce_str&gt;<br />
			  &#160;&nbsp;&#160;&lt;out_trade_no&gt;1415983244&lt;/out_trade_no&gt;<br />
			  &#160;&nbsp;&#160;&lt;sign&gt;59FF1DF214B2D279A0EA7077C54DD95D&lt;/sign&gt;<br />
			  &lt;/xml&gt; </p>
              </div>
        </div>
    </div>
    <div class="data-box with-padding">
        <div class="data-hd">
			<h3 >返回结果 </h3>
        </div>
        <div class="data-bd">
			<div class="table-wrp with-border">
              <table  class="table">
			  <tr>
			     <th class="name">字段名</th>
                <th class="var">变量名</th>
                <th class="require">必填</th>
                <th class="type">类型</th>
                <th class="example">示例值</th>
                <th class="description">描述</th>
		      </tr>
			  <tr>
			    <td>返回状态码</td>
			    <td>return_code</td>
			    <td>是</td>
			    <td>String(16)</td>
			    <td>SUCCESS</td>
			    <td>SUCCESS/FAIL</td>
		      </tr>
			  <tr>
			    <td>返回信息</td>
			    <td>return_msg</td>
			    <td>否</td>
			    <td>String(128)</td>
			    <td>签名失败 </td>
			    <td><p>返回信息，如非空，为错误原因 </p>
			        <p>签名失败 </p>
		        <p >参数格式校验错误</p></td>
		      </tr>
		    </table>
			</div>
			<p class="mb10">以下字段在return_code为SUCCESS的时候有返回 </p>
			<div class="table-wrp with-border">
              <table  class="table">
			  <tr>
			    <th class="name">字段名</th>
                <th class="var">变量名</th>
                <th class="require">必填</th>
                <th class="type">类型</th>
                <th class="example">示例值</th>
                <th class="description">描述</th>
		      </tr>
			  <tr>
			    <td>公众账号ID</td>
			    <td>appid</td>
			    <td>是</td>
			    <td>String(32)</td>
			    <td>wx8888888888888888</td>
			    <td>微信分配的公众账号ID</td>
		      </tr>
			  <tr>
			    <td>商户号</td>
			    <td>mch_id</td>
			    <td>是</td>
			    <td>String(32)</td>
			    <td>1900000109</td>
			    <td>微信支付分配的商户号</td>
		      </tr>
			  <tr>
			    <td>随机字符串</td>
			    <td>nonce_str</td>
			    <td>是</td>
			    <td>String(32)</td>
			    <td>5K8264ILTKCH16CQ2502SI8ZNMTM67VS</td>
			    <td>随机字符串，不长于32位</td>
		      </tr>
			  <tr>
			    <td>签名</td>
			    <td>sign</td>
			    <td>是</td>
			    <td>String(32)</td>
			    <td>C380BEC2BFD727A4B6845133519F3AD6</td>
			    <td>签名，<a  target="_blank"  href="?chapter=4_3">验证签名算</a></td>
		      </tr>
			  <tr>
			    <td>业务结果</td>
			    <td>result_code</td>
			    <td>是</td>
			    <td>String(16)</td>
			    <td>SUCCESS</td>
			    <td>SUCCESS/FAIL</td>
		      </tr>
			  <tr>
			    <td>业务结果描述</td>
			    <td>result_msg</td>
			    <td>是</td>
			    <td>String(32)</td>
			    <td>OK</td>
			    <td>对于业务执行的详细描述</td>
		      </tr>
			  <tr>
			    <td>错误代码</td>
			    <td>err_code</td>
			    <td>否</td>
			    <td>String(32)</td>
			    <td>SYSTEMERROR</td>
			    <td>详细参见第6节错误列表</td>
		      </tr>
			  <tr>
			    <td>错误代码描述</td>
			    <td>err_code_des</td>
			    <td>否</td>
			    <td>String(128)</td>
			    <td>系统错误</td>
			    <td>结果信息描述</td>
		      </tr>
		    </table>
			</div>
			<p class="mb10">示例代码 </p>
            <div class="guide-msg mb10">
			<p >&lt;xml&gt;<br />
			  &#160;&nbsp;&#160;&lt;return_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/return_code&gt;<br />
			  &#160;&nbsp;&#160;&lt;return_msg&gt;&lt;![CDATA[OK]]&gt;&lt;/return_msg&gt;<br />
			  &#160;&nbsp;&#160;&lt;appid&gt;&lt;![CDATA[wx2421b1c4370ec43b]]&gt;&lt;/appid&gt;<br />
			  &#160;&nbsp;&#160;&lt;mch_id&gt;&lt;![CDATA[10000100]]&gt;&lt;/mch_id&gt;<br />
			  &#160;&nbsp;&#160;&lt;nonce_str&gt;&lt;![CDATA[BFK89FC6rxKCOjLX]]&gt;&lt;/nonce_str&gt;<br />
			  &#160;&nbsp;&#160;&lt;sign&gt;&lt;![CDATA[72B321D92A7BFA0B2509F3D13C7B1631]]&gt;&lt;/sign&gt;<br />
			  &#160;&nbsp;&#160;&lt;result_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/result_code&gt;<br />
			  &#160;&nbsp;&#160;&lt;result_msg&gt;&lt;![CDATA[OK]]&gt;&lt;/result_msg&gt;<br />
			  &lt;/xml&gt; </p>
              </div>
        </div>
    </div>
    <div class="data-box with-padding">
        <div class="data-hd">              
			<h3 >错误码 </h3>
        </div>
        <div class="data-bd">
			<div class="table-wrp with-border">
              <table  class="table">
			  <tr>
			    <th width="150px">名称</th>
			    <th width="100px">描述</th>
			    <th width="200px">原因</th>
			    <th>解决方案</th>
		      </tr>
			  <tr>
			    <td>ORDERPAID</td>
			    <td>订单已支付</td>
			    <td>订单已支付，不能发起关单</td>
			    <td>订单已支付，不能发起关单，请当作已支付的正常交易</td>
		      </tr>
			  <tr>
			    <td>SYSTEMERROR</td>
			    <td>系统错误</td>
			    <td>系统错误</td>
			    <td>系统异常，请重新调用该API</td>
		      </tr>
			  <tr >
			    <td>ORDERNOTEXIST</td>
			    <td>订单不存在</td>
			    <td>订单系统不存在此订单</td>
			    <td>不需要关单，当作未提交的支付的订单</td>
		      </tr>
			  <tr>
			    <td>ORDERCLOSED</td>
			    <td>订单已关闭</td>
			    <td>订单已关闭，无法重复关闭</td>
			    <td>订单已关闭，无需继续调用</td>
		      </tr>
			  <tr>
			    <td>SIGNERROR</td>
			    <td>签名错误</td>
			    <td>参数签名结果不正确</td>
			    <td>请检查签名参数和方法是否都符合签名算法要求</td>
		      </tr>
			  <tr>
			    <td>REQUIRE_POST_METHOD</td>
			    <td>请使用post方法</td>
			    <td>未使用post传递参数&nbsp;</td>
			    <td>请检查请求参数是否通过post方法提交</td>
		      </tr>
			  <tr>
			    <td>XML_FORMAT_ERROR</td>
			    <td>XML格式错误</td>
			    <td>XML格式错误</td>
			    <td>请检查XML参数格式是否正确</td>
		      </tr>
		    </table>
			</div>
            
		  </div>
          </div>
</div><!--[if !IE]>|xGv00|b7170930908821cf39864a0395750159<![endif]-->					<script>
					$(document).ready(function(){
						$("dl").bind("click", function(){
							$("dl").removeClass("open");
						  	$(this).addClass("open");
						  	//$(this).children("dt").addClass("on");
						});
						var re = /\d{1,2}_\d{1,2}/g;
						var x,y,z;
						z ='';
						if((x = re.exec(location.search)) !=null){
							y = (''+x).split("_");
							dl =$("dl#"+y[0]);
							dl.addClass("open");
							if(z == ''){
								z = y[1]-1;
							}else{
								z--;
							}
							$(dl.children("dd")[z]).addClass("on");
						}
					});
					</script>
            	<!-- 内容 ]] -->
        	</div>
            